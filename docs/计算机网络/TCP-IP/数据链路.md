---
id: data-link
title: 数据链路
---

## 作用

> 数据链路指 OSI 参考模型中的数据链路层,有时候也值以太网、无线局域网,但是TCP/IP 中没有对 OSI 参考模型中数据链路层及以下部分定义

### MAC 地址

MAC 地址用于**识别数据链路中互连的节点**, MAC 地址长 `48 bit`,在使用网卡(NIC) 的时候, MAC 一般会烧录到 `ROM` 中。正常来说,全世界所有设备的 MAC 地址都是不同的。

![MAC 地址格式](./image/数据链路/Mac地址格式.webp)

从上面可以看出, MAC 地址不同范围的值表示了不同的信息:

1. `3bit ~ 24bit` : 表示厂商识别码,即每个网卡厂商都有自己的唯一的识别编码
2. `25bit ~ 48bit` : 表示厂商内识别码,即这个网卡在厂商内部唯一的识别码 

MAC 地址一般采用 `16 进制` 来表示,按照每 8bit 转换一个值,MAC 地址的格式为: `xx-xx-xx-xx-xx-xx`, 比如: 70-B5-E8-25-DE-F2

:::tip 关于厂商识别码

有种设备叫做网络分析器,可以读取数据帧中发送的 MAC 地址里的厂商识别码,而这些存厂商识别码会公开在[这里](http://standards.ieee.org/develop/regauth/oui/public.html)

并且 MAC 地址的分配,通过[这个站点](http://standards.ieee.org/develop/regauth/oui/index.html)申请

:::

### 共享介质型网络

> 从对通信介质的使用方法上看,可以分为: **共享介质型网络** 和 **非共享介质型网络**

所谓的共享介质型网络,指的是`多个设备共享一个通信介质的网络`,早期的以太网就是这种。这种方式下,多个设备使用`同一个 载波信道`进行发送和接收,所以基本采用`半双工通信`,并且有必要对介质进行`访问控制`。

在共享介质型网络中有两种访问控制方式:

1. `争用方式`
2. `令牌传递方式`

#### 争用方式

指的是`竞争获取数据传输的权力`,也叫做`载波监听多路访问(CSMA, Carrier Sense Multiple Access)`

这种方式需要网络中各个站(节点)采用**先到先得**的方式占用信道发送数据,但是这种方式存在弊端,即如果多个站(节点)同时发送数据帧,那么就会**发生冲突**,并导致网络拥堵、性能下降。

后来出现了一种改良方式`载波侦听多路访问/冲突检测(CSMA/CD,Carrier Sense Multiple Access with Collision Detection)`,这种方式要求每个站(节点)**提前检查冲突,一旦检测到冲突,就尽早释放信道**,这种方式的大致原理如下: 

1. 节点在发送数据之前，首先检测载波信道是否空闲(`载波监听`)，如果载波信道空闲则发送，否则就等待(`坚持监听算法`)
2. 在发送出信息后，再对冲突进行检测(比如监控电压)，当发现冲突时，则取消发送,并立即释放载波信道
3. 放弃发送数据后, 随机等待一段时间,然后再重新竞争介质,重新发送数据帧

#### 令牌传递方式

