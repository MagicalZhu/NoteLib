---
id: Undo日志
title: Undo日志
---

> redo 日志记录的事务的行为,可以很好的**对页进行“重做”**, 但是事务除了能提交,还可以回滚,这个时候就需要`undo`
>
> 在对数据库进行修改的时候,除了会产生 redo 日志,InnoDB还会生成undo 日志。
>
> redo 日志是事务持久性的保证,undo 日志则是事务原子性的保证,**在事务中 `更新数据` 的 `前置操作 `其实是要先写入一个 undo log **

### 理解 Undo 日志

事务需要保证 `原子性` ，也就是事务中的操作要么全部完成,要么什么也不做。但有时候事务执行到一半 会出现一些情况，比如:

1. 事务执行过程中可能遇到各种错误，比如 服务器本身的错误、操作系统错误, 甚至是突然断电导致的错误
2. 程序员可以在事务执行过程中手动输入 **ROLLBACK** 语句结束当前事务的执行

以上情况出现,我们需要**把数据改回原先的样子**, 这个过程称之为`回滚` , 这样就可以造成一个假象:这个事务看起来什么都没做，所以符合 原子性要求
