---
id: 配置元信息
title: 配置元信息
---

## 配置元信息

配置元信息基本有下面几类:

1. Spring Bean 配置元信息: `BeanDefinition`
2. Spring Bean 属性元信息: `PropertyValues`
3. Spring 容器配置元信息
4. Spring 外部化配置元信息: `PropertySource`
5. Spring Profile 元信息: `@Profile`

## Bean 配置元信息

> 关于 BeanDefinition 的详细可以参看 [元信息接口](Bean#元信息接口beandefinition)

- Bean 配置元信息(BeanDefinition)
  - `GenericBeanDefinition`: 通用型 BeanDefinition
  - `RootBeanDefinition`: 无 Parent 的 BeanDefinition 或者合并后的 BeanDefinition
  - `AnnotatedBeanDefinition`: 注解标注的 BeanDefinition

- GenericBeanDefinition 和 RootBeanDefinition 都继承自 `AbstractBeanDefinition`,两者最大的区别就是:前者可以设置 parent,而后者是顶层元信息,无法设置 parent。

- **AnnotatedBeanDefinition** 是面向注解的,本身它是一个接口,并且它是在 `BeanDefinition` 接口上进行拓展的,它暴露了 Bean Class 上的注解元信息(`AnnotationMetadata`)
  - 关于这个 *AnnotationMetadata* 一般采用 反射或者 `ASM 字节码` 的方式

```java
/**
 * 拓展了 BeanDefinition 接口,然后暴露了 Bean Class 上的注解元信息(AnnotationMetadata)
 *
 */
public interface AnnotatedBeanDefinition extends BeanDefinition {

    /**
     * 返回注解元信息
     */
    AnnotationMetadata getMetadata();

    @Nullable
    MethodMetadata getFactoryMethodMetadata();
}
```

## Bean 属性元信息

- Bean 属性元信息(PropertyValues)
  - 可修改的实现: `MutablePropertyValues`
  - 元素成员: `PropertyValue`
- Bean 属性上下文存储: `AttributeAccessor`
- Bean 元信息元素: `BeanMetadataElement`

## 容器配置元信息

## 装载 Bean 配置元信息

### 基于 XML

### 基于 Properties

### 基于 Java 注解

### 底层实现

## 装载容器配置元信息

### 基于 XML

### 基于注解

## 拓展Spring XML 元素

## 装载外部化配置

### 基于 Properties 文件

### 基于 YAML 文件
