<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Mysql/高级特性/InnoDB表空间">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">InnoDB表空间 | 花裤衩Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://huakucha.com/img/fav.png"><meta data-rh="true" name="twitter:image" content="https://huakucha.com/img/fav.png"><meta data-rh="true" property="og:url" content="https://huakucha.com/docs/Mysql/高级特性/InnoDB表空间"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="InnoDB表空间 | 花裤衩Wiki"><meta data-rh="true" name="description" content="表空间是一个抽象的概念,从管理上可以将表空间分为系统表空间、独立表空间、临时表空间等。"><meta data-rh="true" property="og:description" content="表空间是一个抽象的概念,从管理上可以将表空间分为系统表空间、独立表空间、临时表空间等。"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://huakucha.com/docs/Mysql/高级特性/InnoDB表空间"><link data-rh="true" rel="alternate" href="https://huakucha.com/docs/Mysql/高级特性/InnoDB表空间" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://huakucha.com/docs/Mysql/高级特性/InnoDB表空间" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://QZ9YPBGUYT-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="花裤衩Wiki RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="花裤衩Wiki Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="花裤衩Wiki JSON Feed">




<link rel="search" type="application/opensearchdescription+xml" title="花裤衩Wiki" href="/opensearch.xml">

<link rel="preconnect" href="https://fonts.gstatic.com">
<link rel="stylesheet" href="https://fonts.font.im/css?family=Raleway:500,700&amp;display=swap"><link rel="stylesheet" href="/assets/css/styles.864d50a7.css">
<link rel="preload" href="/assets/js/runtime~main.bf86732a.js" as="script">
<link rel="preload" href="/assets/js/main.98457ee6.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a href="#" class="skipToContent_D8pK">跳到主要内容</a></div><div class="announcementBar_s0pr" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarPlaceholder_qxfj"></div><div class="content_zf74 announcementBarContent_dpRF">🌟欢迎来到花裤衩的博客🌟</div><button type="button" aria-label="关闭" class="clean-btn close closeButton_ZdWa announcementBarClose_iXyO"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="花裤衩的博客" class="themedImage_Pn4p themedImage--light_PnYV"><img src="/img/logo.svg" alt="花裤衩的博客" class="themedImage_Pn4p themedImage--dark_eYgw"></div><b class="navbar__title text--truncate">花裤衩</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">基础知识🤖</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/currency">并发编程</a></li><li><a class="dropdown__link" href="/docs/networrk-basic">计算机网络</a></li><li><a class="dropdown__link" href="/docs/linuxCommand">Linux</a></li><li><a class="dropdown__link" href="/docs/dataStructure">数据结构与算法</a></li><li><a class="dropdown__link" href="/docs/leetCode">LeetCode</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/mysql">MySQL</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">后端框架👨‍💻</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/spring">Spring</a></li><li><a class="dropdown__link" href="/docs/springCloud">SpringCloud</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">方法论🚧</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/distribute/protol">分布式理论</a></li><li><a class="dropdown__link" href="/docs/distribute/basicTech">分布式技术点</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">中间件🚀</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/middleware/basicMiddleware">基础中间件</a></li><li><a class="dropdown__link" href="/docs/middleware/job">定时任务</a></li><li><a class="dropdown__link" href="/docs/middleware/cache">缓存</a></li><li><a class="dropdown__link" href="/docs/middleware/searchEngine">搜索引擎</a></li><li><a class="dropdown__link" href="/docs/middleware/messageQueue">消息队列</a></li><li><a class="dropdown__link" href="/docs/middleware/database">数据库</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">底层⛽️</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/JVM">JVM</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">前端技术👩‍💻</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/front/Vue">Vue</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">其他工具👹</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/Gradle">Gradle</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">物料中心👏</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/website/BE">后端产品</a></li><li><a class="dropdown__link" href="/website/COM">其他产品</a></li><li><a class="dropdown__link" href="/website/FE">前端产品</a></li></ul></div><a class="navbar__item navbar__link" href="/blog">博客</a></div><div class="navbar__items navbar__items--right"><a href="https://blog.huakucha.top" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">关于<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/MagicalZhu" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_MW0i colorModeToggle_x44X"><button class="clean-btn toggleButton_yw5v toggleButtonDisabled_BJd7" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_SFTY"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_ekgs"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_H2mL"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_eExm docsWrapper_W2AM"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_ntye" type="button"></button><div class="docPage_qMb8"><aside class="theme-doc-sidebar-container docSidebarContainer_rpaz"><div class="sidebar_mhZE"><nav class="menu thin-scrollbar menu_Y1UP menuWithAnnouncementBar_fPny"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/mysql">简介</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/mysql基础与高级">MySQL基础与高级</a><button aria-label="打开/收起侧边栏菜单「MySQL基础与高级」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/基础知识">基础知识</a><button aria-label="打开/收起侧边栏菜单「基础知识」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/数据库管理">数据库管理</a><button aria-label="打开/收起侧边栏菜单「数据库管理」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/架构与引擎">架构与引擎</a><button aria-label="打开/收起侧边栏菜单「架构与引擎」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/存储结构与索引">存储结构与索引</a><button aria-label="打开/收起侧边栏菜单「存储结构与索引」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Mysql/高级特性/索引">索引</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Mysql/高级特性/索引的应用">索引的应用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Mysql/高级特性/设计索引">设计索引</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Mysql/高级特性/InnoDB数据页结构">InnoDB数据页结构</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Mysql/高级特性/InnoDB表空间">InnoDB表空间</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/性能优化">性能优化</a><button aria-label="打开/收起侧边栏菜单「性能优化」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/事务与锁">事务与锁</a><button aria-label="打开/收起侧边栏菜单「事务与锁」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/运维">运维</a><button aria-label="打开/收起侧边栏菜单「运维」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Mysql/MySQL参数与命令">MySQL参数与命令</a></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_JQG6"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_Iseg"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_RiV8"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/mysql基础与高级"><span itemprop="name">MySQL基础与高级</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/存储结构与索引"><span itemprop="name">存储结构与索引</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">InnoDB表空间</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_IbkY theme-doc-toc-mobile tocMobile_bxCs"><button type="button" class="clean-btn tocCollapsibleButton_p7nN">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>InnoDB表空间</h1></header><blockquote><p><code>表空间</code>是一个抽象的概念,从管理上可以将表空间分为<strong>系统表空间、独立表空间、临时表空间等</strong>。</p><p>对于<strong>系统表空间</strong>来说,对应着文件系统中一个或多个实际文件,对于<strong>独立表空间</strong>来说,对应着文件系统中的<strong>ibd文件</strong></p></blockquote><p><strong>博客推荐</strong></p><p><a href="https://www.cnblogs.com/Godfunc/p/15218704.html" target="_blank" rel="noopener noreferrer">Mysql(独立表空间)数据的存储结构</a></p><p><a href="https://blog.csdn.net/solo_jm/article/details/118962314" target="_blank" rel="noopener noreferrer">MySQL-段、区、组</a></p><p><a href="https://blog.csdn.net/jqsfjqsf/article/details/124641547" target="_blank" rel="noopener noreferrer">Innodb表空间</a></p><p><a href="https://www.cnblogs.com/devsong/p/14848466.html#:~:text=xdes_ent,p_header" target="_blank" rel="noopener noreferrer">Innodb表空间、段、区描述页分析与磁盘存储空间管理</a>, <a href="https://blog.jcole.us/innodb/" target="_blank" rel="noopener noreferrer">原版站点(英文)</a></p><h2 class="anchor anchorWithStickyNavbar_loeA" id="基本概念">基本概念<a class="hash-link" href="#基本概念" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_loeA" id="页面类型">页面类型<a class="hash-link" href="#页面类型" title="标题的直接链接">​</a></h3><p>我们的索引是以 B+Tree 的形式保存到表空间的, <strong>B+Tree 的节点就是索引页,或者叫做数据页</strong>。
在页的 <strong>FILE_HEADER</strong> 中,定义了页面类型 <em>FILE_PAGE_TYPE</em>,常见的页面类型有如下的几个</p><ol><li><p><strong>FIL_PAGE_TYPE_ALLOCATED</strong> : 最新分配,还没使用</p></li><li><p><strong>FIL_PAGE_UNDO_LOG</strong> : Undo 日志页</p></li><li><p><strong>FIL_PAGE_INODE</strong> : 段信息节点</p></li><li><p><strong>FIL_PAGE_IBUF_FREE_LIST</strong> : Insert Buffer 空闲列表</p></li><li><p><strong>FIL_PAGE_IBUF_BITMAP</strong> : Insert Buffer 位图</p></li><li><p><strong>FIL_PAGE_TYPE_SYS</strong> : 系统页</p></li><li><p><strong>FIL_PAGE_TYPE_TRX_SYS</strong> : 事务系统数据</p></li><li><p><strong>FIL_PAGE_TYPE_FSP_HDR</strong> : 表空间头部信息</p></li><li><p><strong>FIL_PAGE_TYPE_XDES</strong> : 扩展描述页</p></li><li><p><strong>FIL_PAGE_TYPE_BLOB</strong> : BLOB页</p></li><li><p><strong>FIL_PAGE_INDEX</strong> : 索引页，也就是我们所说的数据页</p></li></ol><h3 class="anchor anchorWithStickyNavbar_loeA" id="页通用部分">页通用部分<a class="hash-link" href="#页通用部分" title="标题的直接链接">​</a></h3><p>我们说的数据页就是 FILE_PAGE_TYPE 是 <strong>FILE_PAGE_INDEX</strong> 的页面, 数据页由七部分组成,其中有两部分是<strong>每个页面都有的</strong></p><ol><li><code>FILE_HEADER</code></li><li><code>FILE_TRAILFER</code></li></ol><p><img loading="lazy" src="http://assets.processon.com/chart_image/62f4a3b81e0853714d45a6c4.png?_=1660200161898" alt="页通用部分" class="img_CujE"></p><h2 class="anchor anchorWithStickyNavbar_loeA" id="独立表空间结构">独立表空间结构<a class="hash-link" href="#独立表空间结构" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_loeA" id="区extent">区(Extent)<a class="hash-link" href="#区extent" title="标题的直接链接">​</a></h3><p>表空间的数据页很多,所以引入了区 (extent) 的概念,一个区中包含<strong>连续的 64 个页</strong>,也就是说一个区的默认大小为 1MB。</p><p><strong>不管是系统表空间还是独立表空间,都可以看成是由若干个区组成的</strong>,然后<code>按每 256 个区为一组</code>进行划分。</p><p><img loading="lazy" alt="image-20220817222802083" src="/assets/images/image-20220817222802083-c1a1e5cbf646c8ab5060c4f7038416f8.png" width="1516" height="1456" class="img_CujE"></p><br><p>在上述的图中,我们可以看出来, <code>extent0~extent255</code> 是第一组,后面同理按照 256 个区分为一组</p><ol><li><p>第一个组最开始的 3 个页面的类型是固定的，也就是说<code>extent0</code>这个区最开始的 3 个页面的类型是固定的，分别是:</p><ul><li><code>FSP_HDR (FileSpace Header)</code><ul><li>用于记录整个表空间的属性以及本组所有的区(即<strong>extent0 ~ extent255这 256 个区的属性</strong>)</li><li><strong>整个表空间只有一个 FSP_HDR 类型的页面</strong></li></ul></li><li><code>IBUF_BITMAP (InsertBuffer BitMap)</code><ul><li>用于存储本组所有的区的所有页面关于<code>INSERT BUFFER</code>的信息</li></ul></li><li><code>INODE</code><ul><li>存储了INODE的数据结构</li></ul></li></ul></li><li><p>其余各组最开始的 2 个页面的类型是固定的,也就是说extent256、extent512这些区最开始的 2 个页面的类型是固定的,分别是:</p><ul><li><code>XDES (Extent Descriptor)</code><ul><li>用来记录本组 256 个区的属性，也就是说对于在extent 256区中的该类型页面存储的就是extent 256 ~ extent 511这些区的属性</li><li>作用和第一组的 <code>FSP_HDR</code> 类似,只不过 <code>FSP_HDR</code> 还额外存储了表空间的一些属性信息</li></ul></li><li><code>IBUF_BITMAP</code> : 同上</li></ul></li></ol><div class="theme-admonition theme-admonition-tip alert alert--success admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>为什么需要区?</div><div class="admonitionContent_vXIg"><p>我们向表里面插入数据的时候,本质上是往该表的聚簇索引和二级索引中 B+Tree 的各个页中插入数据, 然后多个页之间通过FILE_PAGE_NEXT 和 FILE_PAGE_PREV 形成双向链接。</p><p>如果没有引入区,<strong>那么个页之间并不是连续的</strong>, 两个页可能隔得很远, 在涉及到多个页的查询就会变成<code>随机 IO</code>。</p><p>引入区的概念之后,可以保证<strong>一个区中的页与页之间是连续的</strong>,那么就变成了<code>顺序 IO</code></p></div></div><h3 class="anchor anchorWithStickyNavbar_loeA" id="段segment">段(Segment)<a class="hash-link" href="#段segment" title="标题的直接链接">​</a></h3><blockquote><p>通过引入区可以在一定程度上减少随机IO的次数,但是为啥需要引入段呢?</p></blockquote><ul><li><p><strong><code>段不对应表空间的某一连续物理区域,而是一个逻辑概念</code>。它是由表空间这个物理空间中的若干个零散页面(<a href="/docs/Mysql/高级特性/InnoDB表空间#%E7%A2%8E%E7%89%87%E5%8C%BAfragment">碎片区</a>)和一系列完整的区组成。</strong></p></li><li><p>拿数据页举例,数据页分为叶子节点和内节点,我们所谓范围查询，其实是对 B+Tree 的叶子节点中的记录进行顺序扫描, 而如果不区分叶子节点和非叶子节点,把所有节点代表的页面放到缓冲区中的话，进行范围扫描的性能就大大降低了。<strong>所以B+Tree的叶子节点和非叶子节点在逻辑存储上是有区分的,叶子节点有自己独有的区(叶子段),非叶子节点也有自己独有的区(非叶子段)</strong></p></li></ul><h3 class="anchor anchorWithStickyNavbar_loeA" id="碎片区fragment">碎片区(Fragment)<a class="hash-link" href="#碎片区fragment" title="标题的直接链接">​</a></h3><blockquote><p>默认情况下, 一个使用 InnoDB 存储引擎的表只有一个聚簇索引, 一个索引会生成两个段,而段是以区为单位申请的存储空间。一个区默认占用 <code>1MB</code>,所以一个只存了几条记录的小表也需要占用 2MB 的存储空间? 这个会极大的浪费存储空间。</p></blockquote><p>为了优化<strong>以完整的区为单位给某个段分配空间,但是实际存储数据较少的情况</strong>, InnoDB 使用了<code>碎片区</code>的技术。在碎片区中,不是所有的页都是存储同一个段的数据的,而是有些页用于段 A,有些用于段 B。<code>而碎片区直属于表空间,不属于任何一个段</code></p><p><strong>所以为某个段分配空间的策略如下:</strong></p><ol><li><p>刚开始向表中插入数据的时候, B+Tree 的段是从某个碎片区以<strong>单个页面为单位</strong>来分配存储空间的</p></li><li><p>当某个段已经占用了<code>碎片区中 32 个页面后</code>, 就会以<strong>完整的区为单位</strong>分配存储空间, 即直接创建该段附属的空闲区来存储页</p><ul><li>注意:  <code>不会将原来存在碎片区中的复制到新申请的完整的区中, 所以说段是一些完整的区和一些碎片区中的页面组成的</code> </li></ul></li></ol><p><img loading="lazy" alt="表空间" src="/assets/images/62f4b6cee0b34d3a87d9871e-89cd6c47f0342a087f2bd4c6e581ff9a.png" width="1205" height="708" class="img_CujE"></p><h3 class="anchor anchorWithStickyNavbar_loeA" id="区的管理">区的管理<a class="hash-link" href="#区的管理" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_loeA" id="区的分类">区的分类<a class="hash-link" href="#区的分类" title="标题的直接链接">​</a></h4><p><strong>区大体上可以分为 4 种类型:</strong></p><ol><li><code>Free</code><ul><li><strong>空闲区,只分配了存储空间，但是没使用</strong></li></ul></li><li><code>Free_Fragment</code><ul><li><strong>表示某碎片区中还有可用的页面</strong></li></ul></li><li><code>Full_Fragment</code><ul><li><strong>表示某碎片区中所有的页面都已经被使用了</strong></li></ul></li><li><code>FSEG</code><ul><li><strong>附属于某个段的区,<code>而不是在碎片区中</code></strong></li><li>每个索引都可以分为叶子节点段和非叶子节点段, 除此之外InnoDB还会另外定义一些特殊作用的段,在这些段中的数据量很大时将使用区来作为基本的分配单位</li></ul></li></ol><p><code>Free、Free_Fragment 和 Full_Fragment</code>三种状态的区都是独立的,直属于表空间,而处于<code>FSEG</code>状态的区则是直属于某个段, <strong>同时这也是区的 4 种状态,一个区可以在这4种状态间流转</strong></p><h4 class="anchor anchorWithStickyNavbar_loeA" id="xdes-entry-节点">XDES Entry 节点<a class="hash-link" href="#xdes-entry-节点" title="标题的直接链接">​</a></h4><blockquote><p>我们知道了区可以分为<a href="/docs/Mysql/高级特性/InnoDB表空间#%E5%8C%BA%E7%9A%84%E5%88%86%E7%B1%BB">Free、Free_Fragment、Full_Fragment、FSEG</a>,那么如何管理这些区的呢?</p></blockquote><ul><li><p>InnoDb使用<strong>链表</strong>来管理不同类型的区, 链表节点采用 <code>XDES Entry</code> 结构,  <code>每一个区都对应着一个XDES Entry</code>,<strong>描述了一个区的相关信息</strong></p></li><li><mark>注意: 链表中的节点不是区本身，而是代表区的 XDES Entry</mark></li><li><p><strong>下面这个是XDES Entry 结构:</strong></p><p><img loading="lazy" alt="image-20220817222942201" src="/assets/images/image-20220817222942201-44afc5b60b0e0351de7193704bd72fdf.png" width="1958" height="576" class="img_CujE"></p></li></ul><br><p>我们可以看到<code>XDES Entry是一个 40 字节的结构</code>, 分为下面 4 部分:</p><ol><li><p><code>Segment ID</code></p><ul><li><code>占用 8 字节</code></li><li><strong>每个段都有唯一的编号, Segment ID用于标识这个区属于哪个段</strong>,当然前提是该区已经被分配给某个段了,比如碎片区就不属于任何段,它属于表空间</li></ul></li><li><p><code>List Node</code></p><ul><li><p><code>占用 12 字节</code></p></li><li><p><strong>用于将若干个 XDES Entry 结构串联成一个链表</strong></p></li><li><p>下面是 List Node的结构 (<strong>由页号和指定页面内的偏移量组成</strong>):</p><p>  <img loading="lazy" alt="image-20220817223125715" src="/assets/images/image-20220817223125715-450b1d2419cb1be2a42d2c693de02663.png" width="1360" height="684" class="img_CujE"></p></li><li><p>如果<strong>想定位表空间内的某一个位置</strong>的话,只需<code>指定页号以及该位置在指定页号中的页内偏移量</code>即可(意味着可以定位到具体的页)。所以：</p><ul><li>Pre Node Page Number + Pre Node Offset : 指向前一个XDES Entry</li><li>Next Node Page Number + Next Node Offset : 指向后一个XDES Entry</li></ul></li></ul></li><li><p><code>State</code></p><ul><li><code>占用 4 字节</code></li><li><strong>用于表明区的状态,可选值有<code>FREE、FREE_FRAG、FULL_FRAG、FSEG</code></strong></li></ul></li><li><p><code>Page State Bitmap</code></p><ul><li><code>占用 16 字节(128 个比特位)</code></li><li><strong>描述当前区中64个页的状态，每个页2比特, 第一个比特表示是否空闲，第二个比特位没什么用</strong></li></ul></li></ol><h4 class="anchor anchorWithStickyNavbar_loeA" id="xdes-entry-链表">XDES Entry 链表<a class="hash-link" href="#xdes-entry-链表" title="标题的直接链接">​</a></h4><p>上面我们知道了 XDES Entry 中存在 List Node,可以将多个 XDES Entry 连接形成一个链表,让我们看下向某个段中插入数据的过程:</p><p><strong><code>1.当段中存储的页面数量小于 32 的时候, 利用直属于表空间的碎片区进行存储</code></strong></p><ul><li><strong>FREE 链表、FREE_FRAG 链表、FULL_FRAG 链表</strong><ul><li>把状态为 <code>FREE</code> 的碎片区对应的 XDES Entry 通过 List Node 来连接成一个 <code>FREE 链表</code></li><li>把状态为 <code>FREE_FRAG</code> 的碎片区对应的 XDES Entry 结构通过 List Node 来连接成一个 <code>FREE_FRAG 链表</code></li><li>把状态为 <code>FULL_FRAG</code> 的碎片区对应的 XDES Entry 结构通过 List Node 来连接成一个 <code>FULL_FRAG 链表</code></li></ul></li><li><strong>插入数据的流程</strong><ul><li><strong>首先查看表空间中的碎片区中是否有状态为 FREE_FRAG 的区</strong><ul><li>如果有的话, 就从该区中取一些零散的页把数据插进去</li><li>如果没有的话, 就到表空间下申请一个状态为 FREE 的区, 并把该区的状态变为FREE_FRAG, 然后从该新申请的区中取一些零散的页把数据插进去</li></ul></li><li><strong>之后不同的段使用零散页的时候都会从该区中取,直到该区中没有空闲空间,然后该区的状态就变成了 FULL_FRAG</strong></li></ul></li><li><strong>修改区的状态?</strong> <ul><li>比如想找插入数据时(找 FREE_FRAG 状态的区),就直接把 FREE_FRAG 链表的头节点拿出来, 然后<strong>从这个节点中取一些零散的页来插入数据</strong>,当节点的区用完之后,就<strong>修改这个节点的 STATE 字段值为 FULL_FRAG, 然后从FREE_FRAG链表中移到FULL_FRAG链表中</strong></li><li>如果插入数据的时候, 发现 FREE_FRAG 链表中一个节点都没有,就从 FREE 链表中取一个节点移动到 FREE_FRAG链表中, 并修改该节点的 STATE 字段值为 FREE_FRAG, 然后从这个节点对应的区中获取零散的页就好了</li></ul></li></ul><p><strong><code>2.当某个段占用了碎片区中32个页面后, 就申请直属于该段空间的区(FSEG)进行存储</code></strong></p><ul><li><p><strong>FREE 链表、NOT FULL 链表、FULL 链表</strong></p><ul><li><p>段中页包含空闲的区、未使用的区、占满的区, 所以在插入数据的时候需要确定哪些区是空闲的, 哪些是未使用的,哪些是用完的,所以 <strong>InnoDB 为段中 FSEG 类型的区根据区的空间利用率建立了三种链表</strong></p><ul><li><code>FREE链表</code><ul><li>同一个段中, <code>所有页面都是空闲的区</code>对应的 XDES Entry 结构会被加入到这个链表</li><li><mark>注意和直属于表空间的 FREE 链表区别开, <strong>此处的FREE链表是附属于某个段的</strong></mark></li></ul></li><li><code>NOT_FULL链表</code><ul><li>同一个段中, <code>仍有空闲空间的区</code>对应的 XDES Entry 结构会被加入到这个链表</li></ul></li><li><code>FULL链表</code><ul><li>同一个段中, <code>已经没有空闲空间的区</code>对应的 XDES Entry 结构会被加入到这个链表</li></ul></li></ul></li><li><p><strong>每一个索引都对应两个段, 每个段都会维护上述的 3 个链表</strong></p></li></ul></li><li><p><strong>怎么确定区属于哪个段呢?</strong></p><ul><li><mark>XDES Entry 中不是有 Segment ID么?利用这个可以确定链表属于哪个段</mark></li></ul></li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>示例</div><div class="admonitionContent_vXIg"><p><strong>表 t 共有两个索引: 一个聚簇索引，一个二级索引 idx_c2</strong></p><div class="language-sql codeBlockContainer_APcc theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-sql codeBlock_qGQc thin-scrollbar"><code class="codeBlockLines_p187"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:normal">-- 定义一张表,有两个索引</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">TABLE</span><span class="token plain"> t </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    c1 </span><span class="token keyword" style="color:rgb(12, 150, 155)">INT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(188, 84, 84)">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">AUTO_INCREMENT</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    c2 </span><span class="token keyword" style="color:rgb(12, 150, 155)">VARCHAR</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">100</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    c3 </span><span class="token keyword" style="color:rgb(12, 150, 155)">VARCHAR</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">100</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">KEY</span><span class="token plain"> idx_c2 </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">c2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token keyword" style="color:rgb(12, 150, 155)">ENGINE</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token keyword" style="color:rgb(12, 150, 155)">InnoDB</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg class="copyButtonIcon_phi_" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_FfTR" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个表共有 4 个段，每个段都会维护上述 3 个链表,总共是 12 个链表, 以及直属于表空间的 3 个链表,整个独立表空间共需要维护 15 个链表</p><p>所以段在数据量比较大时插入数据的话，会先获取<code>NOT_FULL</code>链表的头节点，直接把数据插入这个头节点对应的区中即可，如果该区的空间已经被用完，就把该节点移到<code>FULL</code>链表中。</p></div></div><h4 class="anchor anchorWithStickyNavbar_loeA" id="链表基节点">链表基节点<a class="hash-link" href="#链表基节点" title="标题的直接链接">​</a></h4><blockquote><p>我们了解了,区可以通过不同的链表&quot;连接&quot;起来, 并且可以将区的XDES Entry 挂链表的尾部,也可以从链表开始遍历。那么这个链表在哪呢? 换句话说,链表的头节点、尾节点在哪?</p></blockquote><p>InnoDB 设计了 <code>List Base Node</code> 的结构,也就是<strong>链表的基节点</strong>, 这个结构中包含了<code>链表的节点数、首尾XDES节点的地址(页号和页内偏移)</code>的信息,具体结构图如下:</p><p>​	<img loading="lazy" src="/assets/images/image-20220818222510062-2aabca4bee8ae396877e1850b44de1c3.png" width="1748" height="898" class="img_CujE"></p><br><p><strong>List Base Node结构说明</strong></p><ol><li><code>List Length</code> : 该链表一共有多少节点</li><li><code>First Node Page Number + First Node Offset</code> : 该链表的头节点在表空间中的位置</li><li><code>Last Node Page Number + Last Node Offset</code> : 该链表的尾节点在表空间中的位置</li></ol><mark>一般我们把某个链表对应的 List Base Node 结构放置在表空间中固定的位置</mark><h4 class="anchor anchorWithStickyNavbar_loeA" id="链表小结">链表小结<a class="hash-link" href="#链表小结" title="标题的直接链接">​</a></h4><ol><li><p>表空间是由若干个区组成的,每个区都 <code>对应</code>一个 XDES Entry</p><ul><li><strong>直属于表空间的区对应的 XDES Entry 可以分成 FREE、FREE_FRAG、FULL_FRAG 这 3 个链表</strong></li><li><strong>每个段可以附属若干个区, 每个段中的区对应的 XDES Entry 可以分成FREE、NOT_FULL、FULL 这 3 个链表</strong></li></ul></li><li><p>每个链表都对应一个 List Base Node 的, 这个结构里记录了链表的头、尾节点的位置以及该链表中包含的节点数</p></li></ol><h3 class="anchor anchorWithStickyNavbar_loeA" id="段结构inode-entry">段结构(INODE Entry)<a class="hash-link" href="#段结构inode-entry" title="标题的直接链接">​</a></h3><p>我们知道段是一个逻辑概念, InnoDB 使用 <code>INODE Entry</code> 结构将段这个抽象概念具象化。像每个区都有对应的 XDES Entry 来记录这个区中的属性一样, InnoDB 为<code>每个段</code>都定义了一个 <code>INODE Entry </code>结构来记录一下段中的属性:
<img loading="lazy" alt="image-20220821001254057" src="/assets/images/image-20220821001254057-9fd5a7bf2aed3d6e213d9431875024a2.png" width="1682" height="1120" class="img_CujE"></p><p><strong>INODE Entry 的各个部分含义如下：</strong></p><ol><li><p><code>Segment ID</code></p><ul><li><strong>指 INODE Entry 结构对应的段的编号(ID)</strong></li></ul></li><li><p><code>NOT_FULL_N_USED</code></p><ul><li><strong>在 NOT_FULL 链表中已经使用了多少个页面</strong></li></ul></li><li><p><code>List Base Node</code></p><ul><li><strong>有三个 List Base Node, 分别为段的 FREE链表、NOT_FULL链表、FULL链表的链表<a href="/docs/Mysql/高级特性/InnoDB表空间#%E9%93%BE%E8%A1%A8%E5%9F%BA%E8%8A%82%E7%82%B9">基节点</a></strong></li><li>想查找某个段的某个链表的头节点和尾节点的时候, 就可以直接到这个部分找到对应链表的List Base Node</li></ul></li><li><p><code>Magic Number</code></p><ul><li><strong>魔数, 用来标记这个 INODE Entry 是否已经被初始化(即把各个字段的值都填进去)</strong></li><li>如果这个数字是值的 97937874,表明该INODE Entry已经初始化，否则没有被初始化</li></ul></li><li><p><code>Fragment Array Entry</code></p><ul><li>段是由<strong>完整的区和碎片区中零散的页面</strong>组成的, <strong>每个Fragment Array Entry 都对应着一个零散的页面的</strong></li><li><code>一共有32 个, 每个占用 4 个字节表示一个碎片区零散页面的页号</code></li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_loeA" id="各类型页面">各类型页面<a class="hash-link" href="#各类型页面" title="标题的直接链接">​</a></h3><blockquote><p>我们知道了,通过 XDES Entry 可以将不同类型的区连接起来,也可以使用 INODE Entry 来描述段结构</p><p>那么,每个区的 XDES Entry 存储在哪里? </p><p>直属于表空间的FREE、FREE_FRAG、FULL_FRAG链表的基节点到底存储在表空间的什么地方?</p><p>每个段对应的 INODE Entry 到底存在表空间的什么地方?</p></blockquote><h4 class="anchor anchorWithStickyNavbar_loeA" id="fsp_hdr页">FSP_HDR页<a class="hash-link" href="#fsp_hdr页" title="标题的直接链接">​</a></h4><p>表空间中以 <code>256</code> 个区为一组,其中第一组中的 extend0 的第一个页是 <code>FSP_HDR</code> 页,它存储了<strong>表空间的一些整体属性以及第一个组内 256 个区的对应的 XDES Entry</strong></p><p><strong>下面是 FSP_HDR 类型页面的结构:</strong></p><p><img loading="lazy" alt="image-20220818225433217" src="/assets/images/image-20220818225433217-bd2a08ff4e9dbe9967e3ad60ceadbafc.png" width="1918" height="1188" class="img_CujE"></p><br><p><strong>可以看到,一个完整的 FSP_HDR 页面由下面五个部分组成:</strong></p><ol><li><p><code>File Header</code></p><ul><li><a href="/docs/Mysql/高级特性/InnoDB数据页结构#%E6%96%87%E4%BB%B6%E5%A4%B4file-header">文件头部,这个是页的通用部分</a></li><li>定义了页面的简单描述信息</li></ul></li><li><p><code>File Space Header</code></p><ul><li><strong>表空间头部,定义了表空间的一些整体的<a href="/docs/Mysql/高级特性/InnoDB表空间#file-space-header">描述信息</a></strong></li></ul></li><li><p><code>XDES Entry</code></p><ul><li>区描述信息,存储本组 256 个区对应的<a href="/docs/Mysql/高级特性/InnoDB表空间#xdes-entry-%E8%8A%82%E7%82%B9">属性信息</a></li></ul></li><li><p><code>Empty Space</code></p><ul><li><strong>没有使用空间,用于页结构的填充,没有实际意义</strong></li></ul></li><li><p><code>File Trailer</code></p><ul><li><a href="/docs/Mysql/高级特性/InnoDB数据页结构#%E6%96%87%E4%BB%B6%E5%B0%BEfile-trailer">文件尾部,这个是页的通用部分</a></li></ul></li></ol><h5 class="anchor anchorWithStickyNavbar_loeA" id="file-space-header">File Space Header<a class="hash-link" href="#file-space-header" title="标题的直接链接">​</a></h5><p><strong>File Space Header 中有下面几个主要的属性:</strong></p><ol><li><p><code>List Base Node for FREE | FREE_FRAG | FULL_FRAG List</code></p><ul><li><strong>分别是直属于表空间的 FREE 链表、FREE_FRAG链表、FULL_FRAG链表的基节点</strong></li><li>也就是说这三个链表的基节点在表空间的位置是固定的, 在表空间的第一个页面(FSP_HDR)的File Space Header部分</li></ul></li><li><p><code>FREE Limit</code></p><ul><li>表空间实际上对应着磁盘的一个文件,一开始创建表空间的时候对应的磁盘文件是没有数据的,所以<code>需要对表空间进行初始化</code><ul><li><strong>为表空间中的区建立 XDES Entry 结构</strong></li><li><strong>为每个段建立 INODE Entry 结构</strong></li><li><strong>建立各种链表</strong></li><li>...</li></ul></li><li><strong>InnoDB 将一部分空闲区的 XDES Entry 放在 FREE 链表中,如果后面 FREE 链表中 XDES Entry 对应的区不够用了,再把之前没有加入 FREE 链表的空闲区对应的 XDES Entry 结构加入FREE链表</strong></li><li><code>在该字段表示的页号之前的区都被初始化了, 之后的区尚未被初始化</code></li></ul></li><li><p><code>Next Unused Segment ID</code></p><ul><li><strong>表明当前表空间中最大的段 ID 的下一个 ID</strong></li><li>每个索引对应两个段,那么每次新加一个索引都会&quot;创建&quot;两个段,那么如何保证表空间中<code>段 ID</code> 的唯一呢?如果遍历所有的段那么会耗费相当的时间, 所以InnoDB 在表空间属性中定义了 <em>Next Unused Segment ID</em> 字段</li><li><strong>每次新加一个段的时候,只需要直接使用这个属性值, 然后再自增一下就可以了</strong></li></ul></li><li><p><code>List Base Node for SEG_INODES_FULL | SEG_INODES_FREE List</code></p><ul><li><strong>默认情况下,每个段对应的 INODE Entry 会放在<code>INODE</code>页中</strong>, 但是在表空间段特别多的情况下,一个 INODE 页中放不下 INODE Entry , 这些 INODE 类型的页会组成两种列表<ul><li><code>SEG_INODES_FULL 链表</code> <ul><li>该链表中的 INODE 类型的页面都已经被INODE Entry 结构填充满了，没空闲空间存放额外的INODE Entry了</li></ul></li><li><code>SEG_INODES_FREE 链表</code></li><li>该链表中的 INODE 类型的页面仍有空闲空间来存放 INODE Entry 结构<br></li></ul></li></ul></li></ol><p><strong>FileSpace Header结构表格说明:</strong></p><table><thead><tr><th>属性</th><th>大小(字节)</th><th>描述</th></tr></thead><tbody><tr><td><code>Space ID</code></td><td><strong>4</strong></td><td>表空间的 ID</td></tr><tr><td><code>Not Used</code></td><td><strong>4</strong></td><td>这 4 个字节未被使用，可以忽略</td></tr><tr><td><code>Size</code></td><td><strong>4</strong></td><td><strong>当前表空间拥有的页的数量</strong></td></tr><tr><td><code>Free Limit</code></td><td><strong>4</strong></td><td>没有被初始化的最小页号,大于或等于该页号所在的区的 XDES Entry 都没有被加入 FREE 链表</td></tr><tr><td><code>Space Flags</code></td><td><strong>4</strong></td><td>表空间的一些占用存储空间比较小的属性</td></tr><tr><td><code>FRAG_N_USED</code></td><td><strong>4</strong></td><td><strong>FREE_FRAG 链表中已使用的页面数</strong></td></tr><tr><td><code>List Base Node for FREE List</code></td><td><strong>16</strong></td><td><strong>FREE 链表的基节点</strong></td></tr><tr><td><code>List Base Node for FREE_FRAG List</code></td><td><strong>16</strong></td><td><strong>FREE_FRAG 链表的基节点</strong></td></tr><tr><td><code>List Base Node for FULL_FRAG List</code></td><td><strong>16</strong></td><td><strong>FULL_FRAG 链表的基节点</strong></td></tr><tr><td><code>Next Unused Segment ID</code></td><td><strong>8</strong></td><td><strong>当前表空间中下一个未使用的 Segment ID</strong></td></tr><tr><td><code>List Base Node for SEG_INODES_FULL List</code></td><td><strong>16</strong></td><td><strong>SEG_INODES_FULL 链表的基节点</strong></td></tr><tr><td><code>List Base Node for SEG_INODES_FREE List</code></td><td><strong>16</strong></td><td><strong>SEG_INODES_FREE 链表的基节点</strong></td></tr></tbody></table><p><img loading="lazy" alt="image-20220821001200120" src="/assets/images/image-20220821001200120-0637769e9c4adf61e804b8fe77604263.png" width="892" height="1020" class="img_CujE"></p><h5 class="anchor anchorWithStickyNavbar_loeA" id="xdes-entry">XDES Entry<a class="hash-link" href="#xdes-entry" title="标题的直接链接">​</a></h5><p>紧接着File Space Header部分的就是 <code>XDES Entry</code> 了, 每一组区里面第一个页都会存储 XDES Entry,extent0 中的<code>FSP_HDR</code> 也不例外, 并且<strong>每个区对应的 XDES Entry 的地址是固定的</strong></p><h4 class="anchor anchorWithStickyNavbar_loeA" id="xdes页">XDES页<a class="hash-link" href="#xdes页" title="标题的直接链接">​</a></h4><blockquote><p>每一个 XDES Entry 都会对应一个区,并且可以通过其中的 List Node 中的 <code>Page Number</code> 和 <code>Offset</code> 定位到具体的页中的具体位置,而这些 XDES Entry 信息就存储在 XDES 页中</p></blockquote><ul><li><p>在实际开发中,<strong>表空间中会有大量的区,那随之也会有大量的 XDES Entry 节点,那么一个页肯定无法存储这么多的 XDES Entry,因此 InnoDB 以 256 个区为一组对表空间进行划分</strong>, 然后<strong>每一组的第一个区的第一个页</strong>中存储着当前组中 <code>256</code> 个区的 XDES Entry</p></li><li><p>上面提到的 <code>FSP_HDR页</code> 比较特殊,除了记录了 <strong>XDES Entry</strong> 的信息,还记录了<strong>表空间的属性</strong>, 当然了整个表空间只有这一个这种类型的页, <strong>随后的每一组区的 XDES Entry 都会被存储该分组的第一个页,</strong>也就是<code>XDES 页</code></p></li></ul><p><strong>XDES 页 除了没有 FSP_HDR 页的 FileSpace Header 以外,其他都是一样的:</strong></p><p><img loading="lazy" alt="image-20220821001654411" src="/assets/images/image-20220821001654411-ab7d1643472b413149de5fe611747d60.png" width="1886" height="1162" class="img_CujE"></p><h4 class="anchor anchorWithStickyNavbar_loeA" id="inode页">INODE页<a class="hash-link" href="#inode页" title="标题的直接链接">​</a></h4><blockquote><p>在前面的表空间结构图中说过,第一组的第一个区 (extent0) 的最前面的三个页是固定的(FSP_HDR、IBUF_BITMAP、INODE)。</p><p>每个表在表空间中默认有两个段,而且某些特殊功能还有一些特殊的段,为了便于管理这些段, InnoDB 还设计了 INODE Entry 用于存储段的信息,那这些 INODE Entry 就存储在 INODE 页中</p></blockquote><p><strong>INODE页的结构图:</strong></p><p><img loading="lazy" alt="image-20220912123621963" src="/assets/images/image-20220912123621963-55e08d10de28d63dfb5c9aa7cf52049a.png" width="2024" height="674" class="img_CujE"></p><br><p>从上面的结构图可以看出来, INODE 页有下面几部分组成:</p><table><thead><tr><th>属性</th><th>大小(字节)</th><th>描述</th></tr></thead><tbody><tr><td><code>File Header</code></td><td><strong>38</strong></td><td>页的一些通用信息</td></tr><tr><td><code>List Node for INODE Page List</code></td><td><strong>12</strong></td><td><strong>通用链表节点,存储上一个 INODE 页面和下一个 INODE 页面的指针</strong></td></tr><tr><td><code>INODE Entry</code></td><td><strong>16320</strong></td><td><strong>段描述信息</strong></td></tr><tr><td><code>Empty Space</code></td><td><strong>6</strong></td><td>用于页结构的填充，没啥实际意义</td></tr><tr><td><code>File Trailer</code></td><td><strong>8</strong></td><td>校验页是否完整</td></tr></tbody></table><br><p><strong>下面是几个常见的部分:</strong></p><ol><li><p><code>INODE Entry</code></p><ul><li><a href="/InnoDB表空间#%E6%AE%B5%E7%BB%93%E6%9E%84inode-entry">详细可见</a></li><li>主要包含了<strong>附属于该段的 FREE、FULL、NOT_FULL 链表的基节点以及该段的零散页面的地址(Fragmen Array Entry)</strong></li></ul></li><li><p><code>List Node for INODE Page List</code></p><ul><li>一个 INODE 页最多存储 <code>85</code> 个 INODDE Entry,所以一个 INODE 页不足以存储所有的段对应的 INODE Entry,所以需要额外的 INODE 页面来存储这些结构</li><li>InnoDB 为了管理 INODE 页, 和XDES Entry 类似的,页将这些INODE 页<strong>串联成两个不同的列表</strong><ul><li><code>SEG_INODES_FULL</code> : 该链表中的 INODE 页中已经没有空闲空间来存储额外的 INODE Entry</li><li><code>SEG_INODES_FREE</code> : 该链表中的 INODE 页中还有空闲空间来存储额外的INODE Entry</li></ul></li><li>在 <code>FSP_HDR</code> 的 <a href="/docs/Mysql/高级特性/InnoDB表空间#file-space-header">File Space Header</a>中存储了 <em>SEG_INODES_FULL、SEG_INODES_FREE</em> 的基节点</li></ul></li></ol><div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>创建段</div><div class="admonitionContent_vXIg"><p>每次新创建一个段(比如创建索引)时,都会创建一个INODE Entry与之对应，存储 INODE Entry的大致过程就是这样的:</p><ul><li>先看 <code>SEG_INODES_FREE</code> 链表是否为空<ul><li><strong>如果不为空</strong>,直接从该链表中获取一个节点,也就相当于获取到一个仍有空闲空间的 INODE 页, 然后把该 INODE Entry 存储到该页面中。当该页面中无剩余空间时,就把该页放到 <code>SEG_INODES_FULL 链表</code></li><li><strong>如果为空</strong>, 则从<code>表空间的 FREE_FRAG 链表</code> 中申请一个页面, <code>修改该页面的类型为 INODE</code>, 把该页面<code>放到 SEG_INODES_FREE 链表中</code>, 与此同时把该 INODE Entry 存储到该页面中
:::</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_loeA" id="segment-header">Segment Header<a class="hash-link" href="#segment-header" title="标题的直接链接">​</a></h3><h2 class="anchor anchorWithStickyNavbar_loeA" id="系统表空间">系统表空间<a class="hash-link" href="#系统表空间" title="标题的直接链接">​</a></h2><blockquote><p>我们知道,InnoDB 的表空间除了独立表空间之外,还有很多的表空间,比如<code>系统表空间</code>。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_loeA" id="表空间的结构">表空间的结构<a class="hash-link" href="#表空间的结构" title="标题的直接链接">​</a></h3><p>系统表空间与独立表空间的一个非常明显的不同之处就是在<code>系统表空间开头有许多记录整个系统属性的页面</code>,如图:</p><p><img loading="lazy" alt="image-20220912123648960" src="/assets/images/image-20220912123648960-cef8dac7851aecd17a4ba653caaada97.png" width="2314" height="902" class="img_CujE"></p><br><p>可以看到, <code>系统表空间</code>和独立表空间的前三个页面(页号分别为 <code>0、1、2</code>，类型分别是 <code>FSP_HDR、IBUF_BITMAP、INODE</code> )的类型是一致的,只是页号为 <code>3~7</code> 的页面是系统表空间特有的：</p><table><thead><tr><th>页号</th><th>页面类型</th><th>英文描述</th><th>描述</th></tr></thead><tbody><tr><td><strong>3</strong></td><td><code>SYS</code></td><td><strong>Insert Buffer Header</strong></td><td><strong>存储 Insert Buffer 的头部信息</strong></td></tr><tr><td><strong>4</strong></td><td><code>INDEX</code></td><td><strong>Insert Buffer Root</strong></td><td><strong>存储 Insert Buffer 的根页面</strong></td></tr><tr><td><strong>5</strong></td><td><code>TRX_SYS</code></td><td><strong>Transction System</strong></td><td><strong>事务系统的相关信息</strong></td></tr><tr><td><strong>6</strong></td><td><code>SYS</code></td><td><strong>First Rollback Segment</strong></td><td><strong>第一个回滚段的页面</strong></td></tr><tr><td><strong>7</strong></td><td><code>SYS</code></td><td><strong>Data Dictionary Header</strong></td><td><strong>数据字典头部信息</strong></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_loeA" id="innodb-数据字典">InnoDB 数据字典<a class="hash-link" href="#innodb-数据字典" title="标题的直接链接">​</a></h4><ul><li><p>使用 <code>INSERT</code> 语句向表中插入的那些记录称之为<strong>用户数据</strong>, MySQL 只是作为一个软件来为我们来保管这些数据,提供方便的增删改查接口而已。</p></li><li><p>但是每当我们向一个表中插入一条记录的时候, <strong>MySQL 先要校验一下插入语句对应的表存不存在,插入的列和表中的列是否匹配</strong>。如果语法没有问题的话, 还需要知道<strong>该表的聚簇索引和所有二级索引对应的根页面是哪个表空间的哪个页面</strong>,然后把记录插入对应索引的B+树中</p></li><li><p>所以 MySQL 除了保存着插入的用户数据之外, 还需要保存许多额外的信息,比方说：</p><ul><li><p>某个表属于哪个表空间，表里边有多少列</p></li><li><p>表对应的每一个列的类型是什么</p></li><li><p>该表有多少索引，每个索引对应哪几个字段，该索引对应的根页面在哪个表空间的哪个页面</p></li><li><p>该表有哪些外键，外键对应哪个表的哪些列</p></li><li><p>某个表空间对应文件系统上文件路径是什么</p></li><li><p>...</p></li></ul></li></ul><p>这些数据并不是使用 INSERT 语句插入的用户数据, 实际上是为了更好的管理我们这些用户数据而不得已引入的一些额外数据, 这些数据也称为<code>元数据</code>。InnoDB 存储引擎特意定义了一些列的内部系统表(<code>internal system table</code>)来记录这些这些元数据:</p><table><thead><tr><th>表名</th><th>描述</th></tr></thead><tbody><tr><td><code>SYS_TABLES	</code></td><td><strong>所有的表的信息</strong></td></tr><tr><td><code>SYS_COLUMNS</code></td><td><strong>所有的列的信息</strong></td></tr><tr><td><code>SYS_INDEXES</code></td><td><strong>所有的索引的信息</strong></td></tr><tr><td><code>SYS_FIELDS</code></td><td><strong>所有的索引对应的列的信息</strong></td></tr><tr><td><code>SYS_FOREIGN</code></td><td><strong>所有的外键的信息</strong></td></tr><tr><td><code>SYS_FOREIGN_COLS</code></td><td><strong>所有的外键对应列的信息</strong></td></tr><tr><td><code>SYS_TABLESPACES</code></td><td><strong>所有的表空间信息</strong></td></tr><tr><td><code>SYS_DATAFILES</code></td><td><strong>所有的表空间对应文件系统的文件路径信息</strong></td></tr><tr><td><code>SYS_VIRTUAL</code></td><td><strong>所有的虚拟生成列的信息</strong></td></tr></tbody></table><br><p>这些<strong>系统表也被称为<code>数据字典</code></strong>, 它们都是以 B+Tree 的形式保存在系统表空间的某些页面中,其中<code> SYS_TABLES、SYS_COLUMNS、SYS_INDEXES、SYS_FIELDS</code> 这四个表尤其重要,称之为<code>基本系统表</code>(basic system tables)</p><h2 class="anchor anchorWithStickyNavbar_loeA" id="总结">总结<a class="hash-link" href="#总结" title="标题的直接链接">​</a></h2><p><img loading="lazy" src="/assets/images/表空间-910c34cc5efaac08ef3ef6875c5161a8.png" width="3024" height="1723" class="img_CujE"></p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/MagicalZhu/NoteLib/tree/main/docs/Mysql/高级特性/InnoDB表空间.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_N_05" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_VsjB"><span class="theme-last-updated">最后<!-- -->由 <b>YuLiang Zhu</b> <!-- -->于 <b><time datetime="2022-12-06T01:19:52.000Z">2022年12月6日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Mysql/高级特性/InnoDB数据页结构"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">InnoDB数据页结构</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/性能优化"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">性能优化</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_jeP5 thin-scrollbar theme-doc-toc-desktop"><p class="content_nRws">Contents</p><ul class="table-of-contents table-of-contents__left-border"><li><a href="#基本概念" class="table-of-contents__link toc-highlight">基本概念</a><ul><li><a href="#页面类型" class="table-of-contents__link toc-highlight">页面类型</a></li><li><a href="#页通用部分" class="table-of-contents__link toc-highlight">页通用部分</a></li></ul></li><li><a href="#独立表空间结构" class="table-of-contents__link toc-highlight">独立表空间结构</a><ul><li><a href="#区extent" class="table-of-contents__link toc-highlight">区(Extent)</a></li><li><a href="#段segment" class="table-of-contents__link toc-highlight">段(Segment)</a></li><li><a href="#碎片区fragment" class="table-of-contents__link toc-highlight">碎片区(Fragment)</a></li><li><a href="#区的管理" class="table-of-contents__link toc-highlight">区的管理</a><ul><li><a href="#区的分类" class="table-of-contents__link toc-highlight">区的分类</a></li><li><a href="#xdes-entry-节点" class="table-of-contents__link toc-highlight">XDES Entry 节点</a></li><li><a href="#xdes-entry-链表" class="table-of-contents__link toc-highlight">XDES Entry 链表</a></li><li><a href="#链表基节点" class="table-of-contents__link toc-highlight">链表基节点</a></li><li><a href="#链表小结" class="table-of-contents__link toc-highlight">链表小结</a></li></ul></li><li><a href="#段结构inode-entry" class="table-of-contents__link toc-highlight">段结构(INODE Entry)</a></li><li><a href="#各类型页面" class="table-of-contents__link toc-highlight">各类型页面</a><ul><li><a href="#fsp_hdr页" class="table-of-contents__link toc-highlight">FSP_HDR页</a><ul><li><a href="#file-space-header" class="table-of-contents__link toc-highlight">File Space Header</a></li><li><a href="#xdes-entry" class="table-of-contents__link toc-highlight">XDES Entry</a></li></ul></li><li><a href="#xdes页" class="table-of-contents__link toc-highlight">XDES页</a></li><li><a href="#inode页" class="table-of-contents__link toc-highlight">INODE页</a></li></ul></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">前端链接</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://v3.cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Vue<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://react.docschina.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">React<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="http://ts.xcatliu.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">TypeScript<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://developer.mozilla.org/zh-CN/docs/Web" target="_blank" rel="noopener noreferrer" class="footer__link-item">MDN<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">后端链接</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://spring.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Spring<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docker<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://kubernetes.io/zh/docs/home/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kubernetes<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">JVM<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://juejin.cn" target="_blank" rel="noopener noreferrer" class="footer__link-item">掘金<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.infoq.cn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">InfoQ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">文档构建</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.docusaurus.cn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://typoraio.cn" target="_blank" rel="noopener noreferrer" class="footer__link-item">Typora<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 huakucha. Built With Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.bf86732a.js"></script>
<script src="/assets/js/main.98457ee6.js"></script>
</body>
</html>