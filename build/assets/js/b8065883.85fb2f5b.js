"use strict";(self.webpackChunkhuakucha=self.webpackChunkhuakucha||[]).push([[2226],{87795:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>N,frontMatter:()=>l,metadata:()=>p,toc:()=>m});var n=a(87462),i=(a(67294),a(3905));a(61839);const l={id:"\u7ec4\u4ef6\u6ce8\u518c",title:"\u7ec4\u4ef6\u6ce8\u518c"},r=void 0,p={unversionedId:"Spring/\u6ce8\u89e3\u9a71\u52a8\u5f00\u53d1/\u7ec4\u4ef6\u6ce8\u518c",id:"Spring/\u6ce8\u89e3\u9a71\u52a8\u5f00\u53d1/\u7ec4\u4ef6\u6ce8\u518c",title:"\u7ec4\u4ef6\u6ce8\u518c",description:"@Configuration\u548c@Bean",source:"@site/docs/Spring/\u6ce8\u89e3\u9a71\u52a8\u5f00\u53d1/\u7ec4\u4ef6\u6ce8\u518c\u4e4b\u7b80\u5355\u6ce8\u518c.md",sourceDirName:"Spring/\u6ce8\u89e3\u9a71\u52a8\u5f00\u53d1",slug:"/Spring/\u6ce8\u89e3\u9a71\u52a8\u5f00\u53d1/\u7ec4\u4ef6\u6ce8\u518c",permalink:"/docs/Spring/\u6ce8\u89e3\u9a71\u52a8\u5f00\u53d1/\u7ec4\u4ef6\u6ce8\u518c",draft:!1,editUrl:"https://github.com/MagicalZhu/NoteLib/tree/main/docs/Spring/\u6ce8\u89e3\u9a71\u52a8\u5f00\u53d1/\u7ec4\u4ef6\u6ce8\u518c\u4e4b\u7b80\u5355\u6ce8\u518c.md",tags:[],version:"current",lastUpdatedBy:"YuLiang Zhu",lastUpdatedAt:1670289592,formattedLastUpdatedAt:"2022\u5e7412\u67086\u65e5",frontMatter:{id:"\u7ec4\u4ef6\u6ce8\u518c",title:"\u7ec4\u4ef6\u6ce8\u518c"},sidebar:"springSideBar",previous:{title:"Spring\u6ce8\u89e3",permalink:"/docs/category/spring\u6ce8\u89e3"},next:{title:"Spring\u8fdb\u9636",permalink:"/docs/category/spring\u8fdb\u9636"}},o={},m=[{value:"@Configuration\u548c@Bean",id:"configuration\u548cbean",level:2},{value:"@ComponentScan(\u5305\u626b\u63cf\u6ce8\u518c)",id:"componentscan\u5305\u626b\u63cf\u6ce8\u518c",level:2},{value:"@Filter\u6ce8\u89e3\u8be6\u89e3",id:"filter\u6ce8\u89e3\u8be6\u89e3",level:3},{value:"@Lazy",id:"lazy",level:3},{value:"@Conditional(\u6309\u6761\u4ef6\u6ce8\u518c)",id:"conditional\u6309\u6761\u4ef6\u6ce8\u518c",level:2},{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:3},{value:"\u4ee3\u7801\u5b9e\u73b0",id:"\u4ee3\u7801\u5b9e\u73b0",level:3},{value:"@Import",id:"import",level:2},{value:"\u5176\u4ed6\u9488\u5bf9Bean\u5bf9\u8c61\u7684\u6ce8\u89e3",id:"\u5176\u4ed6\u9488\u5bf9bean\u5bf9\u8c61\u7684\u6ce8\u89e3",level:2},{value:"@Scope",id:"scope",level:3}],k={toc:m};function N(e){let{components:t,...l}=e;return(0,i.kt)("wrapper",(0,n.Z)({},k,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"configuration\u548cbean"},"@Configuration\u548c@Bean"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u6807\u6ce8\u5728\u7c7b\u4e0a")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u4f5c\u7528 : \u53ef\u4ee5",(0,i.kt)("inlineCode",{parentName:"strong"},"\u5411IOC \u5bb9\u5668\u4e2d\u6ce8\u518c\u7ec4\u4ef6 ( \u4ee3\u66ff\u4e4b\u524d\u7684\u914d\u7f6e\u6587\u4ef6 "),")")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u6ce8\u89e3\u7684\u542b\u4e49?"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@Configuration"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u6807\u6ce8\u5728\u914d\u7f6e\u7c7b\u4e0a, \u8868\u660e\u8fd9\u662f\u4e00\u4e2a\u914d\u7f6e\u7c7b")),(0,i.kt)("li",{parentName:"ul"},"\u7b49\u540c\u4e8e\u4e4b\u524dSpring\u7684\u914d\u7f6e\u6587\u4ef6"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@Bean"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u6807\u6ce8\u5728\u83b7\u53d6Bean \u5bf9\u8c61\u7684\u65b9\u6cd5\u4e0a , \u7528\u4e8e\u7ed9\u5bb9\u5668\u6ce8\u518c\u4e00\u4e2aBean")),(0,i.kt)("li",{parentName:"ul"},"\u7b49\u540c\u4e8eSpring \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},'<bean id="xxx" class="xxxx"> </bean>'),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"\u8fd4\u56de\u503c\u7c7b\u578b")," : \u5c31\u662fbean \u7684\u7c7b\u578bclass"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"\u65b9\u6cd5\u540d")," : \u5c31\u662fbean \u7684\u552f\u4e00\u6807\u8bc6id")))))))),(0,i.kt)("admonition",{title:"\u6ce8\u89e3\u4f7f\u7528\u6b65\u9aa4?",type:"info"},(0,i.kt)("ol",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"\u5b9a\u4e49\u4e00\u4e2a\u914d\u7f6e\u7c7b , \u5e76\u4e14\u4f7f\u7528 @Configuration \u6ce8\u89e3\u5728\u8be5\u7c7b\u4e0a\u8fdb\u884c\u6807\u6ce8"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"\u5b9a\u4e49\u4e00\u4e2a\u83b7\u53d6Bean\u5bf9\u8c61\u7684\u65b9\u6cd5,\u5e76\u4e14\u4f7f\u7528 @Bean \u5bf9\u8be5\u65b9\u6cd5\u8fdb\u884c\u6807\u6ce8"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"\u4f7f\u7528AnnotationConfigApplicationContext \u6307\u5b9a\u914d\u7f6e\u7c7b\u7684\u4f4d\u7f6e,\u5e76\u83b7\u53d6bean\u5bf9\u8c61")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u901a\u8fc7 ",(0,i.kt)("inlineCode",{parentName:"li"},"annotationConfigApplicationContext.getBeanDefinitionNames()")," \u83b7\u53d6IOC\u5bb9\u5668\u4e2d\u6240\u6709\u6ce8\u518c\u7684bean")))),(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("img",{src:a(40817).Z,width:"1258",height:"700"}))),(0,i.kt)("h2",{id:"componentscan\u5305\u626b\u63cf\u6ce8\u518c"},"@ComponentScan(\u5305\u626b\u63cf\u6ce8\u518c)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"\u6807\u6ce8\u5728\u914d\u7f6e\u7c7b\u4e0a\u9762"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"\u4f5c\u7528: \u901a\u8fc7\u5305\u626b\u63cf\u7684\u65b9\u5f0f\u5411 IOC\u4e2d\u6ce8\u5165Bean")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u76f8\u5f53\u4e8e\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"<context:component-scan>"),", \u4ee5\u53ca\u5305\u542b\u6392\u9664bean \u7684 \u5b50\u8282\u70b9"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"\u6ce8\u89e3\u7684\u5c5e\u6027?")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"value")," :   \u6307\u5b9a\u8981\u626b\u63cf\u7684\u5305")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"excludeFilters"),"  : \u626b\u63cf\u65f6 \u6307\u5b9a\u9700\u8981\u6392\u9664\u7684bean")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u662f\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"@Filter \u6ce8\u89e3\u7684\u6570\u7ec4")," , \u5305\u542b\u4ee5\u4e0b\u5c5e\u6027"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"type")," : \u6309\u4ec0\u4e48\u65b9\u5f0f\u8fdb\u884c\u6392\u9664,",(0,i.kt)("strong",{parentName:"li"},"\u9ed8\u8ba4\u662f Annotation")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"classes")," : \u54ea\u4e9b\u7c7b\u578b\u7684\u9700\u8981\u6392\u9664 (\u6bd4\u5982\u53ef\u4ee5\u6307\u5b9a\u4e0d\u626b\u63cf\u5e26\u6709 @Controller\u6ce8\u89e3\u7684\u7c7b)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"includeFilters"),"    : \u9700\u8981\u626b\u63cf\u7684\u5305")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"useDefaultFilters"),"  : \u662f\u5426\u4f7f\u7528\u9ed8\u8ba4\u8fc7\u6ee4,\u4f7f\u7528@includeFilters \u65f6\u5fc5\u987b\u4f7f\u7528\u8fd9\u4e2a\u6ce8\u89e3"))))),(0,i.kt)("admonition",{title:"\u4f7f\u7528\u6b65\u9aa4",type:"info"},(0,i.kt)("ol",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ol"},"\u5728\u914d\u7f6e\u7c7b\u4e0a \u6807\u6ce8\u4e0a @ComponentScan \u6ce8\u89e3 , \u901a\u8fc7 value \u5c5e\u6027\u6307\u5b9a\u8981\u626b\u63cf\u7684\u5305"),(0,i.kt)("li",{parentName:"ol"},"\u53ef\u4ee5\u901a\u8fc7 excludeFilters /  includeFilters  \u5c5e\u6027\u6307\u5b9a\u626b\u63cf\u89c4\u5219")),(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("img",{src:a(91731).Z,width:"1409",height:"988"}))),(0,i.kt)("h3",{id:"filter\u6ce8\u89e3\u8be6\u89e3"},"@Filter\u6ce8\u89e3\u8be6\u89e3"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"\u4f5c\u7528 : @Filter \u6ce8\u89e3 \u53ef\u4ee5\u5728\u5305\u626b\u63cf\u65f6, \u6307\u5b9a\u626b\u63cf\u89c4\u5219"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"@Filter\u7684type\u5c5e\u6027")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"FilterType.Annotation"),"  :  \u6309\u7167\u6ce8\u89e3\u8fc7\u6ee4"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"FilterType.Assignable_Type")," : \u6309\u7167\u6307\u5b9a\u7684\u7c7b\u8fc7\u6ee4"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"FilterType.Custom"),"       : \u6309\u7167\u81ea\u5b9a\u4e49\u89c4\u5219"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"FilterType.Regex")," : \u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u8fc7\u6ee4"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"FilterType.AspectJ"),"    : \u4f7f\u7528AspectJ\u8868\u8fbe\u5f0f\u8fc7\u6ee4"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"\u5982\u4f55\u81ea\u5b9a\u4e49\u8fc7\u6ee4\u89c4\u5219?")),(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"\u5b9e\u73b0 TypeFilter\u63a5\u53e3"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u91cd\u5199 ",(0,i.kt)("inlineCode",{parentName:"p"},"match(MetadataReader metadataReader, MetadataReaderFactory metadataReaderFactory)"),"\u65b9\u6cd5"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"metadataReader"),"  : \u5f53\u524d\u626b\u63cf\u5230\u7684\u7c7b\u7684\u4fe1\u606f"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"metadataReader.getAnnotationMetadata()")," : \u83b7\u53d6\u5f53\u524d\u7c7b\u7684\u6ce8\u89e3\u4fe1\u606f")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"metadataReader.getClassMetadata()"),"      : \u83b7\u53d6\u5f53\u524d\u7c7b\u7684\u7c7b\u4fe1\u606f")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"metadataReader.getResource()"),": \u83b7\u53d6\u5f53\u524d\u7c7b\u7684\u8d44\u6e90\u4fe1\u606f")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"metadataReaderFactory"),"  : \u53ef\u4ee5\u83b7\u53d6\u5176\u4ed6\u4efb\u4f55\u7c7b\u7684\u4fe1\u606f")))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"\u5728@Filter \u6ce8\u89e3\u4e2d\u4f7f\u7528")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"type \u5c31\u662f  FilterType.Custom "),(0,i.kt)("li",{parentName:"ul"},"classes \u5c31\u662f\u81ea\u5b9a\u4e49\u89c4\u5219\u7c7b")))))),(0,i.kt)("admonition",{title:"\u4ee3\u7801\u5b9e\u73b0",type:"info"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"1.\u81ea\u5b9a\u4e49TypeFilter\u5b9e\u73b0\u7c7b")),(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("img",{src:a(60352).Z,width:"1400",height:"532"})),(0,i.kt)("br",null),(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"2. \u81ea\u5b9a\u4e49TypeFilter\u5b9e\u73b0\u7c7b"),"\n",(0,i.kt)("img",{src:a(62060).Z,width:"942",height:"290"}))),(0,i.kt)("h3",{id:"lazy"},"@Lazy"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u6807\u6ce8\u5728 \u83b7\u53d6Bean \u5bf9\u8c61\u7684\u65b9\u6cd5\u4e0a\u9762")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u4f5c\u7528 : \u9488\u5bf9@Scope \u4f5c\u7528\u57df\u662f singleton \u7684\u5355\u5b9e\u4f8bbean , \u53ef\u4ee5\u5728\u5bb9\u5668\u521d\u59cb\u5316\u65f6\u4e0d\u521b\u5efa\u5bf9\u8c61,\u800c\u662f\u5728\u7b2c\u4e00\u6b21\u83b7\u53d6\u8fd9\u4e2abean \u7684\u65f6\u5019\u518d\u53bb\u521b\u5efa"))),(0,i.kt)("p",null,(0,i.kt)("img",{src:a(89447).Z,width:"558",height:"240"})),(0,i.kt)("h2",{id:"conditional\u6309\u6761\u4ef6\u6ce8\u518c"},"@Conditional(\u6309\u6761\u4ef6\u6ce8\u518c)"),(0,i.kt)("h3",{id:"\u6982\u8ff0"},"\u6982\u8ff0"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u6807\u6ce8\u5728",(0,i.kt)("inlineCode",{parentName:"p"},"\u7c7b"),"\u6216\u8005",(0,i.kt)("inlineCode",{parentName:"p"},"\u65b9\u6cd5"),"\u4e0a\u9762 ( ",(0,i.kt)("strong",{parentName:"p"},"\u6807\u6ce8\u5728\u7c7b\u4e0a\u53ef\u4ee5\u7edf\u4e00\u5224\u65ad"),")")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"\u4f5c\u7528: \u6309\u7167\u4e00\u5b9a\u7684\u6761\u4ef6\u5224\u65ad\u540e, \u5c06\u6ee1\u8db3\u6761\u4ef6\u7684bean \u6ce8\u518c\u5230 IOC\u5bb9\u5668\u4e2d"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"\u76f8\u5173\u5c5e\u6027")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"value"),"\t: \u6307\u5b9a\u6761\u4ef6\u5224\u65ad\u7c7b")))),(0,i.kt)("admonition",{title:"\u4f7f\u7528\u6b65\u9aa4",type:"info"},(0,i.kt)("ol",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u5b9a\u4e49\u6761\u4ef6\u5224\u65ad\u7c7b,\u5e76\u4e14\u5b9e\u73b0Condition\u63a5\u53e3")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u91cd\u5199 ",(0,i.kt)("inlineCode",{parentName:"p"},"matches(ConditionContext conditionContext, AnnotatedTypeMetadata annotatedTypeMetadata)")," \u65b9\u6cd5"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"conditionContext")," : \u5224\u65ad\u6761\u4ef6\u53ef\u4ee5\u4f7f\u7528\u7684\u4e0a\u4e0b\u6587,\u5305\u62ec\u7cfb\u7edf\u73af\u5883\u3001\u7c7b\u52a0\u8f7d\u5668\u7b49 ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"conditionContext.getBeanFactory() : \u83b7\u53d6IOC\u4f7f\u7528\u7684BeanFactory"),(0,i.kt)("li",{parentName:"ul"},"conditionContext.getClassLoader()\t: \u83b7\u53d6\u7c7b\u52a0\u8f7d\u5668"),(0,i.kt)("li",{parentName:"ul"},"conditionContext.getEnvironment()\t: \u83b7\u53d6\u7cfb\u7edf\u73af\u5883(\u5305\u62ecJVM\u7684\u4fe1\u606f)"),(0,i.kt)("li",{parentName:"ul"},"context.getRegistry()             :  \u83b7\u53d6Bean\u5b9a\u4e49\u7684\u6ce8\u518c\u7c7b"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"annotatedTypeMetadata")," \t:  \u6ce8\u89e3\u4fe1\u606f"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u5728\u7c7b\u6216\u8005\u65b9\u6cd5\u4e0a\u6807\u6ce8@Conditional \u6ce8\u89e3,\u540c\u65f6\u6307\u5b9a\u7b2c\u4e00\u6b65\u7684\u6761\u4ef6\u5224\u65ad\u7c7b")))),(0,i.kt)("h3",{id:"\u4ee3\u7801\u5b9e\u73b0"},"\u4ee3\u7801\u5b9e\u73b0"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"1. \u5b9a\u4e49\u6761\u4ef6\u5224\u65ad\u7c7b")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"\u5b9e\u73b0Condition\u63a5\u53e3,\u5b9e\u73b0 matches() \u65b9\u6cd5"),", \u8fd4\u56de true \u7684\u4f1a\u88ab\u626b\u63cf\u6ce8\u518c\u8fdbIOC\u5bb9\u5668\u4e2d")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'/**\n * \u81ea\u5b9a\u4e49\u6761\u4ef6\u5224\u65ad\u7c7b\n *  - \u5b9e\u73b0Condition\u63a5\u53e3\u4e2d\u7684 matches\u65b9\u6cd5\n *  - ConditionContext : \u5224\u65ad\u6761\u4ef6\u53ef\u4ee5\u4f7f\u7528\u7684\u73af\u5883\n *      -> conditionContext.getBeanFactory()    : \u83b7\u53d6IOC\u4f7f\u7528\u7684BeanFactory\n *      -> conditionContext.getClassLoader()    : \u83b7\u53d6\u7c7b\u52a0\u8f7d\u5668\n *      -> conditionContext.getEnvironment()    : \u83b7\u53d6\u7cfb\u7edf\u73af\u5883(\u5305\u62ecJVM\u7684\u4fe1\u606f)\n *      -> context.getRegistry()                : \u83b7\u53d6Bean\u5b9a\u4e49\u7684\u6ce8\u518c\u7c7b\n *  - AnnotatedTypeMetadata : \u6ce8\u89e3\u4fe1\u606f\n */\npublic class MyCondition implements Condition \n{\n    @Override\n    public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata)\n    {\n        // \u83b7\u53d6IOC\u4f7f\u7528\u7684BeanFactory\n        ConfigurableListableBeanFactory beanFactory = context.getBeanFactory();\n        // \u83b7\u53d6\u7c7b\u52a0\u8f7d\u5668\n        ClassLoader classLoader = context.getClassLoader();\n        // \u83b7\u53d6\u7cfb\u7edf\u73af\u5883(\u5305\u62ecJVM\u7684\u4fe1\u606f)\n        Environment environment =  context.getEnvironment();\n\n        // \u83b7\u53d6Bean\u5b9a\u4e49\u7684\u6ce8\u518c\u7c7b\n        BeanDefinitionRegistry registry = context.getRegistry();\n        Arrays.stream(registry.getBeanDefinitionNames()).forEach(System.out::println);\n        System.out.println("------");\n        // \u83b7\u53d6\u6ce8\u89e3\u4fe1\u606f\n        if (metadata instanceof ClassMetadata) {\n            ClassMetadata classMetadata = (ClassMetadata) metadata;\n            System.out.println("className--\x3e"+classMetadata.getClassName());\n        }\n        if(metadata instanceof MethodMetadata){\n            MethodMetadata methodMetadata = (MethodMetadata) metadata;\n            System.out.println("methodName--\x3e"+methodMetadata.getMethodName());\n        }\n        return true;\n    }\n}\n')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"2. \u4f7f\u7528@Conditional\u6ce8\u89e3")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},' @Conditional({MyCondition.class})\n @Bean(value = "person2")\n public Person person2()\n {\n     System.out.println("Create person2...");\n     return new Person("person2",25);\n }\n')),(0,i.kt)("h2",{id:"import"},"@Import"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u901a\u8fc7@Import \u5feb\u901f\u7684\u7ed9\u5bb9\u5668\u4e2d\u6ce8\u518c\u4e00\u4e2a\u7ec4\u4ef6")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"@Import( {\u8981\u5bfc\u5165\u7684\u7ec4\u4ef6} ), \u5bb9\u5668\u4f1a\u81ea\u52a8\u6ce8\u518c\u8fd9\u4e2a\u7ec4\u4ef6,id\u9ed8\u8ba4\u662f\u5168\u7c7b\u540d")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u81ea\u5b9a\u4e49\u5bfc\u5165\u9009\u62e9\u5668,\u5b9e\u73b0ImportSelector\u63a5\u53e3 , \u8fd4\u56de\u9700\u8981\u6ce8\u518c\u7684\u7ec4\u4ef6\u7684\u5168\u7c7b\u540d\u6570\u7ec4")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u81ea\u5b9a\u4e49\u6ce8\u518c\u7c7b , \u5b9e\u73b0ImportBeanDefinitionRegistrar\u63a5\u53e3 , \u76f4\u63a5\u5411 IOC\u4e2d\u6ce8\u518c\u7ec4\u4ef6"))),(0,i.kt)("h2",{id:"\u5176\u4ed6\u9488\u5bf9bean\u5bf9\u8c61\u7684\u6ce8\u89e3"},"\u5176\u4ed6\u9488\u5bf9Bean\u5bf9\u8c61\u7684\u6ce8\u89e3"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"@Scope")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"@Lazy"))),(0,i.kt)("h3",{id:"scope"},"@Scope"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"\u6807\u6ce8\u5728 \u83b7\u53d6Bean \u5bf9\u8c61\u7684\u65b9\u6cd5\u4e0a\u9762"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"\u4f5c\u7528 : \u6307\u5b9a\u7ec4\u4ef6\u7684\u4f5c\u7528\u57df ( \u9ed8\u8ba4IOC\u5bb9\u5668\u4e2d\u7684\u7ec4\u4ef6\u90fd\u662f\u5355\u4f8b\u7684! )")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u76f8\u5f53\u4e8e ",(0,i.kt)("inlineCode",{parentName:"li"},"<bean>")," \u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"scope")," \u5c5e\u6027"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u901a\u8fc7 @Scope \u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"value")," \u5c5e\u6027",(0,i.kt)("strong",{parentName:"p"},"\u6307\u5b9a\u4f5c\u7528\u57df"),"\u6709\u4e24\u4e2a\u53ef\u9009\u503c"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"singleton    "),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u5355\u4f8b\u7684 , \u9ed8\u8ba4\u503c "),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u521d\u59cb\u5316IOC\u5bb9\u5668\u65f6 , \u5c31\u4f1a\u521b\u5efabean \u7684\u5b9e\u4f8b")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"prototype"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u539f\u578b\u7684 ( \u591a\u5b9e\u4f8b\u7684! )"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u6bcf\u6b21\u4eceIOC\u5bb9\u5668\u4e2d\u83b7\u53d6bean\u5bf9\u8c61\u65f6 , \u90fd\u4f1a\u521b\u5efabean\u7684\u5b9e\u4f8b")))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u65b9\u5f0f?")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u5728\u83b7\u53d6Bean\u5bf9\u8c61\u7684\u65b9\u6cd5\u4e0a\u9762\u8fdb\u884c\u6807\u6ce8 @Scope \u6ce8\u89e3")))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u4ee3\u7801\u793a\u4f8b:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'/**\n  @Scope \u6ce8\u89e3\u7684\u4f7f\u7528\n*/\n@Configuration\npublic class MyConfig2 {\n\n    //@Scope(value = "prototype")  \n    //prototype : \u539f\u578b\u7684,\u6bcf\u6b21\u4eceIOC\u5bb9\u5668\u4e2d\u83b7\u53d6bean\u5bf9\u8c61\u65f6,\u90fd\u4f1a\u521b\u5efabean\u7684\u5b9e\u4f8b\n    //singleton  : \u5355\u4f8b\u7684,\u521d\u59cb\u5316IOC\u5bb9\u5668\u65f6,\u5c31\u4f1a\u521b\u5efabean\u7684\u5b9e\u4f8b,\u7136\u540e\u4f7f\u7528\n    @Scope(value = "singleton")   \n    @Bean(value = "person")\n    public Person person(){\n        return new Person("Lucy",25);\n    }\n}\n')))}N.isMDXComponent=!0},91731:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/@ComponentScan-3ebeed41bfe1d9902f1a1ef8199a539d.png"},40817:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/@Configuration\u548c@Bean-8512449a5180e8b8e94088b2b3b823ba.png"},62060:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/@Filter\u4f7f\u7528\u81ea\u5b9a\u4e49\u89c4\u5219\u7c7b-269795bf2397e689f227f4c09e388585.png"},60352:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/@Filter\u81ea\u5b9a\u4e49\u89c4\u5219\u7c7b-3d5b28b65a6edd1aa23dd0e2cf219e1d.png"},89447:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/@Lazy-40f199d81a5179cb64375a44d2a85308.png"}}]);