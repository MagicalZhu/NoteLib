"use strict";(self.webpackChunkhuakucha=self.webpackChunkhuakucha||[]).push([[605],{90623:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>g,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var t=a(87462),r=(a(67294),a(3905));a(61839);const i={id:"IOC\u5bb9\u5668",title:"IOC\u5bb9\u5668"},l=void 0,o={unversionedId:"Spring/Spring5/IOC\u5bb9\u5668",id:"Spring/Spring5/IOC\u5bb9\u5668",title:"IOC\u5bb9\u5668",description:"\u57fa\u7840",source:"@site/docs/Spring/Spring5/1.IOC.md",sourceDirName:"Spring/Spring5",slug:"/Spring/Spring5/IOC\u5bb9\u5668",permalink:"/docs/Spring/Spring5/IOC\u5bb9\u5668",draft:!1,editUrl:"https://github.com/MagicalZhu/NoteLib/tree/main/docs/Spring/Spring5/1.IOC.md",tags:[],version:"current",lastUpdatedBy:"YuLiang Zhu",lastUpdatedAt:1670289592,formattedLastUpdatedAt:"2022\u5e7412\u67086\u65e5",sidebarPosition:1,frontMatter:{id:"IOC\u5bb9\u5668",title:"IOC\u5bb9\u5668"},sidebar:"springSideBar",previous:{title:"Spring5",permalink:"/docs/category/spring5"},next:{title:"Spring\u6ce8\u89e3",permalink:"/docs/category/spring\u6ce8\u89e3"}},s={},p=[{value:"\u57fa\u7840",id:"\u57fa\u7840",level:2},{value:"Spring\u7684\u4f7f\u7528",id:"spring\u7684\u4f7f\u7528",level:2},{value:"IOC \u6216 DI",id:"ioc-\u6216-di",level:2},{value:"IOC \u7c7b\u578b",id:"ioc-\u7c7b\u578b",level:3},{value:"\u4f9d\u8d56\u62c9\u53d6",id:"\u4f9d\u8d56\u62c9\u53d6",level:4},{value:"\u4e0a\u4e0b\u6587\u4f9d\u8d56\u67e5\u627e",id:"\u4e0a\u4e0b\u6587\u4f9d\u8d56\u67e5\u627e",level:4},{value:"\u6784\u9020\u51fd\u6570\u6ce8\u5165",id:"\u6784\u9020\u51fd\u6570\u6ce8\u5165",level:4},{value:"Setter \u6ce8\u5165",id:"setter-\u6ce8\u5165",level:4},{value:"Spring \u7684\u4f9d\u8d56\u6ce8\u5165",id:"spring-\u7684\u4f9d\u8d56\u6ce8\u5165",level:2},{value:"BeanFactory",id:"beanfactory",level:3},{value:"BeanFactory \u5b9e\u73b0",id:"beanfactory-\u5b9e\u73b0",level:4},{value:"ApplicationContext",id:"applicationcontext",level:3},{value:"\u57fa\u672c\u914d\u7f6e",id:"\u57fa\u672c\u914d\u7f6e",level:4},{value:"Setter \u6ce8\u5165",id:"setter-\u6ce8\u5165-1",level:4},{value:"\u914d\u7f6e\u6587\u4ef6",id:"\u914d\u7f6e\u6587\u4ef6",level:5},{value:"\u914d\u7f6e\u6587\u4ef6+\u6ce8\u89e3",id:"\u914d\u7f6e\u6587\u4ef6\u6ce8\u89e3",level:5},{value:"\u6ce8\u89e3",id:"\u6ce8\u89e3",level:5},{value:"\u6784\u9020\u51fd\u6570\u6ce8\u5165",id:"\u6784\u9020\u51fd\u6570\u6ce8\u5165-1",level:4},{value:"\u914d\u7f6e\u6587\u4ef6",id:"\u914d\u7f6e\u6587\u4ef6-1",level:5}],m={toc:p};function g(e){let{components:n,...i}=e;return(0,r.kt)("wrapper",(0,t.Z)({},m,i,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"\u57fa\u7840"},"\u57fa\u7840"),(0,r.kt)("p",null,"Spring\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684JEE\u5f00\u6e90IOC(DI)\u548cAOP\u5bb9\u5668\u6846\u67b6,Spring\u7684\u4f18\u826f\u7279\u6027\u5305\u62ec:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"\u975e\u4fb5\u5165\u5f0f (\u8f7b\u91cf\u7ea7)"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u57fa\u4e8eSpring\u5f00\u53d1\u7684\u5e94\u7528\u4e2d\u7684\u5bf9\u8c61\u53ef\u4ee5\u4e0d\u4f9d\u8d56\u4e8eSpring\u7684API"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"\u4f9d\u8d56\u6ce8\u5165"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Dependency Injection(DI)\uff0c\u53cd\u8f6c\u63a7\u5236(IOC)\u6700\u7ecf\u5178\u7684\u5b9e\u73b0"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"\u9762\u5411\u5207\u9762\u7f16\u7a0b"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Aspect Oriented Programming(AOP)"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"\u5bb9\u5668"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Spring\u662f\u4e00\u4e2a\u5bb9\u5668\uff0c\u56e0\u4e3a\u5b83\u5305\u542b\u5e76\u4e14\u7ba1\u7406\u5e94\u7528\u5bf9\u8c61\u7684\u751f\u547d\u5468\u671f"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"\u7ec4\u4ef6\u5316")," ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Spring\u5b9e\u73b0\u4e86\u4f7f\u7528\u7b80\u5355\u7684\u7ec4\u4ef6\u914d\u7f6e\u7ec4\u5408\u6210\u4e00\u4e2a\u590d\u6742\u7684\u5e94\u7528"),(0,r.kt)("li",{parentName:"ul"},"\u5728 Spring \u4e2d\u53ef\u4ee5\u4f7f\u7528XML\u548cJava\u6ce8\u89e3\u7ec4\u5408\u8fd9\u4e9b\u5bf9\u8c61\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"\u4e00\u7ad9\u5f0f"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5728IOC\u548cAOP\u7684\u57fa\u7840\u4e0a\u53ef\u4ee5\u6574\u5408\u5404\u79cd\u4f01\u4e1a\u5e94\u7528\u7684\u5f00\u6e90\u6846\u67b6\u548c\u4f18\u79c0\u7684\u7b2c\u4e09\u65b9\u7c7b\u5e93"),(0,r.kt)("li",{parentName:"ul"},"\u5b9e\u9645\u4e0aSpring \u81ea\u8eab\u4e5f\u63d0\u4f9b\u4e86\u8868\u8ff0\u5c42\u7684SpringMVC\u548c\u6301\u4e45\u5c42\u7684Spring JDBC")))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20221030223638592",src:a(14658).Z,width:"1212",height:"1062"})),(0,r.kt)("h2",{id:"spring\u7684\u4f7f\u7528"},"Spring\u7684\u4f7f\u7528"),(0,r.kt)("p",null,"\u4ece\u4e00\u4e2a\u7b80\u5355\u7684 Spring \u5e94\u7528\u7a0b\u5e8f\u8bf4\u8d77,\u9700\u8981\u7531\u4e0b\u9762\u7684\u6b65\u9aa4"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5f15\u5165 Spring \u76f8\u5173\u7684\u4f9d\u8d56"),(0,r.kt)("li",{parentName:"ol"},"\u5b9a\u4e49\u4e00\u4e2a Bean \u5bf9\u8c61"),(0,r.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e00\u4e2a Spring \u7684\u5bb9\u5668\u914d\u7f6e\u6587\u4ef6"),(0,r.kt)("li",{parentName:"ol"},"\u5728\u5bb9\u5668\u4e2d\u8bbe\u7f6e Bean \u5bf9\u8c61\u7684 instance",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u521b\u5efa\u5bb9\u5668\u5bf9\u8c61 ","[\u652f\u6301\u6ce8\u89e3\u3001\u914d\u7f6e\u6587\u4ef6\u7b49\u591a\u79cd\u65b9\u5f0f]"," "),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ApplicationContext context=new ClassPathXmlApplicationContext(String fileName)")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u4ece\u5bb9\u5668\u4e2d\u83b7\u53d6 Bean \u5bf9\u8c61\u7684 instance"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"context.getBean(...)"))))))),(0,r.kt)("admonition",{title:"\u57fa\u672c\u7684\u793a\u4f8b",type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"1. \u5728 classpath \u4e0b\u5b9a\u4e49Spring \u5bb9\u5668\u7684\u914d\u7f6e\u6587\u4ef6, \u5e76\u4e14\u5411\u5bb9\u5668\u4e2d\u52a0\u5165 Bean \u7684 instance")),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">\n    \x3c!-- \u5728\u5bb9\u5668\u4e2d\u8bbe\u7f6e Bean \u5bf9\u8c61\u7684 instance --\x3e\n    <bean id="person" class="Demo1.Person" name="huakucha">\n        <property name="address" value="CZ"/>\n        <property name="name" value="huakucha"/>\n        <property name="age" value="1"/>\n    </bean>\n</beans>\n')),(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"2.\u83b7\u53d6Spring\u7684\u5bb9\u5668\u5bf9\u8c61,\u4ee5\u53ca\u5bb9\u5668\u4e2d\u7684 Bean \u7684 instance")),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class Hello {\n    public static void main(String[] args) {\n        // \u521b\u5efa\u4e00\u4e2a SpringIOC \u5bb9\u5668\u5bf9\u8c61(\u57fa\u4e8e XML \u52a0\u8f7dBean\u5bf9\u8c61)\n        ApplicationContext ctx = new ClassPathXmlApplicationContext("app.xml");\n        Person p = (Person) ctx.getBean("huakucha");\n        System.out.println(p);\n    }\n}\n'))),(0,r.kt)("h2",{id:"ioc-\u6216-di"},"IOC \u6216 DI"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Spring \u6846\u67b6\u7684\u6838\u5fc3\u5c31\u662f\u57fa\u4e8e",(0,r.kt)("inlineCode",{parentName:"p"},"\u63a7\u5236\u53cd\u8f6c(Inversion Of Control,IOC)")," \u7684\u539f\u7406, IOC \u662f\u4e00\u79cd\u5c06",(0,r.kt)("strong",{parentName:"p"},"\u7ec4\u4ef6\u4f9d\u8d56\u9879\u7684\u521b\u5efa\u548c\u7ba1\u7406\u5916\u90e8\u5316\u7684\u6280\u672f"),"\u3002"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6bd4\u5982\u7c7b Foo \u4f9d\u8d56\u4e8e\u7c7bBar,\u4f20\u7edf\u65b9\u5f0f\u4e2d,\u6211\u4eec\u9700\u8981 new \u4e00\u4e2aBar\u7684\u5b9e\u4f8b,\u4f46\u662f\u5728 IOC \u4e2d,Bar \u7684\u5b9e\u4f8b\u4f1a",(0,r.kt)("strong",{parentName:"p"},"\u5728\u8fd0\u884c\u7684\u65f6\u5019\u7531\u5916\u90e8 process \u63d0\u4f9b\u7ed9 Foo"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u8fd9\u79cd",(0,r.kt)("inlineCode",{parentName:"p"},"\u8fd0\u884c\u65f6\u6ce8\u5165\u4f9d\u8d56\u9879"),"\u7684\u884c\u4e3a, ",(0,r.kt)("a",{parentName:"p",href:"https://martinfowler.com/"},"Martin Fowler")," ",(0,r.kt)("em",{parentName:"p"},"\u5c06 IOC\u91cd\u65b0\u547d\u540d\u4e3a\u66f4\u5177\u63cf\u8ff0\u6027\u7684 ",(0,r.kt)("inlineCode",{parentName:"em"},"\u4f9d\u8d56\u6ce8\u5165(Dependency Injection ,DI)")))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Spring \u7684 DI \u5b9e\u73b0\u57fa\u4e8e\u4e24\u4e2a Java \u6838\u5fc3\u6982\u5ff5",(0,r.kt)("inlineCode",{parentName:"p"},"JavaBeans")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"Interface")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5f53\u4f7f\u7528 Spring \u4f5c\u4e3a DI \u63d0\u4f9b\u7a0b\u5e8f\u65f6,\u53ef\u4ee5\u901a\u8fc7\u4e0d\u540c\u65b9\u5f0f(XML\u3001Java \u914d\u7f6e\u7c7b\u3001\u6ce8\u89e3\u7b49)\u7075\u6d3b\u7684\u914d\u7f6e\u4f9d\u8d56\u9879,",(0,r.kt)("strong",{parentName:"p"},"\u4e8b\u5b9e\u4e0a\u88ab Spring \u7ba1\u7406\u7684\u8d44\u6e90\u90fd\u7edf\u79f0\u4e3a ",(0,r.kt)("inlineCode",{parentName:"strong"},"bean")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u901a\u8fc7\u63a5\u53e3\u5141\u8bb8 Spring \u5229\u7528 ",(0,r.kt)("strong",{parentName:"p"},"JDK \u52a8\u6001\u4ee3\u7406(Proxy)"),"\u4e3a\u6a2a\u5207\u5173\u6ce8\u70b9\u63d0\u4f9b ",(0,r.kt)("inlineCode",{parentName:"p"},"AOP")," \u7684\u529f\u80fd"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Spring \u7684",(0,r.kt)("strong",{parentName:"li"},"\u4e8b\u52a1\u7ba1\u7406"),"\u5c31\u662f AOP \u7684\u5178\u578b\u5e94\u7528")))))),(0,r.kt)("h3",{id:"ioc-\u7c7b\u578b"},"IOC \u7c7b\u578b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"IOC\u7684\u6838\u5fc3\u662f DI")," , \u65e8\u5728\u63d0\u4f9b\u4e00\u79cd\u66f4\u7b80\u5355\u7684\u673a\u5236\u6765\u8bbe\u7f6e",(0,r.kt)("inlineCode",{parentName:"li"},"\u7ec4\u4ef6\u4f9d\u8d56\u9879"),"(\u5bf9 IOC \u6765\u8bf4\u5219\u53ef\u4ee5\u7406\u89e3\u4e3a\u76ee\u6807\u5bf9\u8c61),\u5e76\u4e14",(0,r.kt)("strong",{parentName:"li"},"\u5728\u751f\u547d\u5468\u671f\u4e2d\u7ba1\u7406\u8fd9\u4e9b\u5bf9\u8c61")),(0,r.kt)("li",{parentName:"ul"},"\u4ece",(0,r.kt)("strong",{parentName:"li"},"\u64cd\u4f5c\u5bf9\u8c61\u7684\u65b9\u5f0f"),"\u6765\u8bf4, IOC \u4e00\u822c\u6709\u4e24\u79cd\u7c7b\u578b:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"\u4f9d\u8d56\u67e5\u627e"),", \u901a\u5e38\u4f9d\u8d56\u67e5\u627e\u6709\u4e24\u79cd\u7c7b\u578b",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u4f9d\u8d56\u62c9\u53d6(dependency pull,DL)")," "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u4e0a\u4e0b\u6587\u4f9d\u8d56\u67e5\u627e(contextualized dependency lookup,CDL)")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"\u4f9d\u8d56\u6ce8\u5165"),",  \u901a\u5e38\u4f9d\u8d56\u6ce8\u5165\u4e5f\u6709\u4e24\u79cd\u7c7b\u578b",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6784\u9020\u51fd\u6570\u6ce8\u5165")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"setter\u6ce8\u5165"))))))),(0,r.kt)("h4",{id:"\u4f9d\u8d56\u62c9\u53d6"},"\u4f9d\u8d56\u62c9\u53d6"),(0,r.kt)("p",null,"\u4f9d\u8d56\u62c9\u53d6\u662f\u6700\u5e38\u89c1\u7684 IOC \u7c7b\u578b\u3002\u5728\u4f9d\u8d56\u62c9\u53d6\u7684\u8fc7\u7a0b\u4e2d,\u6839\u636e\u9700\u8981",(0,r.kt)("inlineCode",{parentName:"p"},"\u4ece\u6ce8\u518c\u8868\u4e2d\u83b7\u53d6\u4f9d\u8d56\u9879"),",\u6d41\u7a0b\u5982\u4e0b:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20221113130034914",src:a(94659).Z,width:"738",height:"368"})),(0,r.kt)("h4",{id:"\u4e0a\u4e0b\u6587\u4f9d\u8d56\u67e5\u627e"},"\u4e0a\u4e0b\u6587\u4f9d\u8d56\u67e5\u627e"),(0,r.kt)("p",null,"\u8fd9\u79cd\u67e5\u627e\u65b9\u5f0f\u4e0e DL \u76f8\u4f3c,\u4f46\u662f\u8fd9\u79cd\u4e0a\u4e0b\u6587\u4f9d\u8d56\u67e5\u627e\u76f4\u63a5\u4f5c\u7528\u4e8e\u5bb9\u5668,",(0,r.kt)("strong",{parentName:"p"},"\u800c\u4e0d\u662f\u6ce8\u518c\u8868")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20221113131524537",src:a(10451).Z,width:"796",height:"210"})),(0,r.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u770b\u5230",(0,r.kt)("strong",{parentName:"p"},"\u7ec4\u4ef6\u8c03\u7528\u5bb9\u5668\u7684\u67e5\u627e\u65b9\u6cd5\u67e5\u8be2\u4f9d\u8d56\u9879,\u7136\u540e\u5c06\u4f9d\u8d56\u9879\u8bbe\u7f6e\u5230\u672c\u8eab")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="CDL \u6a21\u62df\u4ee3\u7801"',title:'"CDL','\u6a21\u62df\u4ee3\u7801"':!0},'/**\n * <b>\u5bb9\u5668\u63a5\u53e3</b>\n * @author <a href="mailto:zhuyuliangm@gmail.com">yuliang zhu</a>\n */\npublic interface Container {\n    /**\n     * \u63d0\u4f9b\u7ed9\u5916\u90e8\u6839\u636e\u4f9d\u8d56\u540d\u79f0\u83b7\u53d6\u5bb9\u5668\u4e2d\u7684\u7ba1\u7406\u5bf9\u8c61\n     * @param dependencyName\n     * @return Object\n     */\n    Object getDependency(String dependencyName);\n}\n\n/**\n * <b>\u7ec4\u4ef6\u7684\u63a5\u53e3,\u76f4\u63a5\u4f5c\u7528\u4e8e\u5bb9\u5668</b>\n * @author <a href="mailto:zhuyuliangm@gmail.com">yuliang zhu</a>\n */\npublic interface Component {\n    /**\n     * \u5229\u7528\u5bb9\u5668\u67e5\u8be2\u7ec4\u4ef6,\u800c\u4e0d\u662f\u6ce8\u518c\u8868\n     * @param container\n     */\n    void allowQuery(Container container);\n}\n\n/**\n * <b>\u7ec4\u4ef6</b>\n * @author <a href="mailto:zhuyuliangm@gmail.com">yuliang zhu</a>\n */\npublic class CDLComponent implements Component {\n    private Dependency dependency;\n    @Override\n    public void allowQuery(Container container) {\n        // \u76f4\u63a5\u5229\u7528\u5bb9\u5668\u7684\u65b9\u6cd5\u67e5\u8be2\u4f9d\u8d56\n        // highlight-start\n        this.dependency = (Dependency)container.getDependency("dependenceyName");\n          // highlight-end\n    }\n}\n')),(0,r.kt)("h4",{id:"\u6784\u9020\u51fd\u6570\u6ce8\u5165"},"\u6784\u9020\u51fd\u6570\u6ce8\u5165"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5f53\u7ec4\u4ef6\u7684\u6784\u9020\u51fd\u6570\u4e2d\u63d0\u4f9b\u4e86\u67d0\u4e9b\u4f9d\u8d56\u9879\u540e,\u5c31\u4f1a\u53d1\u751f",(0,r.kt)("inlineCode",{parentName:"strong"},"\u6784\u9020\u51fd\u6570\u4f9d\u8d56\u6ce8\u5165")),",\u5373\u58f0\u660e",(0,r.kt)("strong",{parentName:"li"},"\u4e00\u4e2a\u6216\u8005\u4e00\u7ec4\u6784\u9020\u51fd\u6570,\u5e76\u4e14\u5176\u4ed6\u4f9d\u8d56\u9879\u4f5c\u4e3a\u53c2\u6570,\u7136\u540e\u8be5\u7ec4\u4ef6\u5728\u5b9e\u4f8b\u5316\u7684\u65f6\u5019\u4f1a\u7531",(0,r.kt)("inlineCode",{parentName:"strong"},"IOC\u5bb9\u5668"),"\u5c06\u4f9d\u8d56\u9879\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u4f20\u5165\u7ed9\u7ec4\u4ef6")),(0,r.kt)("li",{parentName:"ul"},"\u6784\u9020\u51fd\u6570\u6709\u4e00\u4e2a\u95ee\u9898\u5c31\u662f: ",(0,r.kt)("mark",null,"\u5982\u679c\u67d0\u4e2a\u4f9d\u8d56\u9879\u4e0d\u5b58\u5728\u7684\u8bdd,\u90a3\u4e48\u8be5\u7ec4\u4ef6\u4e5f\u65e0\u6cd5\u88ab\u521b\u5efa\u521d\u59cb\u5316")," ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="\u6784\u9020\u51fd\u6570\u6ce8\u5165\u7684\u6a21\u62df\u4ee3\u7801"',title:'"\u6784\u9020\u51fd\u6570\u6ce8\u5165\u7684\u6a21\u62df\u4ee3\u7801"'},"public class ContructorInjection {\n    private Dependency dependency;\n    // highlight-start\n    // \u4f9d\u8d56\u9879\u4f5c\u4e3a\u7ec4\u4ef6\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\n    public ContructorInjection(Dependency dependency) {\n      this.dependency = dependency;\n    }\n    // highlight-end\n}\n")),(0,r.kt)("h4",{id:"setter-\u6ce8\u5165"},"Setter \u6ce8\u5165"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u76f8\u5bf9\u4e8e\u6784\u9020\u51fd\u6570\u6765\u8bf4,Setter \u6ce8\u5165\u5219\u662f\u5229\u7528\u7684\u7b26\u5408 JavaBean \u89c4\u7ea6\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"Setter \u65b9\u6cd5"),",\u5c06\u4f9d\u8d56\u9879\u6ce8\u5165\u5230\u7ec4\u4ef6\u4e2d"),(0,r.kt)("li",{parentName:"ul"},"Setter \u6ce8\u5165\u7684\u597d\u5904\u662f: \u5373\u4f7f\u7ec4\u4ef6\u7684\u67d0\u4e2a\u4f9d\u8d56\u4e0d\u5b58\u5728\u7684\u8bdd,\u8fd9\u4e2a\u7ec4\u4ef6\u4e5f\u8fd8\u53ef\u4ee5\u88ab\u521b\u5efa,\u540e\u671f\u9700\u8981\u7684\u8bdd\u518d\u5229\u7528 setter \u65b9\u6cd5\u8fdb\u884c\u8bbe\u7f6e"),(0,r.kt)("li",{parentName:"ul"},"Setter \u6ce8\u5165\u8fd8\u53ef\u4ee5",(0,r.kt)("inlineCode",{parentName:"li"},"\u5728\u63a5\u53e3\u4e0a\u58f0\u660e\u4f9d\u8d56\u7684\u7ec4\u4ef6,\u7136\u540e\u63a5\u53e3\u7684\u5b9e\u73b0\u7c7b\u5c31\u5fc5\u987b\u4f7f\u7528\u6216\u8005\u77e5\u9053\u6709\u8fd9\u4e2a\u4f9d\u8d56\u7684\u7ec4\u4ef6")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("mark",null,"\u6240\u4ee5 setter \u6ce8\u5165\u662f\u4f7f\u7528\u6700\u4e3a\u5e7f\u6cdb\u7684\u4f9d\u8d56\u6ce8\u5165\u65b9\u5f0f"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="Setter \u6ce8\u5165\u7684\u6a21\u62df\u4ee3\u7801"',title:'"Setter','\u6ce8\u5165\u7684\u6a21\u62df\u4ee3\u7801"':!0},"    public class SetterInjection {\n    private Dependency dependency;\n    // highlight-start\n    public void setDependency(Dependency dependency) {\n       this.dependency = dependency;\n    }\n    // highlight-end\n  }\n")),(0,r.kt)("admonition",{title:"\u8bf4\u660e",type:"tip"},(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u4e8b\u5b9e\u4e0a,\u5728 Spring \u4e2d\u8fd8\u63d0\u4f9b\u4e86\u53e6\u5916\u4e00\u79cd\u4f9d\u8d56\u6ce8\u5165\u65b9\u5f0f: ",(0,r.kt)("inlineCode",{parentName:"p"},"\u5b57\u6bb5\u6ce8\u5165(Field Injection)"),",\u5728\u540e\u9762\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"@AutoWire")," \u6ce8\u89e3\u7684\u81ea\u52a8\u88c5\u914d\u4e2d\u4f1a\u8bf4\u660e")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u4f7f\u7528\u4f9d\u8d56\u67e5\u627e\u8fd8\u662f\u4f9d\u8d56\u6ce8\u5165,\u5927\u591a\u6570\u7684\u60c5\u51b5\u4e0b\u662f\u7531IOC\u5bb9\u5668\u786e\u5b9a\u7684"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6bd4\u5982: \u4f7f\u7528 EJB2.1 \u6216\u8005\u66f4\u65e9\u7684\u7248\u672c\u7684\u8bdd,\u5c31\u5fc5\u987b\u4f7f\u7528\u4f9d\u8d56\u67e5\u627e,\u901a\u8fc7 JNDI \u4eceEJB \u5bb9\u5668\u5fd7\u5e73\u83b7\u53d6 EJB"),(0,r.kt)("li",{parentName:"ul"},"\u5728 Spring \u4e2d,\u9664\u4e86\u521d\u59cb Bean \u7684\u67e5\u627e, ",(0,r.kt)("strong",{parentName:"li"},"\u7ec4\u4ef6\u53ca\u5176\u4f9d\u8d56\u9879\u4f7f\u7528\u4f7f\u7528\u4f9d\u8d56\u6ce8\u5165\u7684\u65b9\u5f0f")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u5982\u679c\u53ef\u4ee5\u9009\u62e9\u4f9d\u8d56\u67e5\u627e\u8fd8\u662f\u4f9d\u8d56\u6ce8\u5165,\u90a3\u4e48\u4f9d\u65e7\u662f\u4f9d\u8d56\u6ce8\u5165,\u56e0\u4e3a\u4f9d\u8d56\u67e5\u627e\u7684\u8026\u5408\u6027\u8f83\u9ad8,\u9700\u8981\u4e3b\u52a8\u4ece\u5bb9\u5668\u83b7\u53d6,\u800c\u4f9d\u8d56\u6ce8\u5165\u5bf9\u7ec4\u4ef6\u4ee3\u7801\u6ca1\u6709\u4efb\u4f55\u5f71\u54cd")))),(0,r.kt)("h2",{id:"spring-\u7684\u4f9d\u8d56\u6ce8\u5165"},"Spring \u7684\u4f9d\u8d56\u6ce8\u5165"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"IOC \u662f Spring \u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206,Spring \u5b9e\u73b0\u7684\u6838\u5fc3\u662f\u57fa\u4e8e DI,\u867d\u7136\u4e5f\u4f7f\u7528\u4e86 DL,\u4f46\u662fDI \u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e DL"),(0,r.kt)("p",{parentName:"blockquote"},"Spring \u5bf9\u4e8e DI \u7684\u652f\u6301\u662f\u5f88\u5168\u9762\u7684,\u4e0d\u4ec5\u4ec5\u652f\u6301 Setter \u6ce8\u5165\u3001\u6784\u9020\u51fd\u6570\u6ce8\u5165,\u8fd8\u652f\u6301\u65b9\u6cd5\u6ce8\u5165")),(0,r.kt)("h3",{id:"beanfactory"},"BeanFactory"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Spring IOC\u5bb9\u5668\u7684\u6838\u5fc3\u662f",(0,r.kt)("inlineCode",{parentName:"li"},"BeanFactory \u63a5\u53e3"),",BeanFactory \u8d1f\u8d23",(0,r.kt)("strong",{parentName:"li"},"\u7ba1\u7406\u7ec4\u4ef6,\u5305\u62ec\u7ec4\u4ef6\u7684\u4f9d\u8d56\u9879\u4ee5\u53ca\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f"),"\u3002\u5728 Spring \u7684\u672f\u8bed\u4e2d,\u6211\u4eec\u5c06\u7531\u5bb9\u5668\u7ba1\u7406\u7684\u4efb\u4f55\u7ec4\u4ef6\u90fd\u79f0\u4e4b\u4e3a",(0,r.kt)("inlineCode",{parentName:"li"},"Bean")),(0,r.kt)("li",{parentName:"ul"},"\u867d\u7136 BeanFactory\u53ef\u4ee5\u901a\u8fc7\u7f16\u7a0b\u7684\u65b9\u5f0f\u8bbe\u7f6e,\u4f46\u662f\u66f4\u52a0\u5e38\u89c1\u7684\u65b9\u5f0f\u5c31\u662f\u4f7f\u7528",(0,r.kt)("em",{parentName:"li"},"\u914d\u7f6e\u6587\u4ef6"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Bean \u7684\u914d\u7f6e\u4fe1\u606f\u7531 ",(0,r.kt)("inlineCode",{parentName:"strong"},"BeanDefinition \u63a5\u53e3"),"\u5b9e\u73b0\u7c7b\u7684\u5b9e\u4f8b\u8868\u793a,Bean \u7684\u914d\u7f6e\u4fe1\u606f\u4e2d\u8fd8\u5305\u542b\u4e86\u8be5 Bean \u7684\u4f9d\u8d56\u9879\u4fe1\u606f")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5bf9\u4e8e\u5b9e\u73b0\u4e86 BeanDefinitionReader \u63a5\u53e3\u7684 BeanFactory \u5b9e\u73b0\u7c7b\u6765\u8bf4,\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"strong"},"PropertiesBeanDefinitionReader"),"\u6216",(0,r.kt)("inlineCode",{parentName:"strong"},"XmlBeanDefinitionReader")," \u4ece\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bfb\u53d6\u914d\u7f6e\u4fe1\u606f,\u524d\u8005\u5229\u7528properties \u6587\u4ef6,\u540e\u8005\u5219\u662f Xml \u6587\u4ef6"))))),(0,r.kt)("h4",{id:"beanfactory-\u5b9e\u73b0"},"BeanFactory \u5b9e\u73b0"),(0,r.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u521d\u59cb\u5316\u5e76\u4e14\u83b7\u53d6Bean, ",(0,r.kt)("inlineCode",{parentName:"p"},"DefaultListableBeanFactory")," \u662f Spring \u63d0\u4f9b\u7684BeanFactory \u4e24\u79cd\u4e3b\u8981\u5b9e\u73b0\u4e4b\u4e00"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class XmlConfigWithBeanFactory {\n     public static void main(String[] args) {\n        // highlight-start\n        DefaultListableBeanFactory factory = new DefaultListableBeanFactory();\n        XmlBeanDefinitionReader reader = new XmlBeanDefinitionReader(factory);\n        reader.loadBeanDefinitions("xml-config-with-beanFactory.xml");\n       // highlight-end\n        Address address = (Address)factory.getBean("CZ_Address");\n        System.out.println(address);\n    }\n}\n')),(0,r.kt)("h3",{id:"applicationcontext"},"ApplicationContext"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6211\u4eec\u53ef\u4ee5\u81ea\u5b9a\u4e49 BeanFactory \u7684\u5b9e\u73b0\u7c7b\u6765\u6ee1\u8db3\u81ea\u5df1\u7684\u4e1a\u52a1\u9700\u6c42,\u4f46\u662f\u8fd9\u4e2a\u975e\u5e38\u590d\u6742\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5728 Spring \u4e2d,",(0,r.kt)("inlineCode",{parentName:"p"},"ApplicationContext")," \u63a5\u53e3\u662f BeanFactory \u7684\u4e00\u4e2a\u62d3\u5c55\u3002\u9664\u4e86\u5e38\u89c4\u7684 DI \u529f\u80fd,\u8fd8\u63d0\u4f9b\u4e86\u5176\u4ed6\u529f\u80fd,\u6bd4\u5982",(0,r.kt)("inlineCode",{parentName:"p"},"\u4e8b\u52a1\u3001AOP\u3001\u56fd\u9645\u5316(i18n)\u7684\u6d88\u606f\u6e90\u3001\u4e8b\u4ef6\u5904\u7406..."),"\u6240\u4ee5\u5b9e\u9645\u5f00\u53d1\u7684\u65f6\u5019\u5efa\u8bae\u901a\u8fc7 ApplicationContext \u63a5\u53e3\u4e0e Spring \u4ea4\u4e92"))),(0,r.kt)("h4",{id:"\u57fa\u672c\u914d\u7f6e"},"\u57fa\u672c\u914d\u7f6e"),(0,r.kt)("p",null,"\u5bf9\u4e8e Spring \u7684 XML \u914d\u7f6e\u6587\u4ef6\u6765\u8bf4,\u9700\u8981\u4f7f\u7528 Spring \u63d0\u4f9b\u7684",(0,r.kt)("em",{parentName:"p"},"namespace"),",\u4e0b\u9762\u7684\u662f\u6700\u57fa\u672c\u7684\u793a\u4f8b:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans.xsd">\n </beans>\n')),(0,r.kt)("p",null,"\u4f46\u662f\u9664\u4e86 beans \u7684 namespace,Spring \u8fd8\u63d0\u4f9b\u4e86\u5f88\u591a\u5176\u4ed6\u7684namespace,\u6bd4\u5982\u9488\u5bf9 ApplicationContext\u914d\u7f6e\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Context"),",\u7528\u4e8e AOP \u652f\u6301\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"aop"),",\u7528\u4e8e\u4e8b\u52a1\u652f\u6301\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"tx"),"\u2026"),(0,r.kt)("p",null,"\u5982\u679c\u9700\u8981\u5bf9\u4f7f\u7528 Spring \u7684\u6ce8\u89e3\u652f\u6301,\u53ef\u4ee5\u5728 XML \u4e2d\u8fdb\u884c\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"context\u7684\u5305\u626b\u63cf"),"\u914d\u7f6e,\u901a\u8fc7",(0,r.kt)("strong",{parentName:"p"},"Component-Scan"),"\u53ef\u4ee5\u626b\u63cf\u6307\u5b9a\u5305\u4e0b\u9762\u88ab@Component \u4ee5\u53ca\u6d3e\u751f\u6ce8\u89e3\u6807\u8bb0\u7684 Bean\u3002\u5f53\u7136,\u4e5f\u652f\u6301\u5bf9\u626b\u63cf\u8fdb\u884c\u8fc7\u6ee4\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans.xsd\n        \x3c!--highlight-start--\x3e                   \n        http://www.springframework.org/schema/context\n        http://www.springframework.org/schema/spring-context.xsd">\n  \x3c!--highlight-end--\x3e       \n  \x3c!-- \u5f00\u542f\u652f\u6301 Spring \u7684\u6ce8\u89e3\u626b\u63cf,\u8bbe\u7f6e\u626b\u63cf\u7684\u57fa\u7840\u5305\u8def\u5f84 --\x3e\n  \x3c!--highlight-start--\x3e           \n  <context:component-scan base-package="Demo2">\n  </context:component-scan>\n  \x3c!--highlight-end--\x3e    \n</beans>\n')),(0,r.kt)("h4",{id:"setter-\u6ce8\u5165-1"},"Setter \u6ce8\u5165"),(0,r.kt)("p",null,"Setter \u53ef\u4ee5\u4f7f\u7528",(0,r.kt)("strong",{parentName:"p"},"\u914d\u7f6e\u6587\u4ef6\u3001\u914d\u7f6e\u6587\u4ef6+\u6ce8\u89e3\u3001\u6ce8\u89e3"),"\u7684\u65b9\u5f0f"),(0,r.kt)("h5",{id:"\u914d\u7f6e\u6587\u4ef6"},"\u914d\u7f6e\u6587\u4ef6"),(0,r.kt)("admonition",{title:"\u521b\u5efa Bean \u7684\u793a\u4f8b",type:"info"},(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},"\u5b9a\u4e49\u7ec4\u4ef6")),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="Java \u4ee3\u7801"',title:'"Java','\u4ee3\u7801"':!0},'// \u5b9a\u4e49\u6d88\u606f\u6e32\u67d3\u548c\u6d88\u606f\u63d0\u4f9b\u8005\u63a5\u53e3\npublic interface MessageRender {\n    void render();\n    void setMessageProvider(MessageProvider messageProvider);\n    MessageProvider getMessageProvider();\n}\npublic interface MessageProvider {\n    String getMessage();\n}\n\n// \u6d88\u606f\u6e32\u67d3\u548c\u6d88\u606f\u63d0\u4f9b\u8005\u63a5\u53e3\u7684\u5b9e\u73b0\u7c7b\npublic class StandMessageRender implements MessageRender{\n    private MessageProvider messageProvider;\n\n    @Override\n    public void render() {\n        System.out.println(messageProvider.getMessage());\n    }\n\n    @Override\n    public void setMessageProvider(MessageProvider messageProvider) {\n        this.messageProvider = messageProvider;\n    }\n\n    @Override\n    public MessageProvider getMessageProvider() {\n        return messageProvider;\n    }\n}\npublic class HelloMessageProvider implements MessageProvider {\n    @Override\n    public String getMessage() {\n        return "Hello";\n    }\n}\n')),(0,r.kt)("ol",{parentName:"admonition",start:2},(0,r.kt)("li",{parentName:"ol"},"\u5728 Spring \u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5bf9\u7ec4\u4ef6\u8fdb\u884c\u914d\u7f6e,\u540c\u65f6\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"li"},"p:"),"\u5bf9",(0,r.kt)("strong",{parentName:"li"},"\u6d88\u606f\u6e32\u67d3\u7ec4\u4ef6\u4e2d\u7684\u5c5e\u6027\u5b57\u6bb5 messageProvider \u8fdb\u884c\u6ce8\u5165"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6ce8\u610f: \u9664\u4e86 ",(0,r.kt)("strong",{parentName:"li"},"p \u547d\u540d\u7a7a\u95f4"),"\u8fd8\u53ef\u4ee5\u4f7f\u7528 Bean \u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"<property>")," \u5c5e\u6027")))),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<bean id="messageProvider" class="Demo3.HelloMessageProvider">\n</bean>\n\n\x3c!--\u4f7f\u7528 Setter \u6ce8\u5165(property \u6807\u7b7e)--\x3e\n<bean id="messageRender2" class="Demo3.StandMessageRender">\n  <property name="messageProvider" ref="messageProvider"/>\n</bean>\n\n\x3c!--\u4f7f\u7528 Setter \u6ce8\u5165(p\u547d\u540d\u7a7a\u95f4)--\x3e\n<bean id="messageRender" class="Demo3.StandMessageRender" p:messageProvider-ref="messageProvider">\n</bean>\n')),(0,r.kt)("ol",{parentName:"admonition",start:3},(0,r.kt)("li",{parentName:"ol"},"\u4ee3\u7801\u52a0\u8f7d Spring \u7684 IOC \u5bb9\u5668,\u5e76\u4e14\u83b7\u53d6",(0,r.kt)("strong",{parentName:"li"},"\u6d88\u606f\u6e32\u67d3"),"\u7684\u7ec4\u4ef6")),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public static void main(String[] args) {\n  DefaultListableBeanFactory beanFactory = new DefaultListableBeanFactory();\n  XmlBeanDefinitionReader reader = new XmlBeanDefinitionReader(beanFactory);\n  reader.loadBeanDefinitions("message.xml");\n  StandMessageRender  messageRender= (StandMessageRender) beanFactory.getBean("messageRender");\n  messageRender.render();  //out:Hello\n  \n  StandMessageRender  messageRender2= (StandMessageRender) beanFactory.getBean("messageRender2");\n  messageRender2.render();  //out:Hello\n}\n'))),(0,r.kt)("h5",{id:"\u914d\u7f6e\u6587\u4ef6\u6ce8\u89e3"},"\u914d\u7f6e\u6587\u4ef6+\u6ce8\u89e3"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u6211\u4eec\u9664\u4e86\u53ef\u4ee5\u5728 Spring \u7684 xml \u914d\u7f6e\u6587\u4ef6\u4e2d\u624b\u52a8\u5b9a\u4e49\u7ec4\u4ef6,\u8fd8\u53ef\u4ee5\u4f7f\u7528 Spring \u63d0\u4f9b\u7684",(0,r.kt)("strong",{parentName:"p"},"\u7ec4\u4ef6\u626b\u63cf"),"\u5c06 Component \u6d3e\u751f\u6ce8\u89e3\u626b\u63cf\u5230 IOC \u5bb9\u5668\u4e2d"),(0,r.kt)("p",{parentName:"blockquote"},"\u5728 Setter \u6ce8\u5165\u65f6,\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"@Autowired")," \u5bf9\u8be5\u5b57\u6bb5\u8fdb\u884c\u6ce8\u5165,\u5f53\u7136\u8fd8\u53ef\u4ee5\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"@Resource"),"\u6ce8\u89e3")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!--XMl \u5b9a\u4e49\u626b\u63cf\u7684\u8def\u5f84--\x3e\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n      xmlns:context="http://www.springframework.org/schema/context"\n      xsi:schemaLocation="\n      http://www.springframework.org/schema/beans\n      http://www.springframework.org/schema/beans/spring-beans.xsd\n      http://www.springframework.org/schema/context\n      http://www.springframework.org/schema/context/spring-context.xsd">\n\n    \x3c!--\u626b\u63cf Demo3/XMlAndAnnotation \u4e0b\u7684 Component \u6d3e\u751f\u6ce8\u89e3\u6807\u8bb0\u7684\u7ec4\u4ef6--\x3e\n    <context:component-scan base-package="Demo3.XMlAndAnnotation" annotation-config="true"/>\n</beans>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'// \u5b9a\u4e49\u7ec4\u4ef6\n@Component("provider")\npublic class XmlAnnotationMessageProvider implements MessageProvider {\n    @Override\n    public String getMessage() {\n        return "XmlAnnotation";\n    }\n}\n@Service("messageRender")\npublic class XmlAnnotationMessageRender implements MessageRender {\n    private MessageProvider messageProvider;\n    @Override\n    public void render() {\n        System.out.println(messageProvider.getMessage());\n    }\n\n    \n  \n    /*\n        \u6ce8\u610f\u8fd9\u91cc\u5c06 Bean \u7684 id \u7b49\u4e8e provider \u7684 Bean \u7ec4\u4ef6\u901a\u8fc7 Setter \u6ce8\u5165\u7684\u65b9\u5f0f\u6ce8\u5165\u8fdb\u6765\n    */\n   // highlight-start\n    @Override\n      @Autowired\n    public void setMessageProvider(MessageProvider provider) {\n        this.messageProvider = provider;\n    }\n        // highlight-end\n\n    @Override\n    public MessageProvider getMessageProvider() {\n        return messageProvider;\n    }\n}\n\n// \u6d4b\u8bd5\npublic class XmlAnnotationTest {\n    public static void main(String[] args) {\n       // \u8fd9\u91cc\u7684 GenericXmlApplicationContext \u662f ApplicantContext \u7684\u5b9e\u73b0\u7c7b\n        GenericXmlApplicationContext ctx = new GenericXmlApplicationContext();\n        ctx.load("XmlAnnotation.xml");\n        ctx.refresh();\n        XmlAnnotationMessageRender render = ctx.getBean("messageRender", XmlAnnotationMessageRender.class);\n        render.render();\n    }\n}\n')),(0,r.kt)("admonition",{title:"\u6ce8\u5165\u7684\u6ce8\u610f\u70b9",type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"\u81ea\u52a8\u6ce8\u5165\u7684\u65f6\u5019\u4e00\u822c\u4ee5\u6709\u4e24\u79cd\u65b9\u5f0f:"),(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"byType"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5c06\u7c7b\u578b\u5339\u914d\u7684Bean \u7ec4\u4ef6\u4f5c\u4e3a\u5c5e\u6027\u6ce8\u5165\u5230\u53e6\u4e00\u4e2aBean \u7ec4\u4ef6\u4e2d"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u4f46\u662f\u8fd9\u79cd\u65b9\u5f0f\u7684\u95ee\u9898\u5728\u4e8e,IOC \u5bb9\u5668\u4e2d\u53ef\u80fd\u4f1a\u5b58\u5728\u591a\u4e2a\u7c7b\u578b\u76f8\u540c\u7684 Bean \u7ec4\u4ef6,\u5bfc\u81f4\u65e0\u6cd5\u6ce8\u5165")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"byName"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6839\u636e\u540d\u79f0\u81ea\u52a8\u88c5\u914d, \u4f7f\u7528 Bean \u7684\u5c5e\u6027\u540d \u4e0eIOC\u5bb9\u5668\u4e2d Bean \u7684 id \u5c5e\u6027\u8fdb\u884c\u5339\u914d,\u5339\u914d\u6210\u529f\u5219\u88c5\u914d\u6210\u529f"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u8fd9\u79cd\u65b9\u5f0f\u8981\u6c42\u6ce8\u5165\u7684\u5c5e\u6027\u540d\u4e0eBean \u7684 id \u5b8c\u5168\u4e00\u81f4"))))),(0,r.kt)("p",{parentName:"admonition"},"\u6240\u4ee5\u5728\u4e0a\u8ff0\u7684\u793a\u4f8b\u4e2d: \u5982\u679c byName \u548c byType \u7684\u65b9\u5f0f\u90fd\u4e0d\u6ee1\u8db3\u7684\u8bdd,\u5c31\u4f1a\u629b\u5f02\u5e38\u3002"),(0,r.kt)("p",{parentName:"admonition"},"\u5f53\u7136,\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"@Resource")," \u6ce8\u89e3\u6765\u8fdb\u884cDI,",(0,r.kt)("strong",{parentName:"p"},"\u56e0\u4e3a@Resource \u6ce8\u89e3\u652f\u6301\u4f20\u5165\u9700\u8981\u6ce8\u5165\u7684 Bean \u7ec4\u4ef6\u7684 id"))),(0,r.kt)("h5",{id:"\u6ce8\u89e3"},"\u6ce8\u89e3"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u6211\u4eec\u53ef\u4ee5\u7528\u914d\u7f6e\u7c7b\u4ee3\u66ff xml \u914d\u7f6e\u6587\u4ef6,\u6709\u4e0b\u9762\u7684\u4e00\u4e9b\u65b9\u6848:"),(0,r.kt)("ol",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ol"},"\u5728 @Configuration \u914d\u7f6e\u7c7b\u4e2d\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"li"},"@Bean"),"\u5b9a\u4e49\u7ec4\u4ef6"),(0,r.kt)("li",{parentName:"ol"},"\u5728 @Configuration \u914d\u7f6e\u7c7b\u4e0a\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"@ComponentScan")," \u6ce8\u89e3\u8fdb\u884c\u5305\u626b\u63cf"),(0,r.kt)("li",{parentName:"ol"},"\u2026"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'// \u81ea\u5b9a\u4e49\u7ec4\u4ef6\u7c7b\npublic class AnnotationMessageProvider implements MessageProvider {\n\n    @Override\n    public String getMessage() {\n        return "annotation";\n    }\n}\npublic class AnnotationMessageRender implements MessageRender {\n    private MessageProvider messageProvider;\n    @Override\n    public void render() {\n        System.out.println(messageProvider.getMessage());\n    }\n\n    @Override\n    public void setMessageProvider(MessageProvider messageProvider) {\n        this.messageProvider = messageProvider;\n    }\n\n    @Override\n    public MessageProvider getMessageProvider() {\n        return messageProvider;\n    }\n}\n\n// \u5b9a\u4e49\u5bb9\u5668\u914d\u7f6e\u7c7b,\u4f7f\u7528 @Configuration \u6ce8\u89e3\u6807\u8bc6,\u7ec4\u4ef6\u7528@Bean \u6807\u8bc6\n@Configuration\npublic class AnnotationConfiguration {\n    @Bean\n    public AnnotationMessageProvider provider() {\n        return new  AnnotationMessageProvider();\n    }\n\n    @Bean\n    public AnnotationMessageRender messageRender() {\n        AnnotationMessageRender render = new AnnotationMessageRender();\n        render.setMessageProvider(provider());\n        return render;\n    }\n}\n\n// \u6d4b\u8bd5,\u7528AnnotationConfigApplicationContext \u52a0\u8f7d\u6ce8\u89e3\u914d\u7f6e\u7c7b\npublic static void main(String[] args) {\n  AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(AnnotationConfiguration.class);\n  AnnotationMessageRender messageRender = ctx.getBean("messageRender", AnnotationMessageRender.class);\n  messageRender.render();\n}\n')),(0,r.kt)("h4",{id:"\u6784\u9020\u51fd\u6570\u6ce8\u5165-1"},"\u6784\u9020\u51fd\u6570\u6ce8\u5165"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u4f7f\u7528\u6784\u9020\u51fd\u6570\u6ce8\u5165\u7684\u597d\u5904\u5c31\u662f**\u5982\u679c\u6ca1\u6709\u4f20\u5165\u53c2\u6570(\u9664\u975e\u662f Null),\u5c31\u65e0\u6cd5\u521b\u5efaBean,\u5c31\u6bd4\u5982\u4e0b\u9762\u7684\u4ee3\u7801:"),(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public class ConfigurableMessageProvider implements MessageProvider {\n  private String message;\n    \n  /*\n    \u5982\u679c\u6ca1\u6709\u4f20\u5165\u53c2\u6570message,\u90a3\u4e48\u8fd9\u4e2aBean\u5c31\u65e0\u6cd5\u88ab\u521d\u59cb\u5316\n  */\n  // highlight-start\n  public ConfigurableMessageProvider(String message) {\n    this.message = message;\n  }\n  // highlight-end\n\n  @Override\n  public String getMessage() {\n    return message;\n  }\n}\n"))),(0,r.kt)("p",null,"\u4e0e Setter \u6ce8\u5165\u65b9\u5f0f\u7c7b\u4f3c\u7684,\u6784\u9020\u51fd\u6570\u6ce8\u5165\u4e5f\u652f\u6301",(0,r.kt)("strong",{parentName:"p"},"\u914d\u7f6e\u6587\u4ef6\u3001\u914d\u7f6e\u6587\u4ef6+\u6ce8\u89e3\u3001\u6ce8\u89e3"),"\u7684\u65b9\u5f0f\u5411IOC\u5bb9\u5668\u6ce8\u5165 Bean"),(0,r.kt)("h5",{id:"\u914d\u7f6e\u6587\u4ef6-1"},"\u914d\u7f6e\u6587\u4ef6"),(0,r.kt)("admonition",{title:"\u4f7f\u7528\u793a\u4f8b",type:"info"},(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},"\u5b9a\u4e49 Bean \u7ec4\u4ef6")),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="java\u4ee3\u7801"',title:'"java\u4ee3\u7801"'},"// \u5b9a\u4e49\u7ec4\u4ef6\npublic class XmlMessageProvider implements MessageProvider {\n    private String message;\n\n    public XmlMessageProvider (String message) {\n        this.message = message;\n    }\n\n    @Override\n    public String getMessage() {\n        return message;\n    }\n}\n")),(0,r.kt)("ol",{parentName:"admonition",start:2},(0,r.kt)("li",{parentName:"ol"},"\u5b9a\u4e49 Xml \u914d\u7f6e\u6587\u4ef6")),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!--  \u6784\u9020\u51fd\u6570\u6ce8\u5165(\u4f7f\u7528constructor-arg\u6807\u7b7e)  --\x3e\n<bean id="xmlMessageProvider" class="Demo4.ConstructorInjection.XmlInjection.XmlMessageProvider">\n  <constructor-arg name="message" value="xmlMessageProvider"/>\n</bean>\n\n\x3c!--  \u6784\u9020\u51fd\u6570\u6ce8\u5165(\u4f7f\u7528c\u547d\u540d\u7a7a\u95f4)  --\x3e\n<bean id="xmlMessageProvider2"\n      class="Demo4.ConstructorInjection.XmlInjection.XmlMessageProvider"\n      c:message="xmlMessageProvider2">\n</bean>\n')),(0,r.kt)("ol",{parentName:"admonition",start:3},(0,r.kt)("li",{parentName:"ol"},"\u6d4b\u8bd5\u4ee3\u7801")),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-java"},'DefaultListableBeanFactory beanFactory = new DefaultListableBeanFactory();\nXmlBeanDefinitionReader reader = new XmlBeanDefinitionReader(beanFactory);\nreader.loadBeanDefinitions("constructorXml.xml");\nXmlMessageProvider messageProvider= (XmlMessageProvider) beanFactory.getBean("xmlMessageProvider");\nSystem.out.println(messageProvider.getMessage());   // out:xmlMessageProvider\n\nXmlMessageProvider messageProvider2= (XmlMessageProvider) beanFactory.getBean("xmlMessageProvider2");\nSystem.out.println(messageProvider2.getMessage());  // out: xmlMessageProvider2\n'))))}g.isMDXComponent=!0},14658:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/image-20221030223638592-119d70b879966a1c6926fc511fd87e61.png"},94659:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/image-20221113130034914-bd5e0720698017d95583edc05675a2d6.png"},10451:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/image-20221113131524537-050867b128d3f15a03238489d5155a88.png"}}]);