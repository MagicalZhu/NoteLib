"use strict";(self.webpackChunkhuakucha=self.webpackChunkhuakucha||[]).push([[1113],{95267:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>o,toc:()=>u});var a=t(87462),r=(t(67294),t(3905));t(61839);const l={id:"\u4f9d\u8d56\u6ce8\u5165",title:"\u4f9d\u8d56\u6ce8\u5165"},i=void 0,o={unversionedId:"Spring/Spring\u7f16\u7a0b\u601d\u60f3/\u4f9d\u8d56\u6ce8\u5165",id:"Spring/Spring\u7f16\u7a0b\u601d\u60f3/\u4f9d\u8d56\u6ce8\u5165",title:"\u4f9d\u8d56\u6ce8\u5165",description:"1. \u4f9d\u8d56\u6ce8\u5165\u7684\u6a21\u5f0f\u4e0e\u7c7b\u578b",source:"@site/docs/Spring/Spring\u7f16\u7a0b\u601d\u60f3/1.4\u4f9d\u8d56\u6ce8\u5165.md",sourceDirName:"Spring/Spring\u7f16\u7a0b\u601d\u60f3",slug:"/Spring/Spring\u7f16\u7a0b\u601d\u60f3/\u4f9d\u8d56\u6ce8\u5165",permalink:"/docs/Spring/Spring\u7f16\u7a0b\u601d\u60f3/\u4f9d\u8d56\u6ce8\u5165",draft:!1,editUrl:"https://github.com/MagicalZhu/NoteLib/tree/main/docs/Spring/Spring\u7f16\u7a0b\u601d\u60f3/1.4\u4f9d\u8d56\u6ce8\u5165.md",tags:[],version:"current",lastUpdatedBy:"YuLiang Zhu",lastUpdatedAt:1670289592,formattedLastUpdatedAt:"2022\u5e7412\u67086\u65e5",frontMatter:{id:"\u4f9d\u8d56\u6ce8\u5165",title:"\u4f9d\u8d56\u6ce8\u5165"},sidebar:"springSideBar",previous:{title:"\u4f9d\u8d56\u67e5\u627e",permalink:"/docs/Spring/Spring\u7f16\u7a0b\u601d\u60f3/\u4f9d\u8d56\u67e5\u627e"}},p={},u=[{value:"1. \u4f9d\u8d56\u6ce8\u5165\u7684\u6a21\u5f0f\u4e0e\u7c7b\u578b",id:"1-\u4f9d\u8d56\u6ce8\u5165\u7684\u6a21\u5f0f\u4e0e\u7c7b\u578b",level:2},{value:"2.\u81ea\u52a8\u7ed1\u5b9a\uff08Autowiring\uff09",id:"2\u81ea\u52a8\u7ed1\u5b9aautowiring",level:2},{value:"2.1 \u81ea\u52a8\u7ed1\u5b9a\u7684\u4f7f\u7528\u573a\u666f",id:"21-\u81ea\u52a8\u7ed1\u5b9a\u7684\u4f7f\u7528\u573a\u666f",level:3},{value:"2.2 \u81ea\u52a8\u7ed1\u5b9a\u7684\u4e0d\u8db3\u4e4b\u5904",id:"22-\u81ea\u52a8\u7ed1\u5b9a\u7684\u4e0d\u8db3\u4e4b\u5904",level:3},{value:"2.3 \u81ea\u52a8\u7ed1\u5b9a\u4e0e@Autowired \u533a\u522b",id:"23-\u81ea\u52a8\u7ed1\u5b9a\u4e0eautowired-\u533a\u522b",level:3},{value:"3. Setter\u65b9\u6cd5\u6ce8\u5165",id:"3-setter\u65b9\u6cd5\u6ce8\u5165",level:2},{value:"3.1 \u57fa\u4e8eXML\u8d44\u6e90\u914d\u7f6e\u5143\u4fe1\u606f",id:"31-\u57fa\u4e8exml\u8d44\u6e90\u914d\u7f6e\u5143\u4fe1\u606f",level:3},{value:"3.2 \u57fa\u4e8ejava\u6ce8\u89e3\u914d\u7f6e\u5143\u4fe1\u606f",id:"32-\u57fa\u4e8ejava\u6ce8\u89e3\u914d\u7f6e\u5143\u4fe1\u606f",level:3},{value:"3.3 \u57fa\u4e8eapi\u914d\u7f6e\u5143\u4fe1\u606f",id:"33-\u57fa\u4e8eapi\u914d\u7f6e\u5143\u4fe1\u606f",level:3},{value:"4.\u6784\u9020\u5668\u6ce8\u5165",id:"4\u6784\u9020\u5668\u6ce8\u5165",level:2},{value:"4.1 \u57fa\u4e8eXml",id:"41-\u57fa\u4e8exml",level:3},{value:"4.2 \u57fa\u4e8ejava\u6ce8\u89e3",id:"42-\u57fa\u4e8ejava\u6ce8\u89e3",level:3},{value:"4.3 \u57fa\u4e8eapi\u7684\u65b9\u5f0f",id:"43-\u57fa\u4e8eapi\u7684\u65b9\u5f0f",level:3},{value:"5. \u5b57\u6bb5\u6ce8\u5165-&gt; \u5b9e\u4f8b\u5b57\u6bb5/\u5bf9\u8c61\u5b57\u6bb5",id:"5-\u5b57\u6bb5\u6ce8\u5165--\u5b9e\u4f8b\u5b57\u6bb5\u5bf9\u8c61\u5b57\u6bb5",level:2},{value:"5.1 @Autowired\u793a\u4f8b",id:"51-autowired\u793a\u4f8b",level:3},{value:"6.\u65b9\u6cd5\u6ce8\u5165",id:"6\u65b9\u6cd5\u6ce8\u5165",level:2},{value:"6.1 @Bean\u7684\u65b9\u5f0f",id:"61-bean\u7684\u65b9\u5f0f",level:3},{value:"6.2 @AutoWired\u7684\u65b9\u5f0f",id:"62-autowired\u7684\u65b9\u5f0f",level:3},{value:"7.Aware\u7cfb\u5217\u63a5\u53e3\u56de\u8c03\u6ce8\u5165",id:"7aware\u7cfb\u5217\u63a5\u53e3\u56de\u8c03\u6ce8\u5165",level:2},{value:"7.1 \u4ee3\u7801\u793a\u4f8b",id:"71-\u4ee3\u7801\u793a\u4f8b",level:3},{value:"8. \u4f9d\u8d56\u6ce8\u5165\u7c7b\u578b\u7684\u9009\u62e9",id:"8-\u4f9d\u8d56\u6ce8\u5165\u7c7b\u578b\u7684\u9009\u62e9",level:2},{value:"9. \u5176\u4ed6\u7c7b\u578b\u7684\u6ce8\u5165",id:"9-\u5176\u4ed6\u7c7b\u578b\u7684\u6ce8\u5165",level:2},{value:"9.1 \u57fa\u7840\u7c7b\u578b\u7684\u6ce8\u5165",id:"91-\u57fa\u7840\u7c7b\u578b\u7684\u6ce8\u5165",level:3},{value:"9.1.1 \u4ee3\u7801\u793a\u4f8b",id:"911-\u4ee3\u7801\u793a\u4f8b",level:4},{value:"9.2 \u96c6\u5408\u7c7b\u578b\u6ce8\u5165",id:"92-\u96c6\u5408\u7c7b\u578b\u6ce8\u5165",level:3},{value:"10. \u9650\u5b9a\u6ce8\u5165(@Qualifier)",id:"10-\u9650\u5b9a\u6ce8\u5165qualifier",level:2},{value:"10.1 \u901a\u8fc7Bean\u7684\u540d\u79f0\u8fdb\u884c\u9650\u5b9a",id:"101-\u901a\u8fc7bean\u7684\u540d\u79f0\u8fdb\u884c\u9650\u5b9a",level:3},{value:"10.2 Qualifier\u5206\u7ec4",id:"102-qualifier\u5206\u7ec4",level:3},{value:"11. \u5ef6\u8fdf\u4f9d\u8d56\u6ce8\u5165",id:"11-\u5ef6\u8fdf\u4f9d\u8d56\u6ce8\u5165",level:2},{value:"12. \u4f9d\u8d56\u67e5\u627e\u8fc7\u7a0b",id:"12-\u4f9d\u8d56\u67e5\u627e\u8fc7\u7a0b",level:2}],s={toc:u};function m(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"1-\u4f9d\u8d56\u6ce8\u5165\u7684\u6a21\u5f0f\u4e0e\u7c7b\u578b"},"1. \u4f9d\u8d56\u6ce8\u5165\u7684\u6a21\u5f0f\u4e0e\u7c7b\u578b"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"1.1 \u4f9d\u8d56\u6ce8\u5165\u7684\u6a21\u5f0f"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u624b\u52a8\u6a21\u5f0f -> \u914d\u7f6e\u6216\u8005\u7f16\u7a0b\u7684\u65b9\u5f0f\uff0c\u63d0\u524d\u5b89\u6392\u6ce8\u5165\u89c4\u5219",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"XML\u8d44\u6e90\u914d\u7f6e\u5143\u4fe1\u606f"),(0,r.kt)("li",{parentName:"ul"},"java\u6ce8\u89e3\u914d\u7f6e\u5143\u4fe1\u606f"),(0,r.kt)("li",{parentName:"ul"},"api\u914d\u7f6e\u5143\u4fe1\u606f"))),(0,r.kt)("li",{parentName:"ul"},"\u81ea\u52a8\u6a21\u5f0f -> \u5b9e\u73b0\u65b9\u63d0\u4f9b\u4f9d\u8d56\u81ea\u52a8\u5173\u8054\u7684\u65b9\u5f0f\uff0c\u6309\u7167\u5185\u5efa\u7684\u65b9\u5f0f\u6ce8\u5165\u89c4\u5219",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Autowiring (\u81ea\u52a8\u7ed1\u5b9a)")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"1.2 \u4f9d\u8d56\u6ce8\u5165\u7684\u7c7b\u578b"))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u4f9d\u8d56\u6ce8\u5165\u7684\u7c7b\u578b"),(0,r.kt)("th",{parentName:"tr",align:null},"\u914d\u7f6e\u5143\u6570\u636e\u4e3e\u4f8b"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("font",{color:"blue"},(0,r.kt)("inlineCode",{parentName:"td"},"Setter\u65b9\u6cd5"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},'<property name="user" ref="userBean"/>'))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("font",{color:"blue"},(0,r.kt)("inlineCode",{parentName:"td"},"\u6784\u9020\u5668"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},'<constructor-arg name="user" ref="userBean"/>'))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("font",{color:"blue"},(0,r.kt)("inlineCode",{parentName:"td"},"\u5b57\u6bb5"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@Autowired User user;"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("font",{color:"blue"},(0,r.kt)("inlineCode",{parentName:"td"},"\u65b9\u6cd5"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@Autowired public void user(User user){\u2026}"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("font",{color:"blue"},(0,r.kt)("inlineCode",{parentName:"td"},"\u63a5\u53e3\u56de\u8c03"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Class MyBean implements BeanFactoryAware{\u2026}"))))),(0,r.kt)("h2",{id:"2\u81ea\u52a8\u7ed1\u5b9aautowiring"},"2.\u81ea\u52a8\u7ed1\u5b9a\uff08Autowiring\uff09"),(0,r.kt)("h3",{id:"21-\u81ea\u52a8\u7ed1\u5b9a\u7684\u4f7f\u7528\u573a\u666f"},"2.1 \u81ea\u52a8\u7ed1\u5b9a\u7684\u4f7f\u7528\u573a\u666f"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Autowiring modes")," : ",(0,r.kt)("inlineCode",{parentName:"p"},"org.springframework.beans.factory.annotation.Autowire")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u6a21\u5f0f"),(0,r.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"no")),(0,r.kt)("td",{parentName:"tr",align:null},"\u9ed8\u8ba4\u503c\uff0c\u6ca1\u6709\u6fc0\u6d3b\u81ea\u52a8\u88c5\u914d\uff0c\u9700\u8981\u624b\u52a8\u6307\u5b9a\u4f9d\u8d56\u6ce8\u5165\u7684\u5bf9\u8c61")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"byName")),(0,r.kt)("td",{parentName:"tr",align:null},"\u6839\u636e\u88ab\u6ce8\u5165\u5c5e\u6027\u7684",(0,r.kt)("font",{color:"#f535e8"},"\u540d\u79f0"),"\u4f5c\u4e3aBean\u540d\u79f0\u8fdb\u884c\u4f9d\u8d56\u67e5\u627e\uff0c\u5e76\u5c06\u67e5\u627e\u5230\u7684\u5bf9\u8c61\u8bbe\u7f6e\u5230\u8be5\u5c5e\u6027")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"byType")),(0,r.kt)("td",{parentName:"tr",align:null},"\u6839\u636e\u88ab\u6ce8\u5165\u5c5e\u6027\u7684",(0,r.kt)("font",{color:"#f535e8"},"\u7c7b\u578b"),"\u4f5c\u4e3aBean\u540d\u79f0\u8fdb\u884c\u4f9d\u8d56\u67e5\u627e\uff0c\u5e76\u5c06\u67e5\u627e\u5230\u7684\u5bf9\u8c61\u8bbe\u7f6e\u5230\u8be5\u5c5e\u6027")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"constructor")),(0,r.kt)("td",{parentName:"tr",align:null},"\u7279\u6b8a\u7684 ",(0,r.kt)("font",{color:"#f535e8"},"byType")," \u7c7b\u578b\uff0c\u7528\u4e8e\u6784\u9020\u5668\u53c2\u6570")))),(0,r.kt)("h3",{id:"22-\u81ea\u52a8\u7ed1\u5b9a\u7684\u4e0d\u8db3\u4e4b\u5904"},"2.2 \u81ea\u52a8\u7ed1\u5b9a\u7684\u4e0d\u8db3\u4e4b\u5904"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"property"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"constructor-arg")," \u7684\u914d\u7f6e\u4fe1\u606f\u4f1a\u8986\u76d6\u6389\u81ea\u52a8\u7ed1\u5b9a\uff0c\u5e76\u4e14\u65e0\u6cd5\u5bf9",(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"li"},"primitives"),"(\u57fa\u672c\u7c7b\u578b)"),"\u3001String\u3001Classes \u8fdb\u884c\u81ea\u52a8\u7ed1\u5b9a"),(0,r.kt)("li",{parentName:"ol"},"\u81ea\u52a8\u7ed1\u5b9a\u4e0d\u662f\u5f88\u7cbe\u786e")),(0,r.kt)("h3",{id:"23-\u81ea\u52a8\u7ed1\u5b9a\u4e0eautowired-\u533a\u522b"},"2.3 \u81ea\u52a8\u7ed1\u5b9a\u4e0e@Autowired \u533a\u522b"),(0,r.kt)("admonition",{title:"\u533a\u5206\u81ea\u52a8\u7ed1\u5b9a\u4e0e @Autowired",type:"danger"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"\u81ea\u52a8\u7ed1\u5b9a\u662f\u8fd9\u4e2aBean\u7684AbstractBeanDefinition#autowireMode \u8bbe\u7f6e\u4e3abyName/byType\uff0c\u7136\u540eSpring\u4f1a\u81ea\u52a8\u5c06\u5bb9\u5668\u4e2d\u6ee1\u8db3\u6761\u4ef6\u7684Bean\u6ce8\u5165\u5230\u5c5e\u6027\u4e2d -> \u4e0d\u7528@Autowired \u6ce8\u89e3\u4e5f\u4f1a\u6ce8\u5165\u5230\u5bb9\u5668\u4e2d"),(0,r.kt)("li",{parentName:"ul"},"@Autowired \u5219\u662f\u624b\u52a8\u4ece\u5bb9\u5668\u4e2d\u67e5\u627e\u6307\u5b9a\u7684Bean\u8fdb\u884c\u6ce8\u5165",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u662f\u4ee5byType\u7684\u65b9\u5f0f\u8fdb\u884c\u67e5\u627e"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u6709\u591a\u4e2a\u7c7b\u578b\u5339\u914d\u7684Bean\uff0c\u5c31\u4f1a\u901a\u8fc7\u5c5e\u6027\u540d+byName\u7684\u65b9\u5f0f\u8fdb\u884c\u4f9d\u8d56\u67e5\u627e"))))),(0,r.kt)("h2",{id:"3-setter\u65b9\u6cd5\u6ce8\u5165"},"3. Setter\u65b9\u6cd5\u6ce8\u5165"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5b9e\u73b0\u65b9\u6cd5")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u624b\u52a8\u6a21\u5f0f",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"XML\u8d44\u6e90\u914d\u7f6e\u4fe1\u606f"),(0,r.kt)("li",{parentName:"ul"},"java\u6ce8\u89e3\u914d\u7f6e\u5143\u4fe1\u606f"),(0,r.kt)("li",{parentName:"ul"},"api\u914d\u7f6e\u5143\u4fe1\u606f"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("del",{parentName:"li"},"\u81ea\u52a8\u6a21\u5f0f"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"byType"),(0,r.kt)("li",{parentName:"ul"},"byName")))),(0,r.kt)("h3",{id:"31-\u57fa\u4e8exml\u8d44\u6e90\u914d\u7f6e\u5143\u4fe1\u606f"},"3.1 \u57fa\u4e8eXML\u8d44\u6e90\u914d\u7f6e\u5143\u4fe1\u606f"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u2460\u3001XML\u8d44\u6e90\u914d\u7f6e")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<bean id="setterBean"  class="com.geekbang.dependencyInjectionDemo.pojo.User">\n  <property name="age" value="22"/>\n  <property name="name" value="yoey"/>\n</bean>\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u2461\u3001\u5c06Bean\u6ce8\u5165\u5bb9\u5668\u5e76\u4e14\u8fdb\u884c\u4f9d\u8d56\u67e5\u627e")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class SetterInjectionDemo {\n  public static void main(String[] args) {\n    ClassPathXmlApplicationContext ctx =  new ClassPathXmlApplicationContext("classpath:/application-dependency-injection.xml");\n    System.out.println(ctx.getBean("setterBean"));\n  }\n}\n')),(0,r.kt)("h3",{id:"32-\u57fa\u4e8ejava\u6ce8\u89e3\u914d\u7f6e\u5143\u4fe1\u606f"},"3.2 \u57fa\u4e8ejava\u6ce8\u89e3\u914d\u7f6e\u5143\u4fe1\u606f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public static void main(String[] args) {\n  AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\n  ctx.register(SetterInjectionDemo.class);\n  ctx.refresh();\n  System.err.println(ctx.getBean("user"));\n  ctx.close();\n}\n@Bean\npublic User user(){\n  User user =  new User();\n  user.setAge(22);\n  user.setName("yoey");\n  return user;\n}\n')),(0,r.kt)("h3",{id:"33-\u57fa\u4e8eapi\u914d\u7f6e\u5143\u4fe1\u606f"},"3.3 \u57fa\u4e8eapi\u914d\u7f6e\u5143\u4fe1\u606f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public static void main(String[] args) {\n  DefaultListableBeanFactory beanFactory = new DefaultListableBeanFactory();\n  RootBeanDefinition userBean = new RootBeanDefinition();\n  userBean.setBeanClass(User.class);\n\n  MutablePropertyValues values = new MutablePropertyValues();\n  values.add("age",22);\n  values.add("name","yoey");\n  userBean.setPropertyValues(values);\n  beanFactory.registerBeanDefinition("user",userBean);\n  System.err.println("\u6ce8\u5165\u4e00\u4e2aBeanDefinition...");\n  // \u6ca1\u6709\u521d\u59cb\u5316\u5316\u7684Bean,\u5728\u8c03\u7528getBean\u65b9\u6cd5\u65f6\u4f1a\u8fdb\u884c\u521d\u59cb\u5316\n  System.err.println(beanFactory.getBean("user"));\n}\n\n/*\n    \u6ce8\u5165\u4e00\u4e2aBeanDefinition...\n    User \u65e0\u53c2\u6784\u9020\u5668\u8c03\u7528...\n    \u521d\u59cb\u5316 User name \u5c5e\u6027...\n    User{age=22, name=\'yoey\'}\n*/\n')),(0,r.kt)("h2",{id:"4\u6784\u9020\u5668\u6ce8\u5165"},"4.\u6784\u9020\u5668\u6ce8\u5165"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5b9e\u73b0\u65b9\u6cd5")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u624b\u52a8\u6a21\u5f0f",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"XML\u8d44\u6e90\u914d\u7f6e\u4fe1\u606f"),(0,r.kt)("li",{parentName:"ul"},"java\u6ce8\u89e3\u914d\u7f6e\u5143\u4fe1\u606f"),(0,r.kt)("li",{parentName:"ul"},"api\u914d\u7f6e\u5143\u4fe1\u606f"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("del",{parentName:"li"},"\u81ea\u52a8\u6a21\u5f0f"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"constructor")))),(0,r.kt)("h3",{id:"41-\u57fa\u4e8exml"},"4.1 \u57fa\u4e8eXml"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!--  constructor\u6ce8\u5165  --\x3e\n<bean id="constructorBean" class="com.geekbang.dependencyInjectionDemo.pojo.User">\n  <constructor-arg name="age" value="22"/>\n  <constructor-arg name="name" value="yoey2"/>\n</bean>\n')),(0,r.kt)("h3",{id:"42-\u57fa\u4e8ejava\u6ce8\u89e3"},"4.2 \u57fa\u4e8ejava\u6ce8\u89e3"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public static void main(String[] args) {\n  AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\n  ctx.register(ConstructorInjectionDemo.class);\n  ctx.refresh();\n  System.err.println(ctx.getBean("user"));\n}\n\n@Bean\npublic User user(){\n  return new User(22,"yoey2");\n}\n')),(0,r.kt)("h3",{id:"43-\u57fa\u4e8eapi\u7684\u65b9\u5f0f"},"4.3 \u57fa\u4e8eapi\u7684\u65b9\u5f0f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public static void main(String[] args) {\n  DefaultListableBeanFactory beanFactory = new DefaultListableBeanFactory();\n  RootBeanDefinition userBean = new RootBeanDefinition();\n  userBean.setBeanClass(User.class);\n\n  ConstructorArgumentValues values = new ConstructorArgumentValues();\n  values.addIndexedArgumentValue(0,22);\n  values.addIndexedArgumentValue(1,"yoey2");\n  userBean.setConstructorArgumentValues(values);\n  beanFactory.registerBeanDefinition("user",userBean);\n  System.err.println("\u6ce8\u5165\u4e00\u4e2aBeanDefinition...");\n  // \u6ca1\u6709\u521d\u59cb\u5316\u5316\u7684Bean,\u5728\u8c03\u7528getBean\u65b9\u6cd5\u65f6\u4f1a\u8fdb\u884c\u521d\u59cb\u5316\n  System.err.println(beanFactory.getBean("user"));\n}\n\n/*\n    \u6ce8\u5165\u4e00\u4e2aBeanDefinition...\n    User \u6709\u53c2\u6784\u9020\u5668\u8c03\u7528...name:yoey2\n    User{age=22, name=\'yoey2\'}\n*/\n')),(0,r.kt)("h2",{id:"5-\u5b57\u6bb5\u6ce8\u5165--\u5b9e\u4f8b\u5b57\u6bb5\u5bf9\u8c61\u5b57\u6bb5"},"5. \u5b57\u6bb5\u6ce8\u5165-> \u5b9e\u4f8b\u5b57\u6bb5/\u5bf9\u8c61\u5b57\u6bb5"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5b9e\u73b0\u65b9\u5f0f")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u624b\u52a8\u65b9\u5f0f",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Java \u6ce8\u89e3\u914d\u7f6e\u5143\u4fe1\u606f",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@AutoWired"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("font",{color:"red"},"@Autowired \u4f1a\u5ffd\u7565\u6389\u9759\u6001\u7684\u5b57\u6bb5")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@Resource")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@Inject"),"\u3010\u53ef\u9009\uff0c\u9700\u8981jsr330\u7684\u4f9d\u8d56\u3011")))))),(0,r.kt)("h3",{id:"51-autowired\u793a\u4f8b"},"5.1 @Autowired\u793a\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Autowired\nprivate  User user;\n\npublic static void main(String[] args) {\n  AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\n  ctx.register(AutowiredFieldInjectionDemo.class);\n  // \u52a0\u8f7dxml\u4e2d\u7684bean\n  String xmlResource = "classpath:/application-dependency-injection.xml";\n  XmlBeanDefinitionReader reader = new XmlBeanDefinitionReader(ctx);\n  reader.loadBeanDefinitions(xmlResource);\n  ctx.refresh();\n  System.out.println(ctx.getBean(AutowiredFieldInjectionDemo.class).user);\n  //System.out.println(user);  //\u8f93\u51fanull\n}\n')),(0,r.kt)("h2",{id:"6\u65b9\u6cd5\u6ce8\u5165"},"6.\u65b9\u6cd5\u6ce8\u5165"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5b9e\u73b0\u65b9\u5f0f")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u624b\u52a8\u6a21\u5f0f",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"java \u6ce8\u89e3\u914d\u7f6e\u5143\u4fe1\u606f",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@Autowired")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@Resource")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@Inject"),"\u3010\u53ef\u9009\uff0c\u9700\u8981jsr330\u7684\u4f9d\u8d56\u3011"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@Bean"))))))),(0,r.kt)("admonition",{title:"\u8bf4\u660e",type:"tip"},(0,r.kt)("font",{color:"red"},"\u65b9\u6cd5\u6ce8\u5165\u65f6,\u9ed8\u8ba4\u901a\u8fc7\u7c7b\u578b\u8fdb\u884c\u5339\u914d; \u5982\u679c\u6709\u591a\u4e2abean\u6ee1\u8db3\u4e00\u4e2a\u7c7b\u578b,\u5c31\u4f1a\u628a\u5f62\u53c2\u540d\u4f5c\u4e3abean \u7684\u540d\u79f0\u8fdb\u884c\u67e5\u627e\u6ce8\u5165")),(0,r.kt)("h3",{id:"61-bean\u7684\u65b9\u5f0f"},"6.1 @Bean\u7684\u65b9\u5f0f"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u2460\u3001xml\u4e2d\u914d\u7f6e\u4e00\u4e2aBean")),(0,r.kt)("p",null,"\u6ce8\u5165\u4e24\u4e2aUser\u7c7b\u578b\u7684Bean\u4ee5\u53ca\u4e00\u4e2aAddress\u7c7b\u578b\u7684Bean"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<bean id="user"  class="com.geekbang.dependencyInjectionDemo.pojo.User">\n  <property name="age" value="22"/>\n  <property name="name" value="yoey"/>\n</bean>\n\n<bean id="user2"  class="com.geekbang.dependencyInjectionDemo.pojo.User">\n  <property name="age" value="22"/>\n  <property name="name" value="yoey2"/>\n</bean>\n\n<bean id="address" class="com.geekbang.MyDemo1.Pojo.Address">\n  <property name="name" value="changzhou"/>\n</bean>\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u2461\u3001\u6d4b\u8bd5\u4f7f\u7528 @Bean\u8fdb\u884c\u65b9\u6cd5\u6ce8\u5165")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7531\u4e8e\u6709\u4e24\u4e2a\u7c7b\u578b\u4e3aUser \u7684Bean","[user\u3001user2]","\uff0c\u6240\u4ee5\u65b9\u6cd5\u6ce8\u5165\u65f6\uff0c\u628a\u5f62\u53c2\u540d\u79f0\u4f5c\u4e3abean\u7684\u540d\u79f0\u4ece\u5bb9\u5668\u4e2d\u67e5\u627e\u5e76\u6ce8\u5165"),(0,r.kt)("li",{parentName:"ul"},"Address\u7c7b\u578b\u7684bean\u53ea\u6709\u4e00\u4e2a\uff0c\u6240\u4ee5\u662f\u901a\u8fc7\u9ed8\u8ba4\u7684\u7c7b\u578b\u67e5\u627e")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public static void byBeanAnnotation(){\n  AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\n  ctx.register(MethodInjectionDemo.class);\n  // \u52a0\u8f7dxml\u4e2d\u7684bean\n  String xmlResource = "classpath:/application-dependency-injection.xml";\n  XmlBeanDefinitionReader reader = new XmlBeanDefinitionReader(ctx);\n  reader.loadBeanDefinitions(xmlResource);\n  ctx.refresh();\n  System.err.println("bean1----\x3e"+ctx.getBean("bean1"));\n  /*\n    \u8f93\u51fa\n    User \u65e0\u53c2\u6784\u9020\u5668\u8c03\u7528...\n    \u521d\u59cb\u5316 User name \u5c5e\u6027...\n    User \u65e0\u53c2\u6784\u9020\u5668\u8c03\u7528...\n    \u521d\u59cb\u5316 User name \u5c5e\u6027...\n    bean1----\x3eyoey:yoey2:changzhou\n  */\n}\n\n/**\n* \u5728 Xml\u8d44\u6e90\u914d\u7f6e\u4e2d\u5305\u542b\u4e24\u4e2aUser\u7c7b\u578b\u7684Bean[user\u4e0euser2]\u4ee5\u53ca\u4e00\u4e2aAddress\u7c7b\u578b\u7684Bean[address]\n*/\n@Bean\npublic String bean1(User user, User user2, Address address2){\n  return user.getName()+":"+user2.getName()+":"+address2.getName();\n}\n')),(0,r.kt)("h3",{id:"62-autowired\u7684\u65b9\u5f0f"},"6.2 @AutoWired\u7684\u65b9\u5f0f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public static void byBeanAnnotation(){\n  AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\n  ctx.register(MethodInjectionDemo.class);\n  // \u52a0\u8f7dxml\u4e2d\u7684bean\n  String xmlResource = "classpath:/application-dependency-injection.xml";\n  XmlBeanDefinitionReader reader = new XmlBeanDefinitionReader(ctx);\n  reader.loadBeanDefinitions(xmlResource);\n  ctx.refresh();\n}\n\n/**\n* \u901a\u8fc7 {@link Autowired} \u8fdb\u884c\u65b9\u6cd5\u6ce8\u5165\n*/\nprivate User user1;\nprivate User user2;\nprivate Address address;\n\n@Autowired\npublic void byAutowired(User user2, User user, Address address2){\n  this.user1 = user;\n  this.user2 = user2;\n  this.address = address2;\n  System.out.println( "byAutowired->"+user1.getName()+":"+user2.getName()+":"+address.getName());\n}\n\n/*\n    \u8f93\u51fa:\n    User \u65e0\u53c2\u6784\u9020\u5668\u8c03\u7528...\n  \u521d\u59cb\u5316 User name \u5c5e\u6027...\n  User \u65e0\u53c2\u6784\u9020\u5668\u8c03\u7528...\n  \u521d\u59cb\u5316 User name \u5c5e\u6027...\n  byAutowired->yoey:yoey2:changzhou\n*/\n')),(0,r.kt)("h2",{id:"7aware\u7cfb\u5217\u63a5\u53e3\u56de\u8c03\u6ce8\u5165"},"7.Aware\u7cfb\u5217\u63a5\u53e3\u56de\u8c03\u6ce8\u5165"),(0,r.kt)("admonition",{title:"\u8bf4\u660e",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"\u53ef\u4ee5\u6ce8\u5165\u4e00\u4e9bSpring\u5185\u5efa\u7684\u7ec4\u4ef6")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u81ea\u52a8\u6a21\u5f0f")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u5185\u5efa\u63a5\u53e3"),(0,r.kt)("th",{parentName:"tr",align:null},"\u4f5c\u7528\u8bf4\u660e"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"td"},"BeanFactoryAware"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"\u83b7\u53d6IOC\u5bb9\u5668-BeanFactory"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"td"},"ApplicationContextAware"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"\u83b7\u53d6Spring\u5e94\u7528\u4e0a\u4e0b\u6587- ApplicationContext"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"td"},"EnvironmentAware"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"\u83b7\u53d6Environment\u5bf9\u8c61"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"td"},"ResourceLoaderAware"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"\u83b7\u53d6\u8d44\u6e90\u52a0\u8f7d\u5668\u5bf9\u8c61-ResourceLoader"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"td"},"BeanClassLoaderAware"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"\u83b7\u53d6\u52a0\u8f7d\u5f53\u524dBean Class \u7684ClassLoader"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"td"},"BeanNameAware"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"\u83b7\u53d6\u5f53\u524dBean\u7684\u540d\u79f0"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"td"},"MessageSourceAware"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"\u83b7\u53d6MessageSource\u5bf9\u8c61"),"\uff0c\u7528\u4e8eSpring\u7684\u56fd\u9645\u5316")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"td"},"ApplicationEventPublisherAware"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"\u83b7\u53d6ApplicationEventPublisher\u5bf9\u8c61"),"\uff0c\u5904\u7406Spring\u7684\u4e8b\u4ef6")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"td"},"EmbeddedValueResolverAware"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"\u83b7\u53d6StringValueResolver\u5bf9\u8c61"),"\uff0c\u7528\u4e8e\u5360\u4f4d\u7b26\u5904\u7406")))),(0,r.kt)("h3",{id:"71-\u4ee3\u7801\u793a\u4f8b"},"7.1 \u4ee3\u7801\u793a\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class AwareInterfaceInjectionDemo implements BeanFactoryAware, ApplicationContextAware {\n  private static BeanFactory beanFactory;\n  private static ApplicationContext applicationContext;\n\n  public static void main(String[] args) {\n    AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\n    ctx.register(AwareInterfaceInjectionDemo.class);\n    ctx.refresh();\n    System.err.println("\u901a\u8fc7ApplicationContextAware \u6ce8\u5165\u7684Spring\u5e94\u7528\u4e0a\u4e0b\u6587ApplicationContext \u662f\u5426\u4e0e\u5f53\u524d\u7684\u4e0a\u4e0b\u6587\u5bf9\u8c61\u76f8\u7b49:"+(ctx == applicationContext));\n    System.err.println("\u901a\u8fc7BeanFactoryAware \u6ce8\u5165\u7684IOC\u5bb9\u5668 BeanFactory \u662f\u5426\u4e0e\u5f53\u524d\u7684IOC\u5bb9\u5668\u76f8\u7b49:"+(beanFactory == ctx.getBeanFactory()));\n    ctx.close();\n  }\n  @Override\n  public void setBeanFactory(BeanFactory beanFactory) throws BeansException {\n    AwareInterfaceInjectionDemo.beanFactory = beanFactory;\n  }\n\n  @Override\n  public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\n    AwareInterfaceInjectionDemo.applicationContext = applicationContext;\n  }\n}\n\n/*\n    \u901a\u8fc7ApplicationContextAware \u6ce8\u5165\u7684Spring\u5e94\u7528\u4e0a\u4e0b\u6587ApplicationContext \u662f\u5426\u4e0e\u5f53\u524d\u7684\u4e0a\u4e0b\u6587\u5bf9\u8c61\u76f8\u7b49:true\n    \u901a\u8fc7BeanFactoryAware \u6ce8\u5165\u7684IOC\u5bb9\u5668 beanFactory \u662f\u5426\u4e0e\u5f53\u524d\u7684IOC\u5bb9\u5668\u76f8\u7b49:true\n*/\n\n')),(0,r.kt)("h2",{id:"8-\u4f9d\u8d56\u6ce8\u5165\u7c7b\u578b\u7684\u9009\u62e9"},"8. \u4f9d\u8d56\u6ce8\u5165\u7c7b\u578b\u7684\u9009\u62e9"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u6ce8\u5165\u9009\u578b"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4f4e\u4f9d\u8d56: \u6784\u9020\u5668\u6ce8\u5165"),(0,r.kt)("li",{parentName:"ul"},"\u591a\u4f9d\u8d56: Setter\u6ce8\u5165"),(0,r.kt)("li",{parentName:"ul"},"\u4fbf\u5229\u6027: \u5b57\u6bb5\u6ce8\u5165"),(0,r.kt)("li",{parentName:"ul"},"\u58f0\u660e\u7c7b: \u65b9\u6cd5\u6ce8\u5165")))),(0,r.kt)("h2",{id:"9-\u5176\u4ed6\u7c7b\u578b\u7684\u6ce8\u5165"},"9. \u5176\u4ed6\u7c7b\u578b\u7684\u6ce8\u5165"),(0,r.kt)("admonition",{title:"\u6ce8\u610f",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Spring\u8fdb\u884c\u4f9d\u8d56\u6ce8\u5165\u7684\u65f6\u5019\uff0c\u4e0d\u4ec5\u4ec5\u53ef\u4ee5\u662f\u5e38\u89c1\u7684\u5bf9\u8c61\uff0c\u8fd8\u53ef\u4ee5\u6709\u66f4\u52a0\u590d\u6742\u7684\u7c7b\u578b\u6ce8\u5165")),(0,r.kt)("h3",{id:"91-\u57fa\u7840\u7c7b\u578b\u7684\u6ce8\u5165"},"9.1 \u57fa\u7840\u7c7b\u578b\u7684\u6ce8\u5165"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u57fa\u7840\u7c7b\u578b",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u539f\u751f\u7c7b\u578b(Primitive): boolean\u3001byte\u3001char\u3001short\u3001int\u3001float\u3001double\u3001long"),(0,r.kt)("li",{parentName:"ul"},"\u6807\u91cf\u7c7b\u578b(Scalar): Number\u3001Character\u3001Boolean\u3001Enum\u3001Locale\u3001Charset\u3001Currency\u3001Properties\u3001UUID"),(0,r.kt)("li",{parentName:"ul"},"\u5e38\u89c4\u7c7b\u578b(General): Object\u3001String\u3001TimeZone\u3001Calendar\u3001Optional\u7b49"),(0,r.kt)("li",{parentName:"ul"},"Spring\u7c7b\u578b: Resource\u3001InputSource\u3001Formatter\u7b49")))),(0,r.kt)("h4",{id:"911-\u4ee3\u7801\u793a\u4f8b"},"9.1.1 \u4ee3\u7801\u793a\u4f8b"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u2460\u3001 \u5b9a\u4e49JavaBean\u5bf9\u8c61")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public class Person {\n    /**\n     * \u5305\u542b \u539f\u751f\u7c7b\u578b:int /\u6807\u91cf\u7c7b\u578b:Enum / \u5e38\u89c4\u7c7b\u578b:String / Spring\u5bf9\u8c61: Resource\n     */\n    private int age;\n    private String name;\n    private City city;\n    private Resource configPath;\n        // getter\u3001setter\u3001toString \u65b9\u6cd5\n}\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u2461\u3001 Xml\u8d44\u6e90\u914d\u7f6e")),(0,r.kt)("p",null,"\u5728\u8fdb\u884csetter\u6ce8\u5165\u65f6\uff0c\u53ef\u4ee5\u6ce8\u5165\u4e0a\u8ff0\u7684\u7c7b\u578b -> int\u3001String\u3001Enum\u3001Resoure\u7b49\u7b49"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<bean id = "basicInjectionBean" class="com.geekbang.dependencyInjectionDemo.pojo.Person">\n  <property name="age" value="22"/>\n  <property name="name" value="yoey"/>\n  <property name="city" value="NanJing"/>\n  <property name="configPath" value="classpath:/userConfig.properties"/>\n</bean>\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u2462\u3001\u5bb9\u5668\u52a0\u8f7dXML\u914d\u7f6e\u4fe1\u606f\u5e76\u8fdb\u884c\u4f9d\u8d56\u67e5\u627e")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class BasicInjectionDemo {\n    public static void main(String[] args) {\n        ClassPathXmlApplicationContext ctx = new ClassPathXmlApplicationContext();\n        ctx.setConfigLocation("classpath:/application-dependency-injection.xml");\n        ctx.refresh();\n        Person person = ctx.getBean("basicInjectionBean", Person.class);\n        System.err.println(person); \n        ctx.close();\n    }\n}\n/*\n    Person{age=22, name=\'yoey\', city=NanJing, configPath=class path resource [userConfig.properties]}\n*/\n')),(0,r.kt)("h3",{id:"92-\u96c6\u5408\u7c7b\u578b\u6ce8\u5165"},"9.2 \u96c6\u5408\u7c7b\u578b\u6ce8\u5165"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u96c6\u5408\u7c7b\u578b",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6570\u7ec4\u7c7b\u578b(Array): \u539f\u751f\u7c7b\u578b\u3001\u6807\u91cf\u7c7b\u578b\u3001\u5e38\u89c4\u7c7b\u578b\u3001Spring\u7c7b\u578b"),(0,r.kt)("li",{parentName:"ul"},"\u96c6\u5408\u7c7b\u578b(Collection)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Collection: List\u3001Set"),(0,r.kt)("li",{parentName:"ul"},"Map: Properties")))))),(0,r.kt)("h2",{id:"10-\u9650\u5b9a\u6ce8\u5165qualifier"},"10. \u9650\u5b9a\u6ce8\u5165(@Qualifier)"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u6ce8\u89e3 ",(0,r.kt)("inlineCode",{parentName:"li"},"@Qualifier")," \u9650\u5b9a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7Bean\u7684\u540d\u79f0\u9650\u5b9a"),(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7\u5206\u7ec4\u9650\u5b9a"))),(0,r.kt)("li",{parentName:"ul"},"\u57fa\u4e8e\u6ce8\u89e3 ",(0,r.kt)("inlineCode",{parentName:"li"},"@Qualifier")," \u62d3\u5c55\u9650\u5b9a",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u6ce8\u89e3 ->  \u6bd4\u5982SpringCloud\u7684 @LoadBalanced")))),(0,r.kt)("admonition",{title:"\u6ce8\u610f",type:"danger"},(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("font",{color:"red"},"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2aBean\u9650\u5b9a\u540d\u5c31\u662fBean\u7684\u540d\u79f0\uff0c\u5728\u8fdb\u884c\u4f9d\u8d56\u6ce8\u5165\u7684\u65f6\u5019\u53ef\u4ee5\u901a\u8fc7@Qualifier\u6ce8\u89e3\u6307\u5b9a\u6ce8\u5165\u54ea\u4e2a\u9650\u5b9a\u540d\u7684Bean\u3010\u8fc7\u6ee4\u3011")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("font",{color:"red"},"\u53ef\u4ee5\u624b\u52a8\u7684\u901a\u8fc7@Qualifier\u6ce8\u89e3\u6307\u5b9a\u4e00\u4e2aBean\u7684\u9650\u5b9a\u540d\uff0c\u5e76\u4e14\u591a\u4e2aBean\u7684\u9650\u5b9a\u540d\u53ef\u4ee5\u76f8\u540c")))),(0,r.kt)("h3",{id:"101-\u901a\u8fc7bean\u7684\u540d\u79f0\u8fdb\u884c\u9650\u5b9a"},"10.1 \u901a\u8fc7Bean\u7684\u540d\u79f0\u8fdb\u884c\u9650\u5b9a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5bb9\u5668\u4e2d\u5305\u542b\u4e24\u4e2aUser\u7c7b\u578b\u7684Bean","[user1\u3001user2]","\uff0c\u901a\u8fc7@Qualifier\u6ce8\u89e3\uff0c\u53ef\u4ee5\u6307\u5b9a\u67e5\u627ebeanName\u662fuser1\u7684\u7684Bean")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("font",{color:"red"},"\u64cd\u4f5c\u6b65\u9aa4"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5728\u624b\u52a8\u6ce8\u5165Bean\u7684\u65f6\u5019\uff0c\u52a0\u4e0a ",(0,r.kt)("inlineCode",{parentName:"li"},"@Qualifier")," \u6ce8\u89e3\uff0c\u5e76\u4e14\u8bbe\u7f6e\u8be5\u6ce8\u89e3\u7684value\u5c5e\u6027\u4e3aBean\u7684\u540d\u79f0")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class QualifierDemo {\n    @Autowired\n    @Qualifier("user1")  // \u901a\u8fc7qualifier \u6307\u5b9aBean\u7684\u540d\u79f0\u8fdb\u884c\u4f9d\u8d56\u67e5\u627e\n    private User yoey;\n\n\n    public static void main(String[] args) {\n        AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\n        ctx.register(QualifierDemo.class);\n        ctx.refresh();\n        QualifierDemo demo = ctx.getBean(QualifierDemo.class);\n        System.err.println("Qualifier\u9650\u5b9aBean\u7684\u540d\u79f0\u67e5\u627e:"+demo.yoey);\n        ctx.close();\n    }\n\n    @Bean\n    public User user1(){\n        return new User(11,"11");\n    }\n\n    @Bean\n    public User user2(){\n        return new User(22,"22");\n    }\n}\n/*\n    Qualifier\u9650\u5b9aBean\u7684\u540d\u79f0\u67e5\u627e:User{age=11, name=\'11\'}\n*/\n')),(0,r.kt)("h3",{id:"102-qualifier\u5206\u7ec4"},"10.2 Qualifier\u5206\u7ec4"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u64cd\u4f5c\u6b65\u9aa4",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\u5bf9\u591a\u4e2aBean\u8bbe\u7f6e\u76f8\u540c\u7684\u9650\u5b9a\u540d\u79f0 -> \u76f8\u540c\u7684Bean\u8fdb\u884c\u5206\u7ec4"),(0,r.kt)("li",{parentName:"ol"},"\u4f9d\u8d56\u6ce8\u5165\u7684\u65f6\u5019\uff0c\u901a\u8fc7@Qualifier \u6ce8\u89e3\uff0c\u5c06\u7b26\u5408\u9650\u5b9a\u540d\u7684\u4e00\u7c7bBean\u6ce8\u5165\u8fdb\u6765")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4ee3\u7801\u793a\u4f8b")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6ce8\u5165\u56db\u4e2aUser\u7c7b\u578b\u7684Bean\uff0c\u5176\u4e2d\u9650\u5b9a\u540d\u4e3a\u201cgroup1\u201d\u7684\u6709","[user1\u3001user2]",", ","[user3\u3001user4]","\u7684Bean\u4e5f\u52a0\u4e0a\u4e86@Qualifier\u6ce8\u89e3\uff0c\u6ca1\u6709\u6307\u5b9a\u9650\u5b9a\u540d\uff0c\u9ed8\u8ba4\u662f\u7a7a"),(0,r.kt)("li",{parentName:"ul"},'\u5728 @AutoWired \u6ce8\u89e3\u624b\u52a8\u6ce8\u5165Bean\u7684\u65f6\u5019\uff0c\u901a\u8fc7\u6307\u5b9a @Qualifier("group1\u201d) \u5c06\u9650\u5b9a\u540d\u4e3a\u201cgroup1\u201d \u7684Bean\u6ce8\u5165\u5230group1Users \u96c6\u5408\u4e2d')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class QualifierDemo2 {\n    @Autowired\n    @Qualifier\n    private List<User> allUsers;\n\n    @Autowired\n    @Qualifier("group1")\n    private List<User> group1Users;\n\n\n    public static void main(String[] args) {\n        AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\n        ctx.register(QualifierDemo2.class);\n        ctx.refresh();\n        QualifierDemo2 demo = ctx.getBean(QualifierDemo2.class);\n        System.err.println("\u6240\u6709\u7684User\u7c7b\u578b\u7684Bean:"+demo.allUsers);\n        System.err.println("Qualifier\u5bf9Bean\u8fdb\u884c\u5206\u7ec4\u540e,group1\u7684Bean:"+demo.group1Users);\n        ctx.close();\n    }\n  /*\n    \u8f93\u51fa\n    \u6240\u6709\u7684User\u7c7b\u578b\u7684Bean:[User{age=33, name=\'33\'}, User{age=44, name=\'44\'}]\n        Qualifier\u5bf9Bean\u8fdb\u884c\u5206\u7ec4\u540e,group1\u7684Bean:[User{age=11, name=\'11\'}, User{age=22, name=\'22\'}]\n  */\n\n    @Bean\n    @Qualifier("group1")\n    public User user1(){\n        return new User(11,"11");\n    }\n\n    @Bean\n    @Qualifier("group1")\n    public User user2(){\n        return new User(22,"22");\n    }\n    @Bean\n    @Qualifier\n    public User user3(){\n        return new User(33,"33");\n    }\n\n    @Bean\n    @Qualifier\n    public User user4(){\n        return new User(44,"44");\n    }\n}\n')),(0,r.kt)("h2",{id:"11-\u5ef6\u8fdf\u4f9d\u8d56\u6ce8\u5165"},"11. \u5ef6\u8fdf\u4f9d\u8d56\u6ce8\u5165"),(0,r.kt)("font",{color:"red"},"\u901a\u8fc7 ObjectFactory/ObjectProvider \u7684\u65b9\u5f0f\uff0c\u53ef\u4ee5\u5ef6\u8fdf\u7684\u5c06\u5bb9\u5668\u4e2d\u7684\u4f9d\u8d56\u6ce8\u5165\u8fdb\u6765\uff0c\u5728\u8981\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u901a\u8fc7getXXX\u65b9\u6cd5\u83b7\u53d6\u5373\u53ef"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528 api ObjectFactory \u5ef6\u8fdf\u6ce8\u5165",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5355\u4e00\u7c7b\u578b"),(0,r.kt)("li",{parentName:"ul"},"\u96c6\u5408\u7c7b\u578b"))),(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528 api ObjectProvider \u5ef6\u8fdf\u6ce8\u5165 \u2705",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5355\u4e00\u7c7b\u578b"),(0,r.kt)("li",{parentName:"ul"},"\u96c6\u5408\u7c7b\u578b")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class LazyInjectionDemo {\n    @Autowired\n    private User user1;\n        \n    // \u5ef6\u8fdf\u6ce8\u5165User \u7c7b\u578b\u7684Bean\n    @Autowired\n    private ObjectProvider<User> objectProvider;\n\n    public static void main(String[] args) {\n        AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\n        ctx.register(LazyInjectionDemo.class);\n        ctx.refresh();\n        LazyInjectionDemo injectionDemo = ctx.getBean(LazyInjectionDemo.class);\n        System.err.println("\u901a\u8fc7@Autowired \u5b57\u6bb5\u6ce8\u5165\u7684Bean\u5bf9\u8c61 user1:"+ injectionDemo.user1);\n        injectionDemo.objectProvider.forEach(System.err::println);\n        ctx.close();\n    }\n  \n    /*\n        \u6ce8\u5165\u4e09\u4e2aUser\u7c7b\u578b\u7684Bean\n    */\n    @Bean\n    public User user1(){\n        return new User(11,"11");\n    }\n    @Bean\n    public User user2(){\n        return new User(22,"22");\n    }\n    @Bean\n    public User user3(){\n        return new User(33,"33");\n    }\n}\n')),(0,r.kt)("h2",{id:"12-\u4f9d\u8d56\u67e5\u627e\u8fc7\u7a0b"},"12. \u4f9d\u8d56\u67e5\u627e\u8fc7\u7a0b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u524d\u7f6e\u77e5\u8bc6",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"\u5165\u53e3")," -> DefaultListableBeanFactory#resolveDependency"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"\u4f9d\u8d56\u63cf\u8ff0\u7b26")," -> DependencyDescriptor"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"\u81ea\u52a8\u7ed1\u5b9a\u5019\u9009\u5bf9\u8c61\u5904\u7406\u5668")," -> AutowireCandidateResolver")))))}m.isMDXComponent=!0}}]);