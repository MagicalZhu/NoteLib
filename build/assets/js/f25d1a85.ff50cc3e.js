"use strict";(self.webpackChunkhuakucha=self.webpackChunkhuakucha||[]).push([[9603],{43215:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>k,frontMatter:()=>l,metadata:()=>p,toc:()=>u});var a=n(87462),i=(n(67294),n(3905));n(61839);const l={id:"Stream",title:"\u6d88\u606f\u9a71\u52a8-Stream"},r=void 0,p={unversionedId:"SpringCloud/Netflix/Stream",id:"SpringCloud/Netflix/Stream",title:"\u6d88\u606f\u9a71\u52a8-Stream",description:"1.\u6d88\u606f\u9a71\u52a8",source:"@site/docs/SpringCloud/Netflix/1.8\u6d88\u606f\u9a71\u52a8-Stream.md",sourceDirName:"SpringCloud/Netflix",slug:"/SpringCloud/Netflix/Stream",permalink:"/docs/SpringCloud/Netflix/Stream",draft:!1,editUrl:"https://github.com/MagicalZhu/NoteLib/tree/main/docs/SpringCloud/Netflix/1.8\u6d88\u606f\u9a71\u52a8-Stream.md",tags:[],version:"current",lastUpdatedBy:"YuLiang Zhu",lastUpdatedAt:1670289592,formattedLastUpdatedAt:"2022\u5e7412\u67086\u65e5",frontMatter:{id:"Stream",title:"\u6d88\u606f\u9a71\u52a8-Stream"},sidebar:"springCloudSideBar",previous:{title:"\u6d88\u606f\u603b\u7ebf-Bus",permalink:"/docs/SpringCloud/Netflix/Bus"},next:{title:"\u94fe\u8def\u8ffd\u8e2a-Sleuth",permalink:"/docs/SpringCloud/Netflix/Sleuth"}},o={},u=[{value:"1.\u6d88\u606f\u9a71\u52a8",id:"1\u6d88\u606f\u9a71\u52a8",level:2},{value:"1.1 \u6d88\u606f\u9a71\u52a8\u6982\u8ff0",id:"11-\u6d88\u606f\u9a71\u52a8\u6982\u8ff0",level:3},{value:"1.2 Stream\u7684\u4f7f\u7528",id:"12-stream\u7684\u4f7f\u7528",level:3},{value:"1.2.1 Stream-Rabbitmq \uff08\u751f\u4ea7\u8005\uff09",id:"121-stream-rabbitmq-\u751f\u4ea7\u8005",level:3},{value:"1.2.1.1 \u4ee3\u7801\u5b9e\u73b0",id:"1211-\u4ee3\u7801\u5b9e\u73b0",level:5},{value:"1.2.2 Stream-Rabbitmq \uff08\u6d88\u8d39\u8005\uff09",id:"122-stream-rabbitmq-\u6d88\u8d39\u8005",level:4},{value:"1.2.2.1 \u4ee3\u7801\u5b9e\u73b0",id:"1221-\u4ee3\u7801\u5b9e\u73b0",level:5},{value:"1.3 \u91cd\u590d\u6d88\u8d39\u95ee\u9898",id:"13-\u91cd\u590d\u6d88\u8d39\u95ee\u9898",level:3},{value:"1.3.1 \u901a\u8fc7Group\u5904\u7406\u91cd\u590d\u6d88\u8d39\u95ee\u9898",id:"131-\u901a\u8fc7group\u5904\u7406\u91cd\u590d\u6d88\u8d39\u95ee\u9898",level:4}],m={toc:u};function k(e){let{components:t,...l}=e;return(0,i.kt)("wrapper",(0,a.Z)({},m,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"1\u6d88\u606f\u9a71\u52a8"},"1.\u6d88\u606f\u9a71\u52a8"),(0,i.kt)("h3",{id:"11-\u6d88\u606f\u9a71\u52a8\u6982\u8ff0"},"1.1 \u6d88\u606f\u9a71\u52a8\u6982\u8ff0"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("font",{color:"red"},"Stream \xa0\u662f\u4ec0\u4e48\uff1f"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u6784\u5efa\u6d88\u606f\u9a71\u52a8\u5fae\u670d\u52a1\u7684\u6846\u67b6",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("font",{color:"red"},"\u53ef\u4ee5\u5c4f\u853d\u5e95\u5c42\u6d88\u606f\u4e2d\u95f4\u4ef6\u7684\u5dee\u5f02\uff0c\u964d\u4f4e\u5207\u6362\u6210\u672c\uff0c\u7edf\u4e00\u6d88\u606f\u7684\u7f16\u7a0b\u6a21\u578b")))),(0,i.kt)("li",{parentName:"ul"},"\u901a\u8fc7 ",(0,i.kt)("inlineCode",{parentName:"li"},"Spring Integration")," \u6765\u8fde\u63a5\u6d88\u606f\u4ee3\u7406\u4e2d\u95f4\u4ef6\u4ee5\u5b9e\u73b0\u6d88\u606f\u4e8b\u4ef6\u9a71\u52a8",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("font",{color:"blue"},"Stream \u4e3a\u4e00\u4e9b\u6d88\u606f\u4e2d\u95f4\u4ef6\u63d0\u4f9b\u4e86\u4e2a\u6027\u5316\u7684\u81ea\u52a8\u5316\u914d\u7f6e\uff0c\u5f15\u7528\u4e86",(0,i.kt)("code",null,"\u53d1\u5e03-\u8ba2\u9605\u3001\u6d88\u606f\u7ec4\u3001\u5206\u533a\u4e09\u4e2a\u6838\u5fc3\u6982\u5ff5"))))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("font",{color:"red"},"\u4e09\u4e2a\u6838\u5fc3\u6784\u5efa\u5757"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Binder"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u5e94\u7528\u4e0e\u6d88\u606f\u4e2d\u95f4\u4ef6\u4e4b\u95f4\u7684\u5c01\u88c5\uff0c\u76ee\u524d\u4ec5\u652f\u6301 ",(0,i.kt)("inlineCode",{parentName:"li"},"RabbitMq\xa0\u3001Kafka")),(0,i.kt)("li",{parentName:"ul"},"\u901a\u8fc7Binder\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u8fde\u63a5\u4e2d\u95f4\u4ef6\uff0c\u53ef\u4ee5\u52a8\u6001\u7684\u6539\u53d8\u6d88\u606f\u7c7b\u578b(Kakfa\u5bf9\u5e94topic\u3001RabbitMQ\u5bf9\u5e94exchange)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Input \u662f\u6d88\u8d39\u8005"),(0,i.kt)("li",{parentName:"ul"},"Output \u662f\u751f\u4ea7\u8005"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Binding")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Message"))))),(0,i.kt)("h3",{id:"12-stream\u7684\u4f7f\u7528"},"1.2 Stream\u7684\u4f7f\u7528"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("mark",null,"Stream\u4e09\u8981\u7d20"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("font",{color:"blue"},"Binder")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("font",{color:"blue"},"Channel"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u662f\u961f\u5217Queue\u7684\u4e00\u79cd\u62bd\u8c61\uff0c\u5728\u6d88\u606f\u901a\u8baf\u7cfb\u7edf\u4e2d\u5c31\u662f\u5b9e\u73b0\u5b58\u50a8\u548c\u8f6c\u53d1\u7684\u5a92\u4ecb\uff0c\u901a\u8fc7\u5bf9Channel\u5bf9\u961f\u5217\u8fdb\u884c\u914d\u7f6e"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("font",{color:"blue"},"Source\u548cSink"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Source \u662f\u8f93\u51faOutput"),(0,i.kt)("li",{parentName:"ul"},"Sink \u662f\u8f93\u5165input"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("mark",null,"\u5e38\u89c1\u7684\u7c7b\u548c\u6ce8\u89e3"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@Input"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u6807\u8bc6\u4e00\u4e2a\u8f93\u5165\u901a\u9053(\u6d88\u8d39\u8005)\uff0c\u901a\u8fc7\u8be5\u8f93\u5165\u901a\u9053\u63a5\u6536\u5230\u7684\u6d88\u606f\u8fdb\u5165\u5e94\u7528\u7a0b\u5e8f"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@Output"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u6807\u8bc6\u4e00\u4e2a\u8f93\u51fa\u901a\u9053(\u751f\u4ea7\u8005)\uff0c\u53d1\u5e03\u7684\u6d88\u606f\u901a\u8fc7\u8be5\u901a\u9053\u79bb\u5f00\u5e94\u7528\u7a0b\u5e8f"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@StreamListener"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u76d1\u542c\u961f\u5217\uff0c\u7528\u4e8e\u6d88\u8d39\u8005\u961f\u5217\u7684\u6d88\u606f\u63a5\u6536"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@EnableBinding"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u6307\u5b9aChannel \u548cExchange\u7ed1\u5b9a\u5728\u4e00\u8d77")))))),(0,i.kt)("h3",{id:"121-stream-rabbitmq-\u751f\u4ea7\u8005"},"1.2.1 Stream-Rabbitmq \uff08\u751f\u4ea7\u8005\uff09"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("font",{color:"red"},"\u64cd\u4f5c\u6b65\u9aa4"),(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"\u5f15\u5165 Stream-Rabbit \u7684\u4f9d\u8d56 ",(0,i.kt)("inlineCode",{parentName:"li"},"spring-cloud-starter-stream-rabbit")),(0,i.kt)("li",{parentName:"ol"},"\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e ",(0,i.kt)("font",{color:"red"},"Map<String, BinderProperties> binders"),"\u4ee5\u53ca ",(0,i.kt)("font",{color:"red"},"Map<String, BindingProperties> bindings"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Map<String, BinderProperties> binders"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u7ed1\u5b9a\u5668\u7684\u540d\u79f0"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"BinderProperties"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"type")," : \u4e2d\u95f4\u4ef6\u7c7b\u578b\uff0c\u76ee\u524d\u6709\u4e24\u79cd ",(0,i.kt)("font",{color:"red"},(0,i.kt)("strong",null,"rabbit | kafka"))," "),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"environment"),"\xa0 ","[ Map<String,Object> ]",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff0c\u6bd4\u5982\u914d\u7f6e \u6d88\u606f\u4e2d\u95f4\u4ef6\u7684\u8fde\u63a5\u4fe1\u606f"))))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Map<String, BindingProperties> bindings"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u952e\u662f\u901a\u9053\u7684\u540d\u79f0\uff0c\u6bd4\u5982output\u3001input"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"BindingProperties"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"binder")," : \u8bbe\u7f6e\u8981\u7ed1\u5b9a\u7684\u6d88\u606f\u670d\u52a1\u7684\u7684\u540d\u79f0"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"destination"),": \u53d1\u9001\u5230\u54ea\u4e2aexchange"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"content-type:"),":  \u8bbe\u7f6e\u6d88\u606f\u7c7b\u578b\uff0c\u9ed8\u8ba4\u662fjson"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"group")," : \u7ec4\u540d"))))))),(0,i.kt)("li",{parentName:"ol"},"\u5728\u53d1\u9001\u6d88\u606f\u7684\u65b9\u6cd5\u4e2d\u6ce8\u5165 ",(0,i.kt)("inlineCode",{parentName:"li"},"MessageChannel")," ,\u5e76\u901a\u8fc7\u5b83\u53d1\u9001\u6d88\u606f"),(0,i.kt)("li",{parentName:"ol"},"\u5728\u53d1\u9001\u7c7b\u4e0a\u6807\u6ce8",(0,i.kt)("inlineCode",{parentName:"li"},"@EnableBinding\xa0")," \u6765\u6dfb\u52a0\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"li"},"Source\xa0|\xa0Sink")," \u7684\u7ed1\u5b9a")))),(0,i.kt)("h5",{id:"1211-\u4ee3\u7801\u5b9e\u73b0"},"1.2.1.1 \u4ee3\u7801\u5b9e\u73b0"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u2460\u3001 \u6dfb\u52a0\u4f9d\u8d56")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!-- \u4f7f\u7528 Consul --\x3e\n<dependency>\n  <groupId>org.springframework.cloud</groupId>\n  <artifactId>spring-cloud-starter-consul-discovery</artifactId>\n</dependency>\n<dependency>\n  <groupId>org.springframework.cloud</groupId>\n  <artifactId>spring-cloud-starter-stream-rabbit</artifactId>\n</dependency>\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u2461\u3001 \u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6eStream")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml"},"server:\n  port: 8801\nspring:\n  application:\n    name: cloud-stream-rabbitmq-provider-8801\n  cloud:\n    consul:\n      host: localhost\n      port: 8500\n      discovery:\n        service-name: cloud-stream-rabbitmq-provider\n        instance-id: ${spring.application.name}\n    stream:\n      binders:                    # \u914d\u7f6e\u8981\u7ed1\u5b9a\u7684rabbitmq\u7684\u670d\u52a1\u4fe1\u606f\n        inRabbit:                   # binder\u7684\u540d\u79f0\uff0c\u7528\u4e8e\u4e8ebinding\u6574\u5408\n          type: rabbit\n      bindings:\n        output:                                     # \u6d88\u606f\u670d\u52a1\u662f\u8f93\u5165(input)\u8fd8\u662f\u8f93\u51fa(output)\n          destination: testExchange\n          content-type: application/json  # \u8bbe\u7f6e\u6d88\u606f\u7c7b\u578b\n          binder: inRabbit        # \u7ed1\u5b9a\u54ea\u4e00\u4e2abinder\n  rabbitmq:\n    virtual-host: /\n    username: guest\n    password: guest\n    host: 172.24.95.56\n    port: 5672\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u2462\u3001\u7f16\u5199\u6d88\u606f\u53d1\u9001\u7c7b")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'// \u81ea\u5b9a\u4e49\u63a5\u53e3\npublic interface IMessageProvider<T> {\n\n    void sendMsg(T message);\n}\n\n\n// \u63a5\u53e3\u5b9e\u73b0\u7c7b\n@EnableBinding( Source.class)\npublic class StringMessageProvider implements IMessageProvider<String> {\n\n    @Resource\n    @Qualifier(value = "output")\n    private MessageChannel channel;\n\n    @Override\n    public void sendMsg(String message) {\n        channel.send(MessageBuilder.withPayload(message).build());\n    }\n}\n')),(0,i.kt)("h4",{id:"122-stream-rabbitmq-\u6d88\u8d39\u8005"},"1.2.2 Stream-Rabbitmq \uff08\u6d88\u8d39\u8005\uff09"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("font",{color:"red"},"\u64cd\u4f5c\u6b65\u9aa4"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u5f15\u5165 Stream-Rabbit \u7684\u4f9d\u8d56 ",(0,i.kt)("inlineCode",{parentName:"li"},"spring-cloud-starter-stream-rabbit")),(0,i.kt)("li",{parentName:"ul"},"\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e ",(0,i.kt)("font",{color:"red"},"Map<String, BinderProperties> binders")," \u4ee5\u53ca ",(0,i.kt)("font",{color:"red"},"Map<String, BindingProperties> bindings")," ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Map<String, BinderProperties> binders"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u7ed1\u5b9a\u5668\u7684\u540d\u79f0"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"BinderProperties"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"type")," : \u4e2d\u95f4\u4ef6\u7c7b\u578b\uff0c\u76ee\u524d\u6709\u4e24\u79cd ",(0,i.kt)("font",{color:"red"},(0,i.kt)("strong",null,"rabbit | kafka"))," "),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"environment"),"\xa0 ","[ Map<String,Object> ]"," ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u73af\u5883\u914d\u7f6e\u4fe1\u606f\uff0c\u6bd4\u5982\u914d\u7f6e \u6d88\u606f\u4e2d\u95f4\u4ef6\u7684\u8fde\u63a5\u4fe1\u606f"))))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Map<String, BindingProperties> bindings"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u952e\u662f\u901a\u9053\u7684\u540d\u79f0\uff0c\u6bd4\u5982output\u3001input"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"BindingProperties"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"binder"),": \u8bbe\u7f6e\u8981\u7ed1\u5b9a\u7684\u6d88\u606f\u670d\u52a1\u7684\u7684\u540d\u79f0"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"destination"),": \u53d1\u9001\u5230\u54ea\u4e2aexchange"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"content-type:"),":  \u8bbe\u7f6e\u6d88\u606f\u7c7b\u578b\uff0c\u9ed8\u8ba4\u662fjson"))))))),(0,i.kt)("li",{parentName:"ul"},"\u5728\u53d1\u9001\u7c7b\u4e0a\u6807\u6ce8",(0,i.kt)("inlineCode",{parentName:"li"},"@EnableBinding\xa0"),"\u6765\u6dfb\u52a0\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"li"},"Source\xa0|\xa0Sink")," \u7684\u7ed1\u5b9a"),(0,i.kt)("li",{parentName:"ul"},"\u5728\u53d1\u9001\u65b9\u6cd5\u901a\u8fc7 ",(0,i.kt)("inlineCode",{parentName:"li"},"@StreamListener")," \u6807\u8bc6\u4e00\u4e2a\u76d1\u542c\u65b9\u6cd5")))),(0,i.kt)("h5",{id:"1221-\u4ee3\u7801\u5b9e\u73b0"},"1.2.2.1 \u4ee3\u7801\u5b9e\u73b0"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u2460\u3001\u914d\u7f6e\u6587\u4ef6\u4fee\u6539")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml"},"server:\n  port: 8802\nspring:\n  application:\n    name:  cloud-stream-rabbitmq-consumer-8802\n  cloud:\n    consul:\n      host: localhost\n      port: 8500\n      discovery:\n        service-name: cloud-stream-rabbitmq-provider\n        instance-id: ${spring.application.name}\n    stream:\n      binders:\n        outRabbit:\n          type: rabbit\n      bindings:\n        input:\n          destination: testExchange\n          content-type: application/json\n          binder: outRabbit\n  rabbitmq:\n    virtual-host: /\n    username: guest\n    password: guest\n    host: 172.24.95.56\n    port: 5672\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u2461\u3001\u914d\u7f6e\u76d1\u542c\u65b9\u6cd5")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'@RestController\n@EnableBinding(Sink.class)\n@Slf4j\npublic class ReceiveMessageController {\n    @Value("${server.port}")\n    private String serverPort;\n\n    @StreamListener(Sink.INPUT)\n    public void getMsg(Message<String> msg){\n        log.error("serverPort:{}--\x3emsg:{}--\x3eheaders:{}",serverPort,msg.getPayload(),msg.getHeaders().keySet());\n    }\n}\n')),(0,i.kt)("h3",{id:"13-\u91cd\u590d\u6d88\u8d39\u95ee\u9898"},"1.3 \u91cd\u590d\u6d88\u8d39\u95ee\u9898"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u6d88\u606f\u751f\u4ea7\u8005\u53d1\u9001\u6d88\u606f\u540e\uff0c\u4f1a\u88ab\u6240\u6709\u6d88\u8d39\u8005\u5171\u540c\u6d88\u8d39 -> \u91cd\u590d\u6d88\u8d39\u95ee\u9898 -> \u901a\u8fc7group \u5904\u7406"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Stream \u4e2d\u540c\u4e00\u4e2agroup\u4e2d\u7684\u591a\u4e2a\u6d88\u8d39\u8005\u662f\u7ade\u4e89\u5173\u7cfb\uff0c\u4e00\u4e2a\u6d88\u606f\u53ea\u4f1a\u88abgroup\u4e2d\u7684\u4e00\u4e2a\u6d88\u8d39\u8005\u6d88\u8d39="),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("font",{color:"red"},"\u4e0d\u540cgroup \u662f\u53ef\u4ee5\u91cd\u590d\u6d88\u8d39\u7684\uff0c\u540c\u4e00\u4e2agroup\u4e2d\u5b58\u5728\u7ade\u4e89\u5173\u7cfb\uff0c\u53ea\u6709\u5176\u4e2d\u4e00\u4e2a\u53ef\u4ee5\u6d88\u8d39"))))),(0,i.kt)("h4",{id:"131-\u901a\u8fc7group\u5904\u7406\u91cd\u590d\u6d88\u8d39\u95ee\u9898"},"1.3.1 \u901a\u8fc7Group\u5904\u7406\u91cd\u590d\u6d88\u8d39\u95ee\u9898"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("font",{color:"red"},"\u64cd\u4f5c\u6b65\u9aa4"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,i.kt)("inlineCode",{parentName:"li"},"binding")," \u4e2d\u7684group \u5c5e\u6027")))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u2460\u3001\u8bbe\u7f6e\u6d88\u8d39\u8005\u5728\u540c\u4e00\u4e2a\u7ec4")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"image-20201213141336471",src:n(42186).Z,width:"1079",height:"543"})))}k.isMDXComponent=!0},42186:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20201213141336471-e047a41a3912d0266639239ca2c078b3.png"}}]);