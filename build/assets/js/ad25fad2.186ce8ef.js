"use strict";(self.webpackChunkhuakucha=self.webpackChunkhuakucha||[]).push([[1583],{38807:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>p,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>s});var t=a(87462),r=(a(67294),a(3905));a(61839);const i={id:"Bean",title:"Bean"},l=void 0,o={unversionedId:"Spring/Spring\u7f16\u7a0b\u601d\u60f3/Bean",id:"Spring/Spring\u7f16\u7a0b\u601d\u60f3/Bean",title:"Bean",description:"1. Spring Bean",source:"@site/docs/Spring/Spring\u7f16\u7a0b\u601d\u60f3/1.2Bean.md",sourceDirName:"Spring/Spring\u7f16\u7a0b\u601d\u60f3",slug:"/Spring/Spring\u7f16\u7a0b\u601d\u60f3/Bean",permalink:"/docs/Spring/Spring\u7f16\u7a0b\u601d\u60f3/Bean",draft:!1,editUrl:"https://github.com/MagicalZhu/NoteLib/tree/main/docs/Spring/Spring\u7f16\u7a0b\u601d\u60f3/1.2Bean.md",tags:[],version:"current",lastUpdatedBy:"YuLiang Zhu",lastUpdatedAt:1670289592,formattedLastUpdatedAt:"2022\u5e7412\u67086\u65e5",frontMatter:{id:"Bean",title:"Bean"},sidebar:"springSideBar",previous:{title:"IOC\u5bb9\u5668",permalink:"/docs/Spring/Spring\u7f16\u7a0b\u601d\u60f3/IOC\u5bb9\u5668"},next:{title:"\u4f9d\u8d56\u67e5\u627e",permalink:"/docs/Spring/Spring\u7f16\u7a0b\u601d\u60f3/\u4f9d\u8d56\u67e5\u627e"}},p={},s=[{value:"1. Spring Bean",id:"1-spring-bean",level:2},{value:"1.1 BeanDefinition",id:"11-beandefinition",level:3},{value:"1.1.2 BeanDefinition \u5143\u4fe1\u606f",id:"112-beandefinition-\u5143\u4fe1\u606f",level:4},{value:"1.2 \u5982\u4f55\u6784\u5efaBeanDefinition\uff1f",id:"12-\u5982\u4f55\u6784\u5efabeandefinition",level:3},{value:"1.3 SpringBean \u7684\u547d\u540d\uff1f",id:"13-springbean-\u7684\u547d\u540d",level:3},{value:"1.3.1 Bean\u7684\u522b\u540d",id:"131-bean\u7684\u522b\u540d",level:4},{value:"1.4 \u5982\u4f55\u5c06BeanDefinition\u6ce8\u518c\u5230IOC\u5bb9\u5668\uff1f",id:"14-\u5982\u4f55\u5c06beandefinition\u6ce8\u518c\u5230ioc\u5bb9\u5668",level:3},{value:"1.4.1 \u901a\u8fc7\u6ce8\u89e3\u7684\u65b9\u5f0f\u6ce8\u518c",id:"141-\u901a\u8fc7\u6ce8\u89e3\u7684\u65b9\u5f0f\u6ce8\u518c",level:4},{value:"1.4.2 \u901a\u8fc7api\u7684\u65b9\u5f0f\u6ce8\u518c",id:"142-\u901a\u8fc7api\u7684\u65b9\u5f0f\u6ce8\u518c",level:4},{value:"1.4.3 \u6ce8\u518c\u5916\u90e8\u5355\u4f53\u5bf9\u8c61",id:"143-\u6ce8\u518c\u5916\u90e8\u5355\u4f53\u5bf9\u8c61",level:4},{value:"1.5 Bean\u7684\u5b9e\u4f8b\u5316\u65b9\u5f0f\u6709\u51e0\u79cd\uff1f",id:"15-bean\u7684\u5b9e\u4f8b\u5316\u65b9\u5f0f\u6709\u51e0\u79cd",level:3},{value:"1.5.0 \u901a\u8fc7\u6784\u9020\u5668\u3001Setter\u6ce8\u5165",id:"150-\u901a\u8fc7\u6784\u9020\u5668setter\u6ce8\u5165",level:4},{value:"1.5.1 \u9759\u6001\u5de5\u5382\u65b9\u6cd5",id:"151-\u9759\u6001\u5de5\u5382\u65b9\u6cd5",level:4},{value:"1.5.2 Bean + \u5de5\u5382\u65b9\u6cd5",id:"152-bean--\u5de5\u5382\u65b9\u6cd5",level:4},{value:"1.5.3 FactoryBean",id:"153-factorybean",level:4},{value:"1.5.4 Java\u4e2d\u7684ServiceLoader",id:"154-java\u4e2d\u7684serviceloader",level:4},{value:"1.5.5 ServiceLoaderFactoryBean",id:"155-serviceloaderfactorybean",level:4},{value:"1.6 Bean\u7684\u521d\u59cb\u5316\u65b9\u5f0f\u6709\u51e0\u79cd\uff1f",id:"16-bean\u7684\u521d\u59cb\u5316\u65b9\u5f0f\u6709\u51e0\u79cd",level:3},{value:"1.6.1 \u5ef6\u8fdf\u521d\u59cb\u5316\u7684Bean",id:"161-\u5ef6\u8fdf\u521d\u59cb\u5316\u7684bean",level:4},{value:"1.7 Bean\u7684\u9500\u6bc1",id:"17-bean\u7684\u9500\u6bc1",level:3},{value:"1.8 IOC\u5bb9\u5668\u7684Bean\u80fd\u591f\u88ab\u5783\u573e\u56de\u6536\u5417\uff1f",id:"18-ioc\u5bb9\u5668\u7684bean\u80fd\u591f\u88ab\u5783\u573e\u56de\u6536\u5417",level:3}],m={toc:s};function c(e){let{components:n,...i}=e;return(0,r.kt)("wrapper",(0,t.Z)({},m,i,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"1-spring-bean"},"1. Spring Bean"),(0,r.kt)("h3",{id:"11-beandefinition"},"1.1 BeanDefinition"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("font",{color:"red"},(0,r.kt)("code",null,"BeanDefinition"),"\xa0\u662fSpring\u4e2d\u5b9a\u4e49Bean\u7684\u914d\u7f6e\u5143\u4fe1\u606f\u63a5\u53e3,\u7528\u4e8e\u5b58\u50a8Bean\u7684\u5b9a\u4e49\u4fe1\u606f\uff0c\u5305\u542b"),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"Bean \u7684\u7c7b\u540d"),(0,r.kt)("li",{parentName:"ol"},"Bean \u7684\u884c\u4e3a\u5143\u7d20\uff0c\u6bd4\u5982\u4f5c\u7528\u57df\u3001\u81ea\u52a8\u7ed1\u5b9a\u7684\u6a21\u5f0f\u3001\u751f\u547d\u5468\u671f\u56de\u8c03"),(0,r.kt)("li",{parentName:"ol"},"\u5176\u4ed6Bean\u7684\u5f15\u7528\uff0c\u4e5f\u53eb\u505a\u4f9d\u8d56\uff08Dependencies\uff09"),(0,r.kt)("li",{parentName:"ol"},"\u914d\u7f6e\u8bbe\u7f6e\uff0c\u6bd4\u5982Bean\u7684\u5c5e\u6027(Properties)")))),(0,r.kt)("h4",{id:"112-beandefinition-\u5143\u4fe1\u606f"},"1.1.2 BeanDefinition \u5143\u4fe1\u606f"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u5c5e\u6027"),(0,r.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Class"),(0,r.kt)("td",{parentName:"tr",align:null},"Bean\u5168\u7c7b\u540d\uff0c\u5fc5\u987b\u662f\u5177\u4f53\u7c7b\uff0c\u4e0d\u80fd\u662f\u62bd\u8c61\u7c7b\u6216\u8005\u63a5\u53e3")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Name"),(0,r.kt)("td",{parentName:"tr",align:null},"Bean\u7684\u540d\u79f0/ID")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Scope"),(0,r.kt)("td",{parentName:"tr",align:null},"Bean\u7684\u4f5c\u7528\u57df(singleton\u3001propertype)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Constructor arguments"),(0,r.kt)("td",{parentName:"tr",align:null},"Bean \u6784\u9020\u5668\u53c2\u6570\uff08\u7528\u4e8e\u4f9d\u8d56\u6ce8\u5165\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Properties"),(0,r.kt)("td",{parentName:"tr",align:null},"Bean \u5c5e\u6027\u8bbe\u7f6e \uff08\u7528\u4e8e\u4f9d\u8d56\u6ce8\u5165\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Autowiring mode"),(0,r.kt)("td",{parentName:"tr",align:null},"Bean \u81ea\u52a8\u7ed1\u5b9a\u6a21\u5f0f\uff08\u6bd4\u5982\uff1a \u901a\u8fc7\u540d\u79f0 byName\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Lazy initialazation mode"),(0,r.kt)("td",{parentName:"tr",align:null},"Bean \u5ef6\u8fdf\u521d\u59cb\u5316\u6a21\u5f0f \uff08\u5ef6\u8fdf\u548c\u975e\u5ef6\u8fdf\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Initialization method"),(0,r.kt)("td",{parentName:"tr",align:null},"Bean \u521d\u59cb\u5316\u56de\u8c03\u65b9\u6cd5\u540d\u79f0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Destruction method"),(0,r.kt)("td",{parentName:"tr",align:null},"Bean \u9500\u6bc1\u56de\u8c03\u65b9\u6cd5\u540d\u79f0")))),(0,r.kt)("h3",{id:"12-\u5982\u4f55\u6784\u5efabeandefinition"},"1.2 \u5982\u4f55\u6784\u5efaBeanDefinition\uff1f"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5305\u542b\u4ee5\u4e0b\u7684\u51e0\u79cd\u65b9\u5f0f\u6784\u5efaBeanDefinition"),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\u901a\u8fc7 ",(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"li"},"BeanDefinitionBuilder"))," "),(0,r.kt)("li",{parentName:"ol"},"\u901a\u8fc7 ",(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"li"},"AbstractBeanDefinition")," \u4ee5\u53ca\u6d3e\u751f\u7c7b")," ")))),(0,r.kt)("admonition",{title:"\u6ce8\u610f",type:"danger"},(0,r.kt)("p",{parentName:"admonition"}," BeanDefinition \u5e76\u975eBean\u7684\u6700\u7ec8\u6001,\u8fd8\u53ef\u4ee5\u5bf9Bean\u8fdb\u884c\u989d\u5916\u7684\u8bbe\u7f6e"),(0,r.kt)("p",{parentName:"admonition"}," \u6bd4\u5982: \u8bbe\u7f6eBean\u7684\u521d\u59cb\u5316\u65b9\u6cd5\u3001\u9500\u6bc1\u65b9\u6cd5\u7b49\u7b49")),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u65b9\u5f0f\u4e00\uff1a \u901a\u8fc7BeanDefinitionBuilder")),(0,r.kt)("admonition",{title:"GenericBeanDefinition \u548c RootBeanDefinition\u7684\u533a\u522b\uff1f",type:"caution"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"GenericBeanDefinition \u53ef\u4ee5\u8bbe\u7f6eparent\u5c5e\u6027"),(0,r.kt)("li",{parentName:"ul"},"RootBeanDefinition \u662f\u6839\u90e8\u3001\u9876\u5c42\u7684Bean\u5b9a\u4e49\u4fe1\u606f\uff0c\u65e0\u6cd5\u8bbe\u7f6eparent\u5c5e\u6027\t"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public void BeanDefinitionBuilderDemo(){\n  // 1.\u901a\u8fc7 BeanDefinitionBuilder -> GenericBeanDefinition \u53ef\u4ee5\u8bbe\u7f6eparent,\u800c RootBeanDefinition \u6ca1\u6709parent,\u5df2\u7ecf\u662f\u9876\u5c42\u7684bean\n  BeanDefinitionBuilder builder = BeanDefinitionBuilder.genericBeanDefinition(Person.class);\n  \n  // 2.\u8fdb\u884c\u5c5e\u6027\u8bbe\u7f6e\n  builder.addPropertyValue("age",22);\n  builder.addPropertyValue("name","yoey");\n  \n  // 3. \u83b7\u53d6BeanDefinition \u5b9e\u4f8b\n  GenericBeanDefinition beanDefinition = (GenericBeanDefinition)builder.getBeanDefinition();\n  \n  // 4.BeanDefinition \u5e76\u975eBean\u7684\u6700\u7ec8\u6001,\u8fd8\u53ef\u4ee5\u5bf9Bean\u8fdb\u884c\u989d\u5916\u7684\u8bbe\u7f6e\n  beanDefinition.setInitMethodName("beanPostCon");\n}\n')),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u65b9\u5f0f\u4e8c\uff1a \u901a\u8fc7AbstractBeanDefinition \u4ee5\u53ca\u6d3e\u751f\u7c7b")),(0,r.kt)("font",{color:"red"},"GenericBeanDefinition \u548cRootBeanDefinition \u90fd\u5c5e\u4e8e AbstractBeanDefinition\u7684\u5b50\u7c7b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public void AbstractBeanDefinitionDemo(){\n  // 1.\u521b\u5efa\u4e00\u4e2aAbstractBeanDefinition\u5b9e\u73b0\u7c7b -> GenericBeanDefinition\n  GenericBeanDefinition definition = new GenericBeanDefinition();\n\n  // 2. \u8bbe\u7f6eBean\u7684\u7c7b\u578b\n  definition.setBeanClass(Person.class);\n\n  // 3.\u8bbe\u7f6eBean\u7684\u5c5e\u6027,\u901a\u8fc7 MutablePropertyValues \u8fdb\u884c\u6279\u91cf\u7684\u8bbe\u7f6e\n  MutablePropertyValues propertyValues = new MutablePropertyValues();\n  propertyValues.addPropertyValue("age",22);\n  propertyValues.addPropertyValue("name","yoey");\n  definition.setPropertyValues(propertyValues);\n\n}\n')),(0,r.kt)("h3",{id:"13-springbean-\u7684\u547d\u540d"},"1.3 SpringBean \u7684\u547d\u540d\uff1f"),(0,r.kt)("admonition",{title:"Bean\u7684\u540d\u79f0",type:"tip"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("font",{color:"blue"},"\u6bcf\u4e2aBean\u62e5\u6709\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u6807\u8bc6\u7b26(identifiers)\uff0c\u8fd9\u4e9b\u6807\u8bc6\u7b26\u5728Bean\u6240\u5728\u7684\u5bb9\u5668\u5fc5\u987b\u662f\u552f\u4e00\u7684"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u901a\u5e38\uff0c\u4e00\u4e2aBean\u53ea\u6709\u4e00\u4e2a\u6807\u8bc6\u7b26\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u522b\u540d(Alias) \u62d3\u5c55"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5728\u57fa\u4e8eXML\u7684\u914d\u7f6e\u5143\u4fe1\u606f\u4e2d\uff0c\u901a\u8fc7 id/name \u5c5e\u6027\u6307\u5b9a Bean\u7684\u6807\u8bc6\u7b26 -> \u5e76\u975e\u4e00\u5b9a\u662f \u672c\u5730\u7684Spring\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u662f\u7f51\u7edc\u8d44\u6e90"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u9700\u8981\u8bbe\u7f6eBean\u7684\u522b\u540d\uff0c\u53ef\u5728 Bean\u7684name\u5c5e\u6027\u540e\u4f7f\u7528 \u9017\u53f7 \u5206\u9694"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Bean\u7684id/name \u4e0d\u662f\u5fc5\u987b\u6307\u5b9a\u7684\uff0c\u5bb9\u5668\u9ed8\u8ba4\u4f1a\u4e3aBean\u751f\u6210\u4e00\u4e2a\u552f\u4e00\u7684\u540d\u79f0"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("font",{color:"#f535e8"},"\u901a\u8fc7 ",(0,r.kt)("code",null,"BeanNameGenerator"),"\xa0\u7684\u5b9e\u73b0\u7c7b\uff0c\u6bd4\u5982\u6ce8\u89e3\u6ce8\u518c\u4f7f\u7528 ",(0,r.kt)("code",null,"AnnotationBeanNameGenerator"))))))),(0,r.kt)("h4",{id:"131-bean\u7684\u522b\u540d"},"1.3.1 Bean\u7684\u522b\u540d"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Bean\u522b\u540d\u7684(Alias)\u7684\u4ef7\u503c",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\u590d\u7528\u73b0\u6709\u7684BeanDefinition",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("font",{color:"red"},"\u5373: \u4f7f\u7528Bean\u7684\u522b\u540d\u65f6\uff0c\u4e00\u5b9a\u8981\u5b58\u5728\u8fd9\u4e2aBean\u7684\u5b9a\u4e49")))),(0,r.kt)("li",{parentName:"ol"},"\u66f4\u5177\u6709\u573a\u666f\u5316\u7684\u547d\u540d\u65b9\u6cd5",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'<alias name="Bean\u6807\u8bc6\u7b26" alias ="\u522b\u540dA"/>')),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'<alias name="Bean\u6807\u8bc6\u7b26" alias ="\u522b\u540dB"/>'))))))),(0,r.kt)("p",null,"\u2460. \u901a\u8fc7XML\u914d\u7f6e\u5143\u4fe1\u606f\u6307\u5b9aBean\u3001\u914d\u7f6eBean\u7684\u522b\u540d"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- \u901a\u8fc7name\u5c5e\u6027\u540e\u9762\u52a0\u4e0a\u9017\u53f7\u533a\u5206name\u548c\u522b\u540d --\x3e\n<bean id="person2" class="com.geekbang.demo.BeanInfo.Person" name="person3,yoey2">\n  <property name="age" value="18"/>\n  <property name="name" value="yoey2"/>\n</bean>\n<bean id="person" class="com.geekbang.demo.BeanInfo.Person" >\n  <property name="age" value="18"/>\n  <property name="name" value="yoey"/>\n</bean>\n<alias name="person" alias="yoey"/>\n')),(0,r.kt)("p",null,"\u2461. \u83b7\u53d6Bean"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public static void main(String[] args) {\n  DefaultListableBeanFactory beanFactory = new DefaultListableBeanFactory();\n  XmlBeanDefinitionReader reader = new XmlBeanDefinitionReader(beanFactory);\n  int beanDefinitions = reader.loadBeanDefinitions("classpath:META-INF/application.xml");\n  System.err.println("load Beans count:" + beanDefinitions);\n\n  Person person = beanFactory.getBean("person", Person.class);\n  Person yoey = beanFactory.getBean("yoey", Person.class);\n  System.err.println("person\u522b\u540d\u6307\u5b9a\u7684Bean \u4e0e person\u662f\u5426\u76f8\u7b49:"+ (person == yoey));\n  String[] names = beanFactory.getBeanNamesForType(Person.class);\n  System.err.println("Person\u7c7b\u578b\u7684Bean"+ Arrays.toString(names));\n\n  Person person2 = beanFactory.getBean("person2", Person.class);\n  Person yoey2 = beanFactory.getBean("yoey2", Person.class);\n  System.err.println("person2\u522b\u540d\u6307\u5b9a\u7684Bean \u4e0e person2\u662f\u5426\u76f8\u7b49:"+ (person2 == yoey2));\n\n}\n/*\n    load Beans count:3\n    person\u522b\u540d\u6307\u5b9a\u7684Bean \u4e0e person\u662f\u5426\u76f8\u7b49:true\n    Person\u7c7b\u578b\u7684Bean[person2, person]\n    person2\u522b\u540d\u6307\u5b9a\u7684Bean \u4e0e person2\u662f\u5426\u76f8\u7b49:true\n*/\n')),(0,r.kt)("h3",{id:"14-\u5982\u4f55\u5c06beandefinition\u6ce8\u518c\u5230ioc\u5bb9\u5668"},"1.4 \u5982\u4f55\u5c06BeanDefinition\u6ce8\u518c\u5230IOC\u5bb9\u5668\uff1f"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6709\u4ee5\u4e0b\u7684\u51e0\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5c06BeanDefinition\u6ce8\u518c\u5230IOC\u5bb9\u5668"),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"XML\u914d\u7f6e\u5143\u4fe1\u606f",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'<bean name="xxx"></bean>')))),(0,r.kt)("li",{parentName:"ol"},"Java \u6ce8\u89e3\u914d\u7f6e\u5143\u4fe1\u606f",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@Bean")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@Compoment")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@Import")))),(0,r.kt)("li",{parentName:"ol"},"java api \u914d\u7f6e\u5143\u4fe1\u606f\ud83d\udccc -> < color='red'>Spring\u5e94\u7528\u4e0a\u4e0b\u6587\u4e00\u822c\u90fd\u5b9e\u73b0\u4e86 ",(0,r.kt)("inlineCode",{parentName:"li"},"BeanDefinitionRegistry"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u547d\u540d\u65b9\u5f0f",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"BeanDefinitionRegistry#registerBeanDefinition(String BeanName,BeanDefinition definition)")))),(0,r.kt)("li",{parentName:"ul"},"\u975e\u547d\u540d\u65b9\u5f0f",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"BeanDefinitionReaderUtils#registerWithGeneratedName(AbstractBeanDefinition definition, BeanDefinitionRegistry registry)")))),(0,r.kt)("li",{parentName:"ul"},"\u914d\u7f6e\u7c7b\u65b9\u5f0f",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"AnnotatedBeanDefinitionReader#register(...)"))))))))),(0,r.kt)("h4",{id:"141-\u901a\u8fc7\u6ce8\u89e3\u7684\u65b9\u5f0f\u6ce8\u518c"},"1.4.1 \u901a\u8fc7\u6ce8\u89e3\u7684\u65b9\u5f0f\u6ce8\u518c"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("font",{color:"red"},"\u6ce8\u610f: \u540c\u4e00\u4e2aBean\u4e0d\u4f1a\u88ab\u591a\u6b21\u6ce8\u518c!!"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Import(AnnotationBeanDefinitionRegistryDemo.config.class)\npublic class AnnotationBeanDefinitionRegistryDemo {\n    public static void main(String[] args) {\n        // \u521b\u5efaSpring \u5e94\u7528\u4e0a\u4e0b\u6587\n        AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\n        // \u6ce8\u518cconfig \u4e3a ConfigurationClass (\u914d\u7f6e\u7c7b)\n        ctx.register(config.class);\n        // \u542f\u52a8 Spring \u5e94\u7528\u4e0a\u4e0b\u6587 -> \u8c03\u7528\u5bb9\u5668\u7684\u5237\u65b0\u65b9\u6cd5\uff0c\u4f1a\u5bf9Bean\u7684\u5b9a\u4e49\u4fe1\u606f\u8fdb\u884c\u521d\u59cb\u5316\n        ctx.refresh();\n\n        // \u4f9d\u8d56\u67e5\u627e\n        System.err.println("config \u7c7b\u578b\u7684\u6240\u6709Beans"+ctx.getBeansOfType(config.class));\n        System.err.println("Person \u7c7b\u578b\u7684\u6240\u6709Beans"+ctx.getBeansOfType(Person.class));\n\n        // \u5173\u95edSpring \u5e94\u7528\u4e0a\u4e0b\u6587\n        ctx.close();\n    }\n\n    @Component  /** \u91c7\u7528@Component\u7684\u65b9\u5f0f\u6ce8\u518cBean */\n    public static class  config{\n        @Bean\n        public Person person(){\n            Person person = new Person();\n            person.setName("11");\n            person.setAge(22);\n            return person;\n        }\n    }\n}\n')),(0,r.kt)("h4",{id:"142-\u901a\u8fc7api\u7684\u65b9\u5f0f\u6ce8\u518c"},"1.4.2 \u901a\u8fc7api\u7684\u65b9\u5f0f\u6ce8\u518c"),(0,r.kt)("admonition",{title:"\u6ce8\u610f\u70b9",type:"tip"},(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"DefaultListableBeanFactory\u3001GenericApplicationContext \u5b9e\u73b0\u4e86 BeanDefinitionRegistry\u63a5\u53e3\uff0c\u5177\u6709\u6ce8\u518cBeanDefinition\u7684\u80fd\u529b")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"AnnotationConfigApplicationContext \u5c31\u662fGenericApplicationContext\u7684\u5b50\u7c7b")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class APIBeanDefinitionDemo {\n    public static void main(String[] args) {\n        // \u521b\u5efaIOC\u5bb9\u5668\n        DefaultListableBeanFactory beanFactory = new DefaultListableBeanFactory();\n      \n        // \u901a\u8fc7api\u7684\u65b9\u5f0f\u6ce8\u518cBean -> \u5f53\u7136\u8fd9\u91cc\u4e5f\u80fd\u4f20\u5165Spring\u5e94\u7528\u4e0a\u4e0b\u6587\u5bf9\u8c61\n        registryByName(beanFactory,"yoey1");\n        registryByType(beanFactory);\n        registryByType(beanFactory);\n        // \u4f9d\u8d56\u67e5\u627e\n        String[] names = beanFactory.getBeanNamesForType(Person.class);\n        System.err.println(Arrays.toString(names));\n    }\n\n    public static void registryByName(BeanDefinitionRegistry registry,String name){\n        BeanDefinitionBuilder builder = BeanDefinitionBuilder.genericBeanDefinition(Person.class);\n        builder.addPropertyValue("age",11);\n        builder.addPropertyValue("name","yoey1");\n        registry.registerBeanDefinition(name,builder.getBeanDefinition());\n    }\n\n    public static void registryByType(BeanDefinitionRegistry registry){\n        BeanDefinitionBuilder builder = BeanDefinitionBuilder.genericBeanDefinition(Person.class);\n        builder.addPropertyValue("age",22);\n        builder.addPropertyValue("name","yoey2");\n        BeanDefinitionReaderUtils.registerWithGeneratedName(builder.getBeanDefinition(),registry);\n    }\n}\n\n/*\n    [yoey1, com.geekbang.demo.BeanInfo.Person#0, com.geekbang.demo.BeanInfo.Person#1]\n*/ \n')),(0,r.kt)("h4",{id:"143-\u6ce8\u518c\u5916\u90e8\u5355\u4f53\u5bf9\u8c61"},"1.4.3 \u6ce8\u518c\u5916\u90e8\u5355\u4f53\u5bf9\u8c61"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5c06\u521b\u5efa\u7684\u5bf9\u8c61\u6ce8\u518c\u5230IOC\u5bb9\u5668\u4e2d")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class OutBeanDemo {\n    public static void main(String[] args) {\n        // \u5b9a\u4e49\u4e00\u4e2a\u5916\u90e8\u7684\u5355\u4f53\u7c7b\n        Person person = new Person();\n        person.setName("11");\n        person.setAge(22);\n\n        // \u901a\u8fc7IOC\u5bb9\u5668\u7684 registerSingleton \u6ce8\u518c -> \u6216\u8005\u901a\u8fc7Spring\u5e94\u7528\u4e0a\u4e0b\u6587\u83b7\u53d6\u5e95\u5c42IOC\u5bb9\u5668\n        DefaultListableBeanFactory beanFactory = new DefaultListableBeanFactory();\n        beanFactory.registerSingleton("person",person);\n\n        //\u4f9d\u8d56\u67e5\u627e\n        Person bean = beanFactory.getBean("person", Person.class);\n        System.out.println(bean);\n    }\n}\n')),(0,r.kt)("h3",{id:"15-bean\u7684\u5b9e\u4f8b\u5316\u65b9\u5f0f\u6709\u51e0\u79cd"},"1.5 Bean\u7684\u5b9e\u4f8b\u5316\u65b9\u5f0f\u6709\u51e0\u79cd\uff1f"),(0,r.kt)("admonition",{title:"\u6ce8\u610f",type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"1\u3001\u4f7f\u7528Spring\u5e94\u7528\u4e0a\u4e0b\u6587\u6ce8\u518c\u7684BeanDefinition\uff0c\u53ea\u6709\u901a\u8fc7\u8c03\u7528\u4e0a\u4e0b\u6587\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"refresh()")," \u65b9\u6cd5\u624d\u80fd\u5bf9Bean\u8fdb\u884c\u521d\u59cb\u5316/\u5b9e\u4f8b\u5316"),(0,r.kt)("p",{parentName:"admonition"},"2\u3001ClassPathXmlApplicationContext \u52a0\u8f7dXml\u914d\u7f6e\u5143\u4fe1\u606f\u65f6\uff0c\u5185\u90e8\u4f1a\u8c03\u7528\u4e0a\u4e0b\u6587\u7684\u5237\u65b0\u65b9\u6cd5\u5b9e\u73b0Bean\u7684\u5b9e\u4f8b\u5316")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("font",{color:"red"},"\u5e38\u89c4\u65b9\u5f0f:"),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\u901a\u8fc7\u6784\u9020\u5668 \t  \u3010 \u914d\u7f6e\u5143\u4fe1\u606f:XML\u3001java\u6ce8\u89e3 \u548c java api \u3011"),(0,r.kt)("li",{parentName:"ol"},"\u901a\u8fc7\u9759\u6001\u5de5\u5382\u65b9\u6cd5  \u3010 \u914d\u7f6e\u5143\u4fe1\u606f:XML \u548c java api \u3011"),(0,r.kt)("li",{parentName:"ol"},"\u901a\u8fc7Bean\u5de5\u5382\u65b9\u6cd5 \u3010 \u914d\u7f6e\u5143\u4fe1\u606f:XML \u548c java api  \u3011"),(0,r.kt)("li",{parentName:"ol"},"\u901a\u8fc7FactoryBean \u3010 \u914d\u7f6e\u5143\u4fe1\u606f:XML\u3001java\u6ce8\u89e3 \u548c java api \u3011"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("font",{color:"red"},"\u7279\u6b8a\u65b9\u5f0f"),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\u901a\u8fc7",(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"li"},"ServiceLoaderFactoryBean")),"  \u3010 \u914d\u7f6e\u5143\u4fe1\u606f:XML\u3001java\u6ce8\u89e3 \u548c java api \u3011",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4e5f\u662fFactoryBean \u7684\u4e00\u79cd\u65b9\u5f0f"))),(0,r.kt)("li",{parentName:"ol"},"\u901a\u8fc7 ",(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"li"},"AutowireCapableBeanFactory#createBean\uff08Class\uff0cint\uff0cbool\uff09")),"  "),(0,r.kt)("li",{parentName:"ol"},"\u901a\u8fc7",(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"li"},"BeanDefinitionRegistry#registryBeanDefinition(String,BeanDefinition)"))," \u5411\u5bb9\u5668\u6ce8\u518cBeanDefinition\uff0c\u7531\u5bb9\u5668\u5b9e\u4f8b\u5316")))),(0,r.kt)("h4",{id:"150-\u901a\u8fc7\u6784\u9020\u5668setter\u6ce8\u5165"},"1.5.0 \u901a\u8fc7\u6784\u9020\u5668\u3001Setter\u6ce8\u5165"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!--\u901a\u8fc7\u5c5e\u6027Setter \u6ce8\u5165--\x3e\n<bean id="yoey" class="com.geekbang.MyDemo1.Pojo.User">\n  <property name="age" value="2"/>\n  <property name="name" value="Yoey"/>\n</bean>\n\n\x3c!-- \u901a\u8fc7\u6784\u9020\u5668\u6ce8\u5165 --\x3e\n<bean id="yoey2" class="com.geekbang.MyDemo1.Pojo.User">\n  <constructor-arg name="age"  value="22"/>\n  <constructor-arg name="name"  value="yoey"/>\n</bean>\n')),(0,r.kt)("h4",{id:"151-\u9759\u6001\u5de5\u5382\u65b9\u6cd5"},"1.5.1 \u9759\u6001\u5de5\u5382\u65b9\u6cd5"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u64cd\u4f5c\u6b65\u9aa4",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\u5728Bean\u7c7b\u4e2d\u5b9a\u4e49\u9759\u6001\u65b9\u6cd5\uff0c\u7528\u4e8e\u8fd4\u56de\u4e00\u4e2aBean"),(0,r.kt)("li",{parentName:"ol"},"\u4e3aBean\u6307\u5b9a\u4e00\u4e2a ",(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"li"},"factory-method"))," ")))),(0,r.kt)("p",null,"\u2460\u3001 Bean\u7c7b\u4e2d\u6307\u5b9a\u9759\u6001\u65b9\u6cd5\uff0c\u8fd4\u56deBean\u5bf9\u8c61"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class Person {\n    String name;\n    Integer age;\n  \n    public static Person createUser(){\n        Person person = new Person();\n        person.setName("11");\n        person.setAge(22);\n        return person;\n    }\n}\n')),(0,r.kt)("p",null,"\u2461\u3001 XML\u914d\u7f6e\u5143\u4fe1\u606f\u65f6,\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"factory-method")," \u6307\u5b9a \u9759\u6001\u65b9\u6cd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!--\u9759\u6001\u65b9\u6cd5--\x3e\n<bean id="static-person" class="com.geekbang.demo.BeanInfo.Person" factory-method="createUser"/>\n')),(0,r.kt)("h4",{id:"152-bean--\u5de5\u5382\u65b9\u6cd5"},"1.5.2 Bean + \u5de5\u5382\u65b9\u6cd5"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u64cd\u4f5c\u6b65\u9aa4",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e00\u4e2a\u5de5\u5382\u7c7b\uff0c\u5176\u4e2d\u5b9a\u4e49\u8fd4\u56deBean\u7684\u65b9\u6cd5"),(0,r.kt)("li",{parentName:"ol"},"\u914d\u7f6e\u5de5\u5382\u7c7b\u7684Bean"),(0,r.kt)("li",{parentName:"ol"},"\u5728Bean\u7684 ",(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"li"},"factory-bean"),"\xa0"),"\u6307\u5b9a\u5de5\u5382\u7c7b\u7684Bean\uff0c",(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"li"},"factory-method"))," \u6307\u5b9a\u5de5\u5382\u7c7b\u4e2d\u8fd4\u56deBean\u7684\u65b9\u6cd5")))),(0,r.kt)("p",null,"\u2460\u3001 \u521b\u5efa\u4e00\u4e2a\u5de5\u5382\u7c7b\uff0c\u5176\u4e2d\u5b9a\u4e49\u8fd4\u56deBean\u5bf9\u8c61\u7684\u65b9\u6cd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public interface PersonFactory {\n\n    default Person createPerson(){\n        return Person.createUser();\n    }\n}\n")),(0,r.kt)("p",null,"\u2461\u3001 \u914d\u7f6e\u5de5\u5382\u7c7b\u7684Bean\uff0c\u5e76\u4e14 \u5728Bean\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"factory-bean")," \u6307\u5b9a\u5de5\u5382\u7c7b\u7684Bean\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"factory-method")," \u6307\u5b9a\u5de5\u5382\u7c7b\u4e2d\u8fd4\u56deBean\u7684\u65b9\u6cd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!--Bean\u5de5\u5382--\x3e\n<bean class="com.geekbang.demo.Definition.Factory.DefaultPersonFactory" id="factory"/>\n<bean id="beanFactoryPerson" factory-bean="factory" factory-method="createPerson"/>\n')),(0,r.kt)("h4",{id:"153-factorybean"},"1.5.3 FactoryBean"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u64cd\u4f5c\u65b9\u5f0f",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e00\u4e2a\u7c7b\u5b9e\u73b0 ",(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"li"},"FactoryBean<T>"))," \u63a5\u53e3"),(0,r.kt)("li",{parentName:"ol"},"\u5c06\u4e0a\u8ff0\u7684\u7c7b\u6ce8\u5165\u5230\u5bb9\u5668\u4e2d"),(0,r.kt)("li",{parentName:"ol"},"\u5982\u679c\u9700\u8981\u901a\u8fc7\u7c7b\u578b\u83b7\u53d6Bean\u65f6\uff0c\u8fd9\u4e2a\u7c7b\u578b\u5c31\u662f ",(0,r.kt)("inlineCode",{parentName:"li"},"T"))))),(0,r.kt)("p",null,"\u2460\u3001 \u521b\u5efa\u4e00\u4e2a\u7c7b\u5b9e\u73b0",(0,r.kt)("inlineCode",{parentName:"p"},"FactoryBean<T>")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class PersonFactoryBean implements FactoryBean<Person> {\n    @Override\n    public Person getObject() throws Exception {\n        Person person = new Person();\n        person.setName("yoey");\n        person.setAge(11);\n        return person;\n    }\n    @Override\n    public Class<?> getObjectType() {\n        return null;\n    }\n\n    @Override\n    public boolean isSingleton() {\n        return true;\n    }\n}\n')),(0,r.kt)("p",null,"\u2461\u3001 \u901a\u8fc7XML\u914d\u7f6e\u5143\u4fe1\u606f\u7684\u65b9\u5f0f\u5c06FactoryBean\u7684\u5b9e\u73b0\u6ce8\u5165\u5230\u5bb9\u5668\u4e2d"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!--\u6ce8\u5165FactoryBean\u7684\u5b9e\u73b0--\x3e\n<bean id="personFactoryBean" class="com.geekbang.demo.Definition.PersonFactoryBean"/>\n')),(0,r.kt)("p",null,"\u2462\u3001 \u83b7\u53d6FactoryBean\u7684\u5b9e\u73b0(\u7c7b\u578b\u5c31\u662fFactoryBean \u7684\u6cdb\u578b\u7c7b\u578b)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class FactoryBeanDemo {\n    public static void main(String[] args) {\n        ClassPathXmlApplicationContext ctx = new ClassPathXmlApplicationContext("classpath:/META-INF/application.xml");\n        ctx.refresh();\n        Person factoryBean = (Person)ctx.getBean("personFactoryBean");\n        System.out.println(factoryBean);\n    }\n}\n/*\n    Person{name=\'yoey\', age=11}\n*/\n')),(0,r.kt)("h4",{id:"154-java\u4e2d\u7684serviceloader"},"1.5.4 Java\u4e2d\u7684ServiceLoader"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u64cd\u4f5c\u6b65\u9aa4",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\u5728classpath\u4e0b\u521b\u5efa ",(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"li"},"/META-INF/services"))," \u76ee\u5f55"),(0,r.kt)("li",{parentName:"ol"},"\u5728\u4e0a\u8ff0\u7684\u76ee\u5f55\u4e2d\u5b9a\u4e49\u6ca1\u6709\u540e\u7f00\u7684\u6587\u4ef6\uff0c\u6587\u4ef6\u540d\u662f\u63a5\u53e3\u7684\u5168\u7c7b\u540d"),(0,r.kt)("li",{parentName:"ol"},"\u5728\u4e0a\u8ff0\u7684\u6587\u4ef6\u4e2d\u914d\u7f6e\u8be5\u63a5\u53e3\u7684\u5b9e\u73b0\u7c7b(\u5168\u7c7b\u540d)"),(0,r.kt)("li",{parentName:"ol"},"\u901a\u8fc7 ",(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"li"},"ServiceLoader")),"  \u52a0\u8f7d\u7c7b\u5bf9\u8c61")))),(0,r.kt)("p",null,"\u2460\u3001 \u5728",(0,r.kt)("inlineCode",{parentName:"p"},"/META-INF/services")," \u4e2d\u521b\u5efa\u6587\u4ef6"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20210123150532593",src:a(25635).Z,width:"559",height:"72"})),(0,r.kt)("p",null,"\u2461\u3001 \u4f7f\u7528 ServiceLoader\u52a0\u8f7d\u7c7b\u5bf9\u8c61"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"}," public static void main(String[] args) {\n        ServiceLoader<PersonFactory> load = ServiceLoader.load(PersonFactory.class, ServiceLoaderFactoryBeanDemo.class.getClassLoader());\n        Iterator<PersonFactory> iterator = load.iterator();\n        while (iterator.hasNext()){\n            PersonFactory next = iterator.next();\n            System.out.println(next.createPerson());\n        }\n }\n\n/*\n    Person{name='11', age=22}\n*/\n\n")),(0,r.kt)("h4",{id:"155-serviceloaderfactorybean"},"1.5.5 ServiceLoaderFactoryBean"),(0,r.kt)("admonition",{title:"\u6ce8\u610f",type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"ServiceLoaderFactoryBean \u4e5f\u662fFactoryBean \u63a5\u53e3\u7684\u4e00\u4e2a\u5b9e\u73b0\u7c7b\uff0c\u5176\u4e2d\u8fd4\u56de\u7684\u7c7b\u578b\u5c31\u662f ",(0,r.kt)("inlineCode",{parentName:"p"},"ServiceLoader"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u64cd\u4f5c\u65b9\u5f0f",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5728classpath\u4e0b\u521b\u5efa ",(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"li"},"/META-INF/services"))," \u76ee\u5f55"),(0,r.kt)("li",{parentName:"ul"},"\u5728\u4e0a\u8ff0\u7684\u76ee\u5f55\u4e2d\u5b9a\u4e49\u6ca1\u6709\u540e\u7f00\u7684\u6587\u4ef6\uff0c\u6587\u4ef6\u540d\u662f\u63a5\u53e3\u7684\u5168\u7c7b\u540d"),(0,r.kt)("li",{parentName:"ul"},"\u5728\u4e0a\u8ff0\u7684\u6587\u4ef6\u4e2d\u914d\u7f6e\u8be5\u63a5\u53e3\u7684\u5b9e\u73b0\u7c7b(\u5168\u7c7b\u540d)"),(0,r.kt)("li",{parentName:"ul"},"\u5728XML\u914d\u7f6e\u5143\u4fe1\u606f\u4e2d\u6307\u5b9a",(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"li"},"ServiceLoaderFactoryBean"))," \u7684Bean\uff0c\u5e76\u4e14\u914d\u7f6e ",(0,r.kt)("font",{color:"#f535e8"},(0,r.kt)("inlineCode",{parentName:"li"},"serviceType"))," \u5c5e\u6027"),(0,r.kt)("li",{parentName:"ul"},"\u83b7\u53d6 ServiceLoaderFactoryBean \u7684Bean\u8fdb\u884c\u64cd\u4f5c")))),(0,r.kt)("p",null,"\u2460\u3001 XML\u914d\u7f6e\u5143\u4fe1\u606f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!--ServiceLoadFactoryBean--\x3e\n<bean id="personServiceLoader" class="org.springframework.beans.factory.serviceloader.ServiceLoaderFactoryBean">\n  <property name="serviceType" value="com.geekbang.demo.Definition.Factory.PersonFactory"/>\n</bean>\n')),(0,r.kt)("p",null,"\u2461\u3001 \u4ece\u5bb9\u5668\u4e2d\u83b7\u53d6ServiceLoader"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public static void main(String[] args) {\n  ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("classpath:/META-INF/application-slh.xml");\n  ServiceLoader<PersonFactory> loader = context.getBean("personServiceLoader", ServiceLoader.class);\n  Iterator<PersonFactory> iterator = loader.iterator();\n  while (iterator.hasNext()){\n    PersonFactory next = iterator.next();\n    System.out.println(next.createPerson());\n  }\n}\n')),(0,r.kt)("h3",{id:"16-bean\u7684\u521d\u59cb\u5316\u65b9\u5f0f\u6709\u51e0\u79cd"},"1.6 Bean\u7684\u521d\u59cb\u5316\u65b9\u5f0f\u6709\u51e0\u79cd\uff1f"),(0,r.kt)("admonition",{title:"tip",type:"tip"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Bean\u7684\u751f\u547d\u5468\u671f( Bean \u7684\u521b\u5efa -> \u521d\u59cb\u5316 -> \u9500\u6bc1 )"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u521b\u5efa Bean \u5b9e\u4f8b")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u4e3a Bean \u7684\u5c5e\u6027\u8bbe\u7f6e\u503c\u548c\u5bf9\u5176\u4ed6 Bean \u7684\u5f15\u7528")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("font",{color:"blue"},"\u8c03\u7528 Bean \u7684\u521d\u59cb\u5316\u65b9\u6cd5")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Bean \u53ef\u4ee5\u4f7f\u7528\u4e86")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5f53\u5bb9\u5668\u5173\u95ed\u65f6, \u8c03\u7528 Bean \u7684\u9500\u6bc1\u65b9\u6cd5")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Bean \u7684\u521b\u5efa ?"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5355\u4f8b\u7684"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4f1a\u5728\u5bb9\u5668\u542f\u52a8\u7684\u65f6\u5019\u521b\u5efa Bean \u5bf9\u8c61 , \u540c\u65f6\u4f1a\u8c03\u7528\u521d\u59cb\u5316\u65b9\u6cd5"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u591a\u5b9e\u4f8b\u7684  "),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4f1a\u5728\u6bcf\u6b21\u83b7\u53d6 Bean \u7684\u65f6\u5019\u521b\u5efa"),(0,r.kt)("li",{parentName:"ul"},"\u540c\u65f6\u4e5f\u4f1a\u5728 \u83b7\u53d6\u65f6\u8c03\u7528\u521d\u59cb\u5316\u65b9\u6cd5 ,\u4f46\u662f\u5bb9\u5668\u4e0d\u4f1a\u5c06\u5176\u8fdb\u884c\u9500\u6bc1"))))))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Bean\u7684\u521d\u59cb\u5316(Initialization)",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"@PostConstruct")," \u6807\u6ce8\u65b9\u6cd5 -> \u57fa\u4e8eAnnotationConfigApplicationContext \u8c03\u7528"),(0,r.kt)("li",{parentName:"ol"},"\u5b9e\u73b0",(0,r.kt)("inlineCode",{parentName:"li"},"InitializingBean"),"\u63a5\u53e3\u7684afterPropertiesSet()"),(0,r.kt)("li",{parentName:"ol"},"\u81ea\u5b9a\u4e49\u521d\u59cb\u5316\u65b9\u6cd5",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"XML\u914d\u7f6e: ",(0,r.kt)("inlineCode",{parentName:"li"},'<bean init-method="xxx"/>')),(0,r.kt)("li",{parentName:"ul"},"java \u6ce8\u89e3: ",(0,r.kt)("inlineCode",{parentName:"li"},"@Bean(initMethod=\u201cxxx\u201d)")),(0,r.kt)("li",{parentName:"ul"},"java api: ",(0,r.kt)("inlineCode",{parentName:"li"},"AbstractBeanDefinition#setInitMethodName(String)"))))))),(0,r.kt)("admonition",{title:"\u6ce8\u610f:Bean\u5404\u4e2a\u521d\u59cb\u5316\u65b9\u6cd5\u7684\u6267\u884c\u987a\u5e8f",type:"danger"},(0,r.kt)("font",{color:"blue"},"@PostConstruct -> \u5b9e\u73b0InitializingBean -> \u81ea\u5b9a\u4e49\u521d\u59cb\u5316\u65b9\u6cd5")),(0,r.kt)("p",null,"\u2460\u3001 Bean\u5bf9\u8c61"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class Person implements InitializingBean {\n    String name;\n    Integer age;\n    public static Person createUser(){\n        Person person = new Person();\n        person.setName("11");\n        person.setAge(22);\n        return person;\n    }\n\n    /**\n     * \u4f7f\u7528 {@link @PostConstruct} \u6ce8\u89e3\u6807\u8bc6\u7684Bean \u521d\u59cb\u5316\u65b9\u6cd5\n     */\n    @PostConstruct\n    public void init(){\n        System.err.println("\u4f7f\u7528@PostConstruct \u6ce8\u89e3...");\n    }\n\n    public void  beanPostCon(){\n        System.err.println("\u81ea\u5b9a\u4e49\u521d\u59cb\u5316\u65b9\u6cd5:@Bean initMethod...");\n    }\n    \n     // \u5b9e\u73b0 InitializingBean\u7684 afterPropertiesSet\u65b9\u6cd5\n    @Override\n    public void afterPropertiesSet() throws Exception {\n        System.err.println("\u5b9e\u73b0SpringInitializingBean ...");\n    }\n}\n')),(0,r.kt)("p",null,"\u2461\u3001 \u901a\u8fc7\u6ce8\u89e3\u65b9\u5f0f\u6ce8\u5165Bean\u5bf9\u8c61"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class BeanConstructDemo {\n    public static void main(String[] args) {\n        // \u521b\u5efa\u4e00\u4e2a\u6ce8\u89e3\u9a71\u52a8\u7684Spring\u5e94\u7528\u4e0a\u4e0b\u6587\n        AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext();\n        context.register(BeanConstructDemo.class);\n        context.refresh();\n        //\u4f9d\u8d56\u67e5\u627e\n        Person bean = context.getBean(Person.class);\n        System.out.println(bean);\n        context.close();\n    }\n\n   // \u81ea\u5b9a\u4e49\u521d\u59cb\u5316\u65b9\u6cd5\u901a\u8fc7@Bean \u7684name\u5c5e\u6027\u6307\u5b9a\u521d\u59cb\u5316\u65b9\u6cd5\n    @Bean(initMethod = "beanPostCon")\n    public Person person(){\n        Person person = new Person();\n        person.setAge(22);\n        person.setName("Yoey22");\n        return person;\n    }\n}\n\n/*\n    \u4f7f\u7528@PostConstruct \u6ce8\u89e3...\n  \u5b9e\u73b0SpringInitializingBean ...\n  \u81ea\u5b9a\u4e49\u521d\u59cb\u5316\u65b9\u6cd5:@Bean initMethod...\n*/\n')),(0,r.kt)("h4",{id:"161-\u5ef6\u8fdf\u521d\u59cb\u5316\u7684bean"},"1.6.1 \u5ef6\u8fdf\u521d\u59cb\u5316\u7684Bean"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("mark",null,"Bean\u7684\u5ef6\u8fdf\u521d\u59cb\u5316\uff08Lazy Initialization\uff09"),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"XML \u914d\u7f6e: ",(0,r.kt)("inlineCode",{parentName:"li"},'<bean  lasy-init="true|false"/>')),(0,r.kt)("li",{parentName:"ol"},"java \u6ce8\u89e3: ",(0,r.kt)("inlineCode",{parentName:"li"},"@Lazy(true)"))))),(0,r.kt)("admonition",{title:"\u5ef6\u8fdf\u521d\u59cb\u5316\u4e0e\u975e\u5ef6\u8fdf\u521d\u59cb\u5316\u7684\u533a\u522b\uff1f",type:"danger"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"\u5ef6\u8fdf\u521d\u59cb\u5316\u7684Bean",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u53ea\u6709\u5728\u83b7\u53d6 Bean \u7684\u65f6\u5019\u8c03\u7528\u521d\u59cb\u5316\u65b9\u6cd5")),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u6709\u5176\u4ed6\u975e\u5ef6\u8fdf\u52a0\u8f7d\u7684Bean\u4f9d\u8d56\u4e8e\u8fd9\u4e2aBean\uff0c\u4e5f\u4f1a\u7acb\u5373\u5bf9\u8fd9\u4e2aBean\u521d\u59cb\u5316"))),(0,r.kt)("li",{parentName:"ul"},"\u975e\u5ef6\u8fdf\u521d\u59cb\u5316",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5728Spring\u5e94\u7528\u4e0a\u4e0b\u6587\u542f\u52a8\u5b8c\u6210\u540e,\u5c31\u4f1a\u8c03\u7528\u521d\u59cb\u5316\u65b9\u6cd5"))))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5ef6\u8fdf\u52a0\u8f7d\u7684Bean")),(0,r.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\uff0c\u5bb9\u5668\u5237\u65b0\u7684\u65f6\u5019\u6ca1\u6709\u5bf9Bean\u8fdb\u884c\u521d\u59cb\u5316,\u53ea\u662f\u5c06Bean\u6ce8\u518c\u5230\u5bb9\u5668\uff0c\u5f53\u5c1d\u8bd5\u4ece\u5bb9\u5668\u4e2d\u83b7\u53d6Bean\u7684\u65f6\u5019\u624d\u4f1a\u5bf9Bean\u8fdb\u884c\u521d\u59cb\u5316"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class AnnotationBeanFactoryDemo {\n    public static void main(String[] args) {\n        AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\n        ctx.register(AnnotationBeanFactoryDemo.class);\n        System.out.println("refresh start...");\n        ctx.refresh();\n        System.out.println("refresh end...");\n        Iterator<String> iterator = ctx.getBeanFactory().getBeanNamesIterator();\n        while (iterator.hasNext()){\n            String next = iterator.next();\n            System.out.println(next);\n        }\n        System.out.println("-----");\n        User user = (User)ctx.getBean("user");\n        ctx.close();\n\n    }\n    @Lazy //Bean \u7684\u61d2\u52a0\u8f7d\n    @Bean\n    public User user(){\n        User user  = new User(33,"create by DefaultUserFactory");\n        user.setName("create by DefaultUserFactory");\n        user.setAge(33);\n        return user;\n    }\n}\n\n/*\nrefresh start...\nrefresh end...\norg.springframework.context.annotation.internalConfigurationAnnotationProcessor\norg.springframework.context.annotation.internalAutowiredAnnotationProcessor\norg.springframework.context.annotation.internalCommonAnnotationProcessor\norg.springframework.context.event.internalEventListenerProcessor\norg.springframework.context.event.internalEventListenerFactory\nannotationBeanFactoryDemo\nuser\nenvironment\nsystemProperties\nsystemEnvironment\norg.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry\nmessageSource\napplicationEventMulticaster\nlifecycleProcessor\n-----\nUser \u6709\u53c2\u6784\u9020\u5668\u8c03\u7528...\n\u521d\u59cb\u5316 User name \u5c5e\u6027...\n\u521d\u59cb\u5316 User age \u5c5e\u6027...\n@PostConstruct ....\nafterPropertiesSet ....\n*/\n')),(0,r.kt)("h3",{id:"17-bean\u7684\u9500\u6bc1"},"1.7 Bean\u7684\u9500\u6bc1"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Bean\u7684\u9500\u6bc1",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"@PreDestroy"),"\u6807\u6ce8\u65b9\u6cd5"),(0,r.kt)("li",{parentName:"ol"},"\u5b9e\u73b0",(0,r.kt)("inlineCode",{parentName:"li"},"DisposableBean"),"\u63a5\u53e3\u7684 destroy()\u65b9\u6cd5"),(0,r.kt)("li",{parentName:"ol"},"\u81ea\u5b9a\u4e49\u9500\u6bc1\u65b9\u6cd5",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"XML\u914d\u7f6e: ",(0,r.kt)("inlineCode",{parentName:"li"},'<bean destroy="xxx"/>')),(0,r.kt)("li",{parentName:"ul"},"java \u6ce8\u89e3: ",(0,r.kt)("inlineCode",{parentName:"li"},'@Bean(destroy="xxx")')),(0,r.kt)("li",{parentName:"ul"},"Java api: ",(0,r.kt)("inlineCode",{parentName:"li"},"AbstractBeanDefinition#setDestroyMethodName(String)"))))))),(0,r.kt)("admonition",{title:"\u6ce8\u610f:Bean\u5404\u4e2a\u9500\u6bc1\u65b9\u6cd5\u7684\u6267\u884c\u987a\u5e8f",type:"danger"},(0,r.kt)("font",{color:"blue"},"@PreDestroy -> \u5b9e\u73b0DisposableBean -> \u81ea\u5b9a\u4e49\u9500\u6bc1\u65b9\u6cd5")),(0,r.kt)("h3",{id:"18-ioc\u5bb9\u5668\u7684bean\u80fd\u591f\u88ab\u5783\u573e\u56de\u6536\u5417"},"1.8 IOC\u5bb9\u5668\u7684Bean\u80fd\u591f\u88ab\u5783\u573e\u56de\u6536\u5417\uff1f"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\uff0c\u901a\u8fc7",(0,r.kt)("font",{color:"red"},"\u5173\u95edSpring\u5bb9\u5668(\u5e94\u7528\u4e0a\u4e0b\u6587)"))))}c.isMDXComponent=!0},25635:(e,n,a)=>{a.d(n,{Z:()=>t});const t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAi8AAABICAYAAAA+uhWPAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAACL6ADAAQAAAABAAAASAAAAADGkgYpAAAkvElEQVR4Ae1dB5gUxRIuMiKSQQSUoERRkiBKEFCSgmRJSg4KKkkliYABUEBRMBJE0iOIgARJKohiQHIGkZw5cpAg+/ov7GF2mbS3d3C7W/19e9Mznar+6u6prq6eS3Tp0iUfSRAEBAFBQBAQBBIIAqdPn04glAgZCRWBxAmVMKFLEBAEBAFBQBAQBAQBKwREebFCRZ4JAoKAICAICAKCQIJFQJSXBCsaIUwQEAQEAUFAEBAErBAQ5cUKFXkmCAgCgoAgIAgIAgkWgaRxQdmRmBOUJWN6Wr5qg2V1hfPloTSpU1mmyUNBQBAQBAQBQUAQEASCQSBk5WXrzj0Uc+I0Ky8xJ09Ztn35ymXL5/JQEBAEBAFBQBAQBASBYBEIadsIisu2nXuDbVPyCwKCgCAgCAgCgoAgEGsEYm15EcUleMy7dOlCyZMnp3fffdeysFu6ZaGb/BDfX6hduzaB1po1a97k1u2bO378OKlvFnGGRIkS0e23306pU6e2L+CQ8umnn9L48eMJdb7yyitUr149zp0+fXqHUv5JJ06ccC3jJY9/rcHfmXHRpZMkSUKZM2fWt2F3NfOUMmVKSps2LUHmCTmYadZ0hrscNB9yFQRuBQKxUl5EcYmdqNatW0eYbO2CW7pduZv5/PLly/Tzzz9Tw4YNb2azrm09+eSTtGrVKr982bNnp5dffpk6d+7s+eW2fft26tSpE/Xu3ZsKFy7ML/n69euz3ObOnetXv9ONlzJe8ji14SXNChcoLvv37/dSPEHmCeQJ/Lz66qss5wRJsCIqkGbQGe5yMGN9QrkMXFJzw52ZM5kfG/FDR49RSrVwS5c2jfFMIoJAKAgErbxcvXqVMqVPyz/dcLKkyXRUroLALUOgWLFi9PXXX1NMTAy/nGFB6d69O/355580ceJET3R99913rOi89tprdNttt3EZWF+SJg1uqASW6dq1K+3bt4+mTp1q0BGYx0iI44jGRVcbLC+6nPlqxY85Pb7jDz30EI0bN47WrFnDlsw+ffpQs2bNKEOGDPHddKzrj0Q5aDAuKqvn9p27+TZQgTmsFJftf++ivLlz6uxyFQRCRiC4GVk198+ly3TsxI2OuQePhkwLwfIwb948fvHcddddhJVpvnz5uOKVK1dyGkztRYoUoSZNmlCyZNeUJrywMCFjQpsyZQqdOXOGmjZtSvfddx9988039Ouvv1KlSpWoatWqBFOtU1iyZAktWLCAUqVKRQ0aNCC8zJ544gl64IEHuNhPP/3Ez9B248aNqWDBgn7VuaWbMy9btoxfrC1btqR06dIZSTt27KBp06bRqVOnqFatWlS6dGlOw8sPvKxYsYLSpEnDPObOndsop3F4+OGHuTywwoRuzuPGn1GZKYIy8+fP522YatWqmVKuR5341nQFIx8neV9v1T8Gq9bdd9/Nv6JFi9JTTz3FMgKW7du3p/LlyxsFrOiFRQnyRvjss88oa9asXP7cuXN+yovmxwlnc5lFixYRfufPn6cPPviA8ubNSzVq1CBzHk2YE99e2tX1mK8aF/MzHXfrU1Zjcvfu3Zb8oE4n+pGueShQoAArcujjkAv6uQ7o/99++y21atWKt4T0c/MVPGF843fx4kXCGEKZFi1acDYr+SIhsH20XaFCBbpw4QJ9//339OOPP/KWI7ZES5YsyXXhjxNfuk6n/oA67OTgJgOUjUs5aHq1DIDBli1bCHNusHIAbQhZs2AbMhFtU0oKglZgoLjgGRSXa3k4Wf4IAiEjkCjY/22EE0X6SPTxY0cIGrdVSKFMhBkyZeGkR4sXpozp0lplM559+eWX1LFjR35J4KVz+PBhevHFF6lu3bqEtA4dOvDgwoDDJFO8eHHCSzVFihT0+OOP08GDB/nlgBcOJj/sg0NZwUDFCw2Df/LkyVyf0WhA5JNPPmFfjpw5c/LEtXjxYoICMHz4cH75jRw5kl566SWqWLEi7dmzhw4cOECbNm1iulCVWzroxASG7Yc//viDKleuzPW+9957TAnSYc4/e/YsZcqUif766y+CpQsvvjJlyjCfaPfRRx8lTM4+n4927txpbImgPHD7559/WEk7efIk/fvvv7ziR7tu/AXAwbejRo1iueAlgW0UYALlUGOCTF74DkY+bvK2ohMKHvrC0qVL/ZJXr15NeKn07NmT+vfvz2l29ALngQMHcv9BH7z33ntpyJAhjLuWGypww1nn0WVGjBjB9cInp2zZskxPjx49bqjXjW8v7TKDpj92uOgsqNOuT9mNSfR74BTIjxv9Ghe8rNE3sa0H3yS8OEGDtnRB0YQcN2/ebPRtTS+u4AmLix9++IEfY1sQfRtlHnnkEcf+CH7N7ffq1YsXSVCUsHCCUokx9PTTT1Pbtm25fje+vMjFSQ5OMgABcS0HKwymT5/OYzsYOTA4AX8OHVFWlp27KF+eXIR/mgeLC+JamQnIbnsr/9vIFhpJ0AhAeQnmd/DIUd/0+T/yr93zHX01a9ay/CFN50MZpzaOHj3qu+OOO3xKyfDt3bvXL++xY8d8ysrgU9YPn1q5ctrMmTMxLnzqpc/35cqV8ymLik+ZkflebRdwunrJ+9QWgk+tzHxqf9n33HPP+dVtpunIkSM+5eDpUxYan1oRc75ffvmF61Evap+mQ01onIY8auL1qZc737uloy3QqRQW39atW5ke5fjqU4qGQRPSwata/fMzpYRxG0ph4nul2Bh5lUWJaVPWAuMZygOXQYMG8TNlLeH7GTNm+Nz4M2Oh40px8ykzvK969eo+tTLlOpXSZGCCfF759iofXZ+TvDV95qtSZn3qxWVgodPUS5LpVT46nKbrt5Oj8nXxKauaXz1abrpOJ5zNeSBrfa98HnxKiTLu8dxcr6bLiW8v7er29BW4KEXepyxmxk8pdAYddn3KaUyi7kB+vNCveVbOtT5lIWUa5syZw/L56quv+B7tKsXE98477xg0al70FTypLRgfyqoFD+dHH0W6psNOvsDQ3L6uE2NZWW1uaFPXF6pcnORgJwPQFh9ysMIgNnLQ2AVe9+w74Pt+2XL+7d1/4AZMA/Nb3QN3+QkGTn0g6G0jrfTgWrV2ffNtrOMbNmzg1Ty2OO68806/epAGLRxWFL1XryYSXqUtX77ccNKD6bdRo0ZcFis6BKyalVLEcZhEYdGwC2gH6Vhx6+2oPHnyGNnXr1/PdCjFgy1CSMBKH5YI0O2WriuCPwZWd9jKURM2JU7sf1odVgKsjBBgMcJWC7Yyhg4dyg5+GzduZMdU7PUjoD5zwMoe/ggIsJYgYJXrxh9nDPgDqxJOSWDLTW+3YcvDHLzy7VU+XuVtpsEpDisUQsaMGfnqlV7O7PDHDmeHIo5JXvmOTbsYA1j564AtRx3gNGrVp0APLGxWY1KXNV+90o8y6At16tTh4hjLOXLkoLFjx/IWHXyT4BTevHlzc/U3xGFRwziCpRXjvl+/fpzHi3zN7euK4VALGsAz/KSw7YjglS8vcrGTg50MdPvxIYdADGIrBwYp8E+iwAdyLwjEPQIhKS9//LyUThyzdnZJnykzlSr7mCeKse+NYPbN0AWxbYOAF7kOOG6MbRWdhueBSgCeBXN8EhMmApQcq6BphGkbSgsC/GqwxYTgls6Z1B/4C8DXIUuWLJ7ow/FcrajAtK2sKDz5Z8uWTVfpd9Wmdzw08+/Gn18l/90oaw3HrOSi83vl26t8tEzd5K3bd7tiuxBBK11e6XWr1w5nt3J26V75jk27wBLbI1bBrk9pnJxkb67PK/0ooxchiKNfwE9FWVp4bGBLD1s2GB9OAcoYtvn0WNR5Nd124xT5zO3rcmPGjOFtws8//5yUZZfef/99euGFF4w5xq0/epGLnRzsZADaND9xLYdADGIrB42fvmrnXN42Uja1QB8YnU+ugkCoCPgv+4OsLYNSULJkz2H5Q5rXAD8WBDiFBgb4HSD8/vvvRhL23NX2Ek82xsMQI/ApwXdB4BCrAyZHHTSNUG5gBdE/HMVFcEvX9SjzMZ98+e2331j5gU+KU8BJGWAAbCZMmMAOn1Bg9H68U1lzmht/5rw6DisQJrW1a9fqRzdYerzybVTgEolLeQNbfFMHK174TiHENb0u7PglK/O43735Ji75NtfrFHfqUxonqzGp6zTzEwr92sry/PPPsxXIS9/GyzdQcQFdmm67cappD7yirjfffJP9b6AYDRgwgP3NQuErsA2reycZIL/mJ6HKwcyTds7VPi5Zs2RSjrq5WIFBmgRBIC4RCMnykkFZP243maBBWKaMmSnZf5YJr4RiewbbNRig3bp145UYnG5hEsZEghcvnG2xhYLTPW+//TZbFXDCILYBDsBQiOD8i5M+sOZUqVKF4Fy5a9curh+nehAwUYJGnEDAUddChQqxkx8c+9SeNOEEjlu6mU7Ug2O87dq1I0zYWG3qAKUG5mtsk40ePZqdC2HGhmMjAhx0QTMcZhGAk5fgxp+uw4wLrFvAHE67WDWijsAVfDB86zacrpisvcjbTKc+qQXzOmSGrSLgAkdHyBhYaYtaXNPrxIs57cEHH6SFCxcStjvg+Ky3JnUer3zr/HZXK1zs8jr1KeVD4jgmA/kJhX5YL7E1iX4NZQEO8eYQDE+xkS+UXCgucKBH+9gihSUFlstQ+DLzYBd3kgHKgB+nufFmysGOBzw/dOQoH5XGqSKzcy4UGASxwDAM8icOEQjJ8rLi559owYyv/X7HYqy3kdxoxgsSSgCUhxIlSlCbNm0I/iUI+NopjkxjmwaWiyXqlBHywzKgg3mLRMf1FXkQN99DCcD+uNnygeOxWPXhZAy+FwEFA0FPMGgT++w4uYJJpYLau4eXvg5u6cinaYCpHKs7+L307dtXV8HK2bBhw3g7CqZ0KDetW7cm5WTHX3rFySSY1aHEgX/4t5gtRLp+c1v6mRt/KBOICyZ1rLChaKGt119/nWnVdeImGL6RX5fVV/1M33uRdyCdKAv/BCg+eAkBW8gQx9EDV/JO9GoaQJM5BD433+u4vupy5nv4juTPn59lhm0CHcx5vPBtzq/j+oo6rXAxp+t2cXXrU8DJbkxa8eOFfrRrRY+2vqCvB6YHwxPqd5KvVfs40YdxDL8PKFLwffviiy8MOrzwZaZZx/VVt2m+xzMENxkgT3zIwYoWtOUkB6TbBZwuzZsnl+VxaCgwsMYkT5bMrrg8FwSCRiCko9JeW/NyVFrXBedcrKC1061+jiv2fzGxwN/DbvCZ84cax9YQFBVYQ6A06YCVPawucDTUjqw6DVe3dHNecxy8oz4oS9gaw3FvrTjpfHDQxTFRrAyheIEOO/8XXcbuasdfYH5M7upEBMvEyndF548t37p84DW+5R3X9AbSb3WPY7qwaOEYtV2Ib74D23XrU05j0oqf2NAPhR1fNYai4ubvEki/3X2w8oUvGuaXwEMDuv7Y8KXLul3dZIDy4SoHN96t0sGrBEHACYEEp7w4ERvfaVBUsGVUqlQpXsXDtwRfxYQ5OxJCpPMXCTKKRh6ghMMqhXE3adKkaIQgQfCckOQgykuC6BIJmoiQto0SNGexIA7WFTjt4rQBLBr4+NWsWbNiUVPCLBLp/CVM1IUqNwTwMUZ8XA7jTcKtQ0DkcOuwl5aDRyBoy8vps+dpw7a/g2qpcL48lCZ1qqDKSGZBQBAQBASB6ERALC/RKfdguA5aeQmmcskrCAgCgoAgIAgEi4AoL8EiFn35Zdso+mQuHAsCgoAgIAgIAmGNgCgvYS0+IV4QEAQEAUFAEIg+BER5iT6ZC8eCgCAgCAgCgkBYI5D08cGrw5oBIV4QEAQEAUEgshCY0f7av4WJLK6Em7hEQCwvcYmm1CUICAKCgCAgCAgC8Y6AKC/xDrE0IAgIAoKAICAICAJxiUBI/5gxLgmRugQBQUAQEAQEASDg9R/OClrRi0Ai38W9vkhkf+3mGCpSMKMla/uP5bB8Lg8FAUFAEBAEBIFIRiB7pn0RwZ5sG0WEGIUJQUAQEAQEAUEgehCQbaPokbVwKggIAoKAIBDFCOTInsjgXu26GPFwjIjlJRylJjQLAoKAICAICAJRjIBYXiJU+F9/PY6+HDOC5s77w5LDV19pS5kyZaHuPd6xTE9oD7dt20idOzWnDz8aT3nzFryl5J07d5a+++4bpiFNmnR07735KXfuvJQ4cXBrgfnzZ9CsmZNp9+4d1LnLG/TF5+9T02fbUp06TYPir3GjytSwUSuqXbtxUOV05lDL63qCuW7Zsp42bLjxG1M5cuSk0qUfC6aqsMsbV/0HjP/zzwWaOnUsLZg/k06ciFHjeQA99liVkDHB/DFi+ECuB/36hx83BlXnsmWL6fDhA1wmefIU9OijFXm+CaqSW5g5mvvnLYQ9qKZFeQkKrvDJfOTwQVq37k9bgnfs2ELnzp2xTU9oCZjw161bSRcunLvlpB05cpAVqZQpb6NLly7S1atXqUiRkvTBsLGUL18hT/QdOLCX2rSuywpHo8atWQHavHkdxRw76qm8OdOaNSuoQsVq5kcch1JUtkxemjhpAZUvX/mGdP3ArrxOj4/r/O9m0pAhbxAwNCt9Vao8HWfKi1f+44M/pzrjov/o+hcsmEVv9HmZ2rXrRnffk4ty5Yqbj7uVKlWOevVOR4sXzaFJk0bq5vyuTvh+PGIQLV/+I0G5x9j9998rVLJkWfpo+HjKnv0ev3oS4k0098+EKA8rmmyVl0uXrtDmbXtow6ZddOGfi9S8cWVKlsw2u1Xd8kwQiGgE+vX/gJ55pgX98cfP1K1rK2rbpi6vUJMkSeLK9w8/zKOkSZPR0PfHUIoUKTn/xk3HXctZZdi85aTVY/L5fP/9rlqm64d25XV6fF5XrzlId9yRNl6a8Mp/vDTuodJQ+o+u/vvFc1lx7tV7kH4UJ9d77slN+O3fv8e2Pjd8CxZ8kBYsXM3KC6xDfV5/iQYO6EEjPp5kW2dCS4jm/pnQZBFIj62de+GPK2nLtr2UMWMatbKMyNPUtGvXX9SqZS0qWuROypc3NdWvV4G2b9/MGF2+fIne7N+NSpW8hwrkT8NpMCUi/PTTIqr8RBGqW6cc3V8oAw374C1e4VarWpytA5zJ5c+ZM6epY4fGVLBAWipfLj8NHz6Aajz1MP311xYuiYlh5MgPqGKFQnRvntuoapViBFOsDm7pOp++/vbbUgJ9qFOHU6dOUovmNZn3ShUL05Il83USffvtFHrqyVKUP98dVKhgenqmQSWCZUAHbDv1faMz4fpA4UxUr+5jjItOd+NP57O7Xi+fjsqVzUffzbu2TaPzO/HvRT5O8tVteLnCJF627OO8/bZjx1ZasGAmF3Oir03rOjR0SD9ejdauVYaqVyth/KZPH8/l3fBFpqZNqnKfQb/55psJXA5//v57G1WpXJSaN6vBz3r2eIHv8ezQof1GPrvyyOCGjxf6jIZiEXHrf6jSbvx64d+NP9SPcf18+2doxoyJPP4wDps0rkJr1vzBeP7553JkM0K/vl2oZYunjXsvkdj0H9QL/CHPhQtnEeYlxPFbunQBN+uGX4/uz9OAd7obJO7du4v74Nq1K4xndhEv+JrL3n57amrZ8kXClqDeKnQaH7qsHf5IR/kPP3ybatYoTblzpeB5+qOPrm+Bu8k31P7rhi9oTIj9E3RFSrBVXsqUvp8aqhdSnlxZI4VXPz6wP4xJf+XKX6lx4zZszsyaNTtt3bqB8w1+rw+NGjWMHnmkAnXp2pd27tzOL/Dz58/RqVMn+EWOlxb8HWD+btKkDQ8omEu9hPeH9lN+EzPUyr0l1ajZQL3M+vKkeP78WS6OgfjWm69Q8eKl6d33Pqf06TOyonH69LVVtlu6mYalSxfSs02r0wMPFKfWrTsZSZjogMPrfQYr2q+q+p8mbGcgbFi/mkqVKqt8TMZR337v09mzp1lZg1KBgIE5evSHamW2m17r/jaBrh7d23Ma/rjxZ2S0ieCFC3yAa7Vqtemzz4b45XTi34t8nOTr15DHmzJlKnHObVs38dWJvmbNO7DCkyxZcnq5U2/jt3nzejpy5BCXd8MXmZ59rj21aduZXwiHDl3zL8DzzJmzqj77BrVQLwyE2nWa8D2epU2bnp/hj115pLnh44U+1OMW4OeDMaN/Xvuf0/j1wr8bf6AbVofvv59LvXp2oEKFilD/N4dRkiRJqXDh4nTs2BGaNPH6dsqZM6dowoTPqdD9RdxYtkwPpv+ggvoNmrFM4WuVK9d9hnzz5buf63cbv1C0d+3aYdAC35n161epcXzKeGYX8YJvYFnMD0ePHja2jJzGhy5rhz/SZ836H/fRihWr09ivZtOLL/WkMyba3eTrtf9GWv/U2EbC1XYfKH3a1JHAny0PcGY9efI4zZz1Cz300KOcr1q1Ouy/gJvx4z+jcuWe4Jc37qGkwEoxd+7XvE+PZ3jx3Jbqdl75dOjYnc4qH5Kfli5CkmuAlaNevWd5QkTm8+fOsbKEOFYNcJZ76qn6vK2AZzVqNKASxbOzRaRhw5aO6c8+e12JWLRoNrVv14CaNm1Hb771ISVKdP2oXNKkSWnK1O+ZHzjUVXisIE2b9hV16vS62u/2V8LuuisHrzo3bFjFCh1ouu22VPTVuDlqOzE5vxQ7vNCIJ3zsaTvxh7JOAQrS7NlTqGHDVtTnjWtKy4UL52ns2I+5mBs++gXtJB8n+TZo0NyJPMu0jBmz8HNMuG70QT4b1IsCq+bq1esa9UEe5uCEL/Lpsq++0sZcTG3DpOE0TNAIDz9cTjlxVvXLgxu78kjzgo8bfajHLUyfPkEpBNe32cqUrUTZst3t2v+cxm9i5WAK3pz498IfaEe/GzX6G6VA12FW9NjCduGYMR/RW28PJ1gWZs+eShcv/sN91o1nq/Rg+w9kijD5f2OUBe9fQ5a6bi/jV+cN9uq1fx0/foz9ZQ4r/7vZypILfNq26+JpfGia7PDfuGENb7e+0OFVnod0fn31Il8v/TfS+qfGJxKutpaXSGDOiQdYWNKly0DFij3slw0THwYdXqAlSjxipOn47v9WK3hhw2chlVJeMHkhYDBoy4lR0CKC1SW2p4qb6i9arJSREysiDFpMiLlyJuMftm9gUVi44FteMTml64pgWm3bph5duXKZnmv2vJ/igjzYk4bDJAKUM0xKmj9sX0FZw5baPXcnYcUF+cwrMyh9wAGhQIHCfMULw40/zujwZ9++XTwhFyt+HZPiJUobJdzwQUYn+XiRr9GYxwgcdxHQB7zQ56VaO3y9lA0lj1d84oK+BQtX0bKftxm/okWvydyt/zmNXzfevfKHetCPypW70dm5cZPWPEbnzJnGzU2dMpZP1MBPJDYhrvuPG36xoTHYMkePHqIhg/vSlMlj2HL83uAvWIkOZnzY4Q9rNeY1bCl37dKS5s2bzpZv0OhVvl76b6T1z2BlmJDz+y/1EjKlcUwbJgsoHuZVn24CK2eElOpFpAOcKqHYXLp0LQ1xBFgyEiW6Fk+srjh54hauXLnCWcwrbV0fEvRE9kbfoVSp0pN+1YFmmMwR7NLNBTp1fp2+njaOYBXBsWntHIo8WnFBHHxg/x20Qenp9HIz3grq1ftdevDBEuxH0a5tfcXfv8jOwexoqTEA/2786fJ2V13eTCuUAh3c8MFWoMbTSj5e5Kvb8nrV2x057s7pKj+vddrh67V8bPN5xSe+6PPS/5zGrxvfXvlDPXny5DMWJ+Z6c+a8l7DVM3XKl7y9Cv+XUBxR47L/eMHPzAvisIrEdcifvzA77AbW6zZ+zfnt8MfpviVLN9P/Jo2ixYvn8HFxbC+PGj2DLTuow2n+Rnps+68XfBNq//zllx/AekSEqLW8YFBgwtA+LmZpYk8XGv+qlb8Zj+HIhhczXk5ew2S14oAzK3579uw0imF1hr3qP1dcd/hbq4676oA0vHyxh3vffQX8fjCpu6XrevDi7qK+H/LxJ5OUI/Bm6t+vq07iK5zntKKwf/8eiok5ynvSsJ6A33btu/JpmgIFHlD/KG2rX1mnGzf+dFk7fPRRynVrV+qstHrV70bcK/9GgYCIV/na0RdQHd9i5Q28sf0WKn1W9cfmGfwzEOCYHUzwio9bncHgZ67LS/9zGr+6Ljv+g+EPMrULjZU/1u+/L6P33n2dt02rV7+2taTzB8N/XPYfL/jdeWc2NSf9rUmlQOdjnZA5850c1d9s0c9xtcPXnMcqHsz4cMIf9WBxhW/QtGnTmbBFDt+aYORrRZ/bMy/4hkP/dOMzoafbWl5wVPrM2fPKUfOaRn785Bn1Qk9KGdLdkdB58kQfnBXHjBmujri2pg4dX+PjhvjQ033qA2j4JkbNms8QPiI2auQwKvxAMRo0sBdbLaDdY8LyErC1o60k+M6BOVSoUJWmqFUbJpE70qShceM+NZJhXYG/BxyGkyZLRrVqNeKPUc2bO52KFC1Jjz/+lGu6UZmKwBTf7ZX+9O6g3lSu/BPG/jjo692rIzVq3IodJlGmVu1GhFUlTgYsWjib/VtWrPiFRo/60Fyla9yJP13YDp8MGTKxvxGc8rCdhglsmrIe6eCGj85nd4Vi6CRfXc6OPp2+aeNawgvqt1+XEj7qhY/LFS5cjJPd5KfriO0VDqIwjyNAqT6h4vjuBixgeusia9Zs3GcnjP9c9bO7lOk+k7Ik5OXtTrfyXvBxo90NP7vyXvqf2/hF3U78xwV/UFbgSI/t3RYtOvpZNdG+G//x1X+84Ff6kfLKf26ycnydzJalkV9cP4UI2nXAB++wPT5wQE/1AcV26vRpZrZGId0JX13e6uo2fjG/uYWvvvpEKYzp+JtA2MretGktZclyF1uTvY5vtzbs0r3gGw79046/cHluq7zs2X+Efli6xuBj1txfOd6mWTXDJG8khmEEWvvoMTOo+2vtCdshCPCBgec6AhxFYZnp168L38PEiJM3GCB4meoVgV0chXSewDjuu3brp142fxO87jEhNFJfSP3yyxHGagYnfLBFg1M78JxHgNNsqf8c9dzSkd/cfseOPWjpkoX0Src2fIIJaTh9hO+NTJz4hZqgkvI2FKwsCD16DmCFDU682L5p27YLjRgx0KjTzDfy67b01Y0/c5nAOO4HDvqUj/q+2LEJ9zecKsDJD9USkvkElB0+eGloOsx0muNO8uUG1B9dB+6t4lA49Rd2+/cfRi1bvaSLOtKnM5nr1G3oZ7jquE4zXycpczlOo+nw6aeDCT/4X23ddu3jg7Aews8Ax7LxGQCYu5f/ukMpN3mUI6VzeTd83Ogz0xoY5/vE9hYNvHzc+p/b+EUbTvy78adpNssAz8wB26xYWMCR/BnlRB8YzGWt4qH2H7QXKAc884Jf5co1+fMD+FwD+IAjMhyQzXSiLsx7Q4aOos8/G0p1apclfERwzJezkOSIrxVdXOi/P17nr0B6dB0x6rQXjqZjCxB5HnzwIRo8ZCTzgjxu8g2kT7djXKOgf2osw/WaSP1zpoj8iMvazTFUpGBGS7nsP5bD7zm+fYGvQGLFignPHLCVAkdZaNtW/jHmvLGJw+kMKxucLho0qBdt2BjDSpSuC3vRUHLSpEnLVho9uLym63x2V6zacQwc21FmvxLkx8sOacAFNMYmuPHnViesCbDEmPenzWXc8DHntYrHt3xDpc+K5pv5LL7xceLFa/9zGr9O9SMtVP4aNXyCLWALF11f6Lm1GUx6KP3HC3771XYx/k2I2b8sGPpCzRsKfzjevW/fbrZ+YQFoFUKVr1Wd+pkXfJE3IfXPSPrHjKK86J54k684Srxq5e+Eo6H4vz34zgW+1zB5yuKbTEn8NBfp/MUPalJruCCAjz7i0/n4/tDgIaPUt6JahwvpQmcUIGDXPyNJebHdNooC+d5SFmHJgE8HvqwLUz8cPd9+Z/gtpSkuG490/uISK6kr/BDAVhy2lfEtIVFcwk9+kU5xNPRPsbxEei8W/gQBQUAQEAQEAYVAJFleovaotPRkQUAQEAQEAUEgmhDYt1/9s9aLe/kX7nyL8hLuEhT6BQFBQBAQBASBKEMg6akLkfHdlhvlFkOU3P9Ukc6TPZuOyVUQEAQEAUFAEIgmBKzfi+GGgFhewk1iQq8gIAgIAoKAIBDlCIjyEuUdQNgXBAQBQUAQEATCDQFRXsJNYkKvICAICAKCgCAQ5QiI8hLlHUDYFwQEAUFAEBAEwg0BUV7CTWJCryAgCAgCgoAgEOUIiPIS5R1A2BcEBAFBQBAQBMINAVFewk1iQq8gIAgIAoKAIBDlCIjyEuUdQNgXBAQBQUAQEATCDQFRXsJNYkKvICAICAKCgCAQ5QiI8hLlHUDYFwQEAUFAEBAEwg0BUV7CTWJCryAgCAgCgoAgEOUIiPIS5R1A2BcEBAFBQBAQBMINAVFewk1iQq8gIAgIAoKAIBDlCIjyEuUdQNgXBAQBQUAQEATCDQFRXsJNYkKvICAICAKCgCAQ5QiI8hLlHUDYFwQEAUFAEBAEwg0BUV7CTWJCryAgCAgCgoAgEOUIiPIS5R1A2BcEBAFBQBAQBMINAVFewk1iQq8gIAgIAoKAIBDlCPwfRbGwyhhLRd0AAAAASUVORK5CYII="}}]);